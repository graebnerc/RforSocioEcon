<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Erste Schritte in R | R für die sozio-ökonomische Forschung</title>
  <meta name="description" content="Einführung in R für die sozioökonomische Forschung; Version 1.0.0" />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Erste Schritte in R | R für die sozio-ökonomische Forschung" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Einführung in R für die sozioökonomische Forschung; Version 1.0.0" />
  <meta name="github-repo" content="graebnerc/RforSocioEcon" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Erste Schritte in R | R für die sozio-ökonomische Forschung" />
  
  <meta name="twitter:description" content="Einführung in R für die sozioökonomische Forschung; Version 1.0.0" />
  

<meta name="author" content="Dr. Claudius Gräbner" />


<meta name="date" content="2020-07-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="einrichtung.html"/>
<link rel="next" href="data.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R für die sozioökonomische Forschung</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Willkommen</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#danksagung"><i class="fa fa-check"></i>Danksagung</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#lizenz"><i class="fa fa-check"></i>Lizenz</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#änderungshistorie"><i class="fa fa-check"></i>Änderungshistorie</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="precons.html"><a href="precons.html"><i class="fa fa-check"></i><b>1</b> Vorbemerkungen</a><ul>
<li class="chapter" data-level="1.1" data-path="precons.html"><a href="precons.html#warum-r"><i class="fa fa-check"></i><b>1.1</b> Warum R?</a></li>
<li class="chapter" data-level="1.2" data-path="precons.html"><a href="precons.html#besonderheiten-von-r"><i class="fa fa-check"></i><b>1.2</b> Besonderheiten von R</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="einrichtung.html"><a href="einrichtung.html"><i class="fa fa-check"></i><b>2</b> Einrichtung</a><ul>
<li class="chapter" data-level="2.1" data-path="einrichtung.html"><a href="einrichtung.html#installation-von-r-und-r-studio"><i class="fa fa-check"></i><b>2.1</b> Installation von R und R-Studio</a></li>
<li class="chapter" data-level="2.2" data-path="einrichtung.html"><a href="einrichtung.html#die-r-studio-oberfläche"><i class="fa fa-check"></i><b>2.2</b> Die R Studio Oberfläche</a></li>
<li class="chapter" data-level="2.3" data-path="einrichtung.html"><a href="einrichtung.html#einrichtung-eines-r-projekts"><i class="fa fa-check"></i><b>2.3</b> Einrichtung eines R Projekts</a><ul>
<li class="chapter" data-level="2.3.1" data-path="einrichtung.html"><a href="einrichtung.html#arbeitsverzeichnisse-und-pfade"><i class="fa fa-check"></i><b>2.3.1</b> Arbeitsverzeichnisse und Pfade</a></li>
<li class="chapter" data-level="2.3.2" data-path="einrichtung.html"><a href="einrichtung.html#schritt-1-projektordner-anlegen"><i class="fa fa-check"></i><b>2.3.2</b> Schritt 1: Projektordner anlegen</a></li>
<li class="chapter" data-level="2.3.3" data-path="einrichtung.html"><a href="einrichtung.html#schritt-2-ein-r-studio-projekt-im-projektordner-erstellen"><i class="fa fa-check"></i><b>2.3.3</b> Schritt 2: Ein R-Studio Projekt im Projektordner erstellen</a></li>
<li class="chapter" data-level="2.3.4" data-path="einrichtung.html"><a href="einrichtung.html#unterordner"><i class="fa fa-check"></i><b>2.3.4</b> Schritt 3: Relevante Unterordner erstellen</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="einrichtung.html"><a href="einrichtung.html#optional-schritt-4-und-das-here-paket"><i class="fa fa-check"></i><b>2.4</b> Optional: Schritt 4 und das here-Paket</a></li>
<li class="chapter" data-level="2.5" data-path="einrichtung.html"><a href="einrichtung.html#abschließende-bemerkungen"><i class="fa fa-check"></i><b>2.5</b> Abschließende Bemerkungen</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="basics.html"><a href="basics.html"><i class="fa fa-check"></i><b>3</b> Erste Schritte in R</a><ul>
<li class="chapter" data-level="3.1" data-path="basics.html"><a href="basics.html#es:befehle"><i class="fa fa-check"></i><b>3.1</b> Befehle in R an den Computer übermitteln</a></li>
<li class="chapter" data-level="3.2" data-path="basics.html"><a href="basics.html#es:objekte"><i class="fa fa-check"></i><b>3.2</b> Objekte, Funktionen und Zuweisungen</a></li>
<li class="chapter" data-level="3.3" data-path="basics.html"><a href="basics.html#es:objektarten"><i class="fa fa-check"></i><b>3.3</b> Grundlegende Objeke in R</a><ul>
<li class="chapter" data-level="3.3.1" data-path="basics.html"><a href="basics.html#funktionen"><i class="fa fa-check"></i><b>3.3.1</b> Funktionen</a></li>
<li class="chapter" data-level="3.3.2" data-path="basics.html"><a href="basics.html#basics-types-vectors"><i class="fa fa-check"></i><b>3.3.2</b> Vektoren</a></li>
<li class="chapter" data-level="3.3.3" data-path="basics.html"><a href="basics.html#basics-logic"><i class="fa fa-check"></i><b>3.3.3</b> Logische Werte (logical)</a></li>
<li class="chapter" data-level="3.3.4" data-path="basics.html"><a href="basics.html#wörter-character"><i class="fa fa-check"></i><b>3.3.4</b> Wörter (character)</a></li>
<li class="chapter" data-level="3.3.5" data-path="basics.html"><a href="basics.html#fehlende-werte-und-null"><i class="fa fa-check"></i><b>3.3.5</b> Fehlende Werte und NULL</a></li>
<li class="chapter" data-level="3.3.6" data-path="basics.html"><a href="basics.html#indizierung-und-ersetzung"><i class="fa fa-check"></i><b>3.3.6</b> Indizierung und Ersetzung</a></li>
<li class="chapter" data-level="3.3.7" data-path="basics.html"><a href="basics.html#nützliche-funktionen-für-atomare-vektoren"><i class="fa fa-check"></i><b>3.3.7</b> Nützliche Funktionen für atomare Vektoren</a></li>
<li class="chapter" data-level="3.3.8" data-path="basics.html"><a href="basics.html#listen"><i class="fa fa-check"></i><b>3.3.8</b> Listen</a></li>
<li class="chapter" data-level="3.3.9" data-path="basics.html"><a href="basics.html#introfactors"><i class="fa fa-check"></i><b>3.3.9</b> Faktoren</a></li>
<li class="chapter" data-level="3.3.10" data-path="basics.html"><a href="basics.html#intro-matrix"><i class="fa fa-check"></i><b>3.3.10</b> Matrizen</a></li>
<li class="chapter" data-level="3.3.11" data-path="basics.html"><a href="basics.html#data-frames"><i class="fa fa-check"></i><b>3.3.11</b> Data Frames</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="basics.html"><a href="basics.html#es:pakete"><i class="fa fa-check"></i><b>3.4</b> Pakete</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>4</b> Datenkunde und Datenaufbereitung</a><ul>
<li class="chapter" data-level="" data-path="data.html"><a href="data.html#verwendete-pakete"><i class="fa fa-check"></i>Verwendete Pakete</a></li>
<li class="chapter" data-level="4.1" data-path="data.html"><a href="data.html#data-arten"><i class="fa fa-check"></i><b>4.1</b> Arten von Daten</a></li>
<li class="chapter" data-level="4.2" data-path="data.html"><a href="data.html#data-get"><i class="fa fa-check"></i><b>4.2</b> Datenakquise</a><ul>
<li class="chapter" data-level="4.2.1" data-path="data.html"><a href="data.html#exkurs-1-ländercodes-übersetzen"><i class="fa fa-check"></i><b>4.2.1</b> Exkurs 1: Ländercodes übersetzen</a></li>
<li class="chapter" data-level="4.2.2" data-path="data.html"><a href="data.html#data-download-R"><i class="fa fa-check"></i><b>4.2.2</b> Exkurs 2: Daten direkt mit R herunterladen</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data.html"><a href="data.html#data-read-write"><i class="fa fa-check"></i><b>4.3</b> Daten einlesen und schreiben</a><ul>
<li class="chapter" data-level="4.3.1" data-path="data.html"><a href="data.html#einlesen-von-datensätzen"><i class="fa fa-check"></i><b>4.3.1</b> Einlesen von Datensätzen</a></li>
<li class="chapter" data-level="4.3.2" data-path="data.html"><a href="data.html#speichern-von-daten"><i class="fa fa-check"></i><b>4.3.2</b> Speichern von Daten</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data.html"><a href="data.html#data-wrangling"><i class="fa fa-check"></i><b>4.4</b> Verarbeitung von Daten (‘data wrangling’)</a><ul>
<li class="chapter" data-level="4.4.1" data-path="data.html"><a href="data.html#das-konzept-von-tidy-data"><i class="fa fa-check"></i><b>4.4.1</b> Das Konzept von ‘tidy data’</a></li>
<li class="chapter" data-level="4.4.2" data-path="data.html"><a href="data.html#data-long-wide"><i class="fa fa-check"></i><b>4.4.2</b> Von langen und breiten Datensätzen</a></li>
<li class="chapter" data-level="4.4.3" data-path="data.html"><a href="data.html#data-merge"><i class="fa fa-check"></i><b>4.4.3</b> Zusammenführen von Daten</a></li>
<li class="chapter" data-level="4.4.4" data-path="data.html"><a href="data.html#date-select"><i class="fa fa-check"></i><b>4.4.4</b> Datensätze filtern und selektieren</a></li>
<li class="chapter" data-level="4.4.5" data-path="data.html"><a href="data.html#data-summary"><i class="fa fa-check"></i><b>4.4.5</b> Datensätze zusammenfassen</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="data.html"><a href="data.html#data-role"><i class="fa fa-check"></i><b>4.5</b> Abschließende Bemerkungen zum Umgang mit Daten innerhalb eines Forschungsprojekts</a></li>
<li class="chapter" data-level="4.6" data-path="data.html"><a href="data.html#data-packages"><i class="fa fa-check"></i><b>4.6</b> Anmerkungen zu Paketen</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="vis.html"><a href="vis.html"><i class="fa fa-check"></i><b>5</b> Visualisierung von Daten</a><ul>
<li class="chapter" data-level="" data-path="vis.html"><a href="vis.html#verwendete-pakete-1"><i class="fa fa-check"></i>Verwendete Pakete</a></li>
<li class="chapter" data-level="" data-path="vis.html"><a href="vis.html#einleitung"><i class="fa fa-check"></i>Einleitung</a></li>
<li class="chapter" data-level="5.1" data-path="vis.html"><a href="vis.html#vis-theorie"><i class="fa fa-check"></i><b>5.1</b> Optional: Theoretische Grundlagen</a><ul>
<li class="chapter" data-level="5.1.1" data-path="vis.html"><a href="vis.html#vis-base-ggplot2"><i class="fa fa-check"></i><b>5.1.1</b> <code>ggplot2</code> vs. <code>base plot</code></a></li>
<li class="chapter" data-level="5.1.2" data-path="vis.html"><a href="vis.html#grammar"><i class="fa fa-check"></i><b>5.1.2</b> Einleitung zu Wickham’s <em>grammar of graphics</em></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="vis.html"><a href="vis.html#vis-elemente"><i class="fa fa-check"></i><b>5.2</b> Grundlegende Elemente von <code>ggplot2</code>-Grafiken</a><ul>
<li class="chapter" data-level="5.2.1" data-path="vis.html"><a href="vis.html#elemente-eines-ggplot"><i class="fa fa-check"></i><b>5.2.1</b> Elemente eines <code>ggplot</code></a></li>
<li class="chapter" data-level="5.2.2" data-path="vis.html"><a href="vis.html#beispiel-workflow"><i class="fa fa-check"></i><b>5.2.2</b> Beispiel Workflow</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="vis.html"><a href="vis.html#arten-von-datenvisualisierung"><i class="fa fa-check"></i><b>5.3</b> Arten von Datenvisualisierung</a><ul>
<li class="chapter" data-level="5.3.1" data-path="vis.html"><a href="vis.html#allgemeine-tipps-zum-grafikdesign"><i class="fa fa-check"></i><b>5.3.1</b> Allgemeine Tipps zum Grafikdesign</a></li>
<li class="chapter" data-level="5.3.2" data-path="vis.html"><a href="vis.html#streu--oder-blasendiagramm"><i class="fa fa-check"></i><b>5.3.2</b> Streu- oder Blasendiagramm</a></li>
<li class="chapter" data-level="5.3.3" data-path="vis.html"><a href="vis.html#linienchart"><i class="fa fa-check"></i><b>5.3.3</b> Linienchart</a></li>
<li class="chapter" data-level="5.3.4" data-path="vis.html"><a href="vis.html#histogramme-und-dichteplots"><i class="fa fa-check"></i><b>5.3.4</b> Histogramme und Dichteplots</a></li>
<li class="chapter" data-level="5.3.5" data-path="vis.html"><a href="vis.html#balkendiagramme"><i class="fa fa-check"></i><b>5.3.5</b> Balkendiagramme</a></li>
<li class="chapter" data-level="5.3.6" data-path="vis.html"><a href="vis.html#vis-pie"><i class="fa fa-check"></i><b>5.3.6</b> Kuchendiagramme</a></li>
<li class="chapter" data-level="5.3.7" data-path="vis.html"><a href="vis.html#vis-kinds-summary"><i class="fa fa-check"></i><b>5.3.7</b> Zusammenfassung</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="vis.html"><a href="vis.html#vis-adv"><i class="fa fa-check"></i><b>5.4</b> Beispiele aus der Praxis und fortgeschrittene Themen</a><ul>
<li class="chapter" data-level="5.4.1" data-path="vis.html"><a href="vis.html#regressionsgerade"><i class="fa fa-check"></i><b>5.4.1</b> Regressionsgerade</a></li>
<li class="chapter" data-level="5.4.2" data-path="vis.html"><a href="vis.html#vis-viele-plots"><i class="fa fa-check"></i><b>5.4.2</b> Mehrere Plots in einer Abbildung</a></li>
<li class="chapter" data-level="5.4.3" data-path="vis.html"><a href="vis.html#mehr-zu-den-skalen-expand_scale-und-skalentransformation"><i class="fa fa-check"></i><b>5.4.3</b> Mehr zu den Skalen: <code>expand_scale()</code> und Skalentransformation</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="vis.html"><a href="vis.html#vis-fehler"><i class="fa fa-check"></i><b>5.5</b> Typische Fehler in der Datenvisualisierung vermeiden</a><ul>
<li class="chapter" data-level="5.5.1" data-path="vis.html"><a href="vis.html#clutterplots-und-ihre-tranformation-zum-beschrifteten-streudiagramm"><i class="fa fa-check"></i><b>5.5.1</b> Clutterplots und ihre Tranformation zum beschrifteten Streudiagramm</a></li>
<li class="chapter" data-level="5.5.2" data-path="vis.html"><a href="vis.html#ein-unbalancierter-plot"><i class="fa fa-check"></i><b>5.5.2</b> Ein ‘unbalancierter’ Plot</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="vis.html"><a href="vis.html#vis-lies"><i class="fa fa-check"></i><b>5.6</b> Lügen mit grafischer Statistik</a><ul>
<li class="chapter" data-level="5.6.1" data-path="vis.html"><a href="vis.html#klassiker-1-kontraintuitiver-nullpunkt"><i class="fa fa-check"></i><b>5.6.1</b> Klassiker 1: Kontraintuitiver ‘Nullpunkt’</a></li>
<li class="chapter" data-level="5.6.2" data-path="vis.html"><a href="vis.html#klassiker-2-geschickt-gewählter-zeitraum-und-clever-gewählte-achsenabschnitte"><i class="fa fa-check"></i><b>5.6.2</b> Klassiker 2: Geschickt gewählter Zeitraum und clever gewählte Achsenabschnitte</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="vis.html"><a href="vis.html#vis-links"><i class="fa fa-check"></i><b>5.7</b> Links und weiterführende Literatur</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="formalia.html"><a href="formalia.html"><i class="fa fa-check"></i><b>6</b> Formale Methoden der Sozioökonomie</a><ul>
<li class="chapter" data-level="6.1" data-path="formalia.html"><a href="formalia.html#einleitung-und-überblick"><i class="fa fa-check"></i><b>6.1</b> Einleitung und Überblick</a></li>
<li class="chapter" data-level="6.2" data-path="formalia.html"><a href="formalia.html#formalia-wachstum"><i class="fa fa-check"></i><b>6.2</b> Änderungsraten und die Rolle des Logarithmus</a></li>
<li class="chapter" data-level="6.3" data-path="formalia.html"><a href="formalia.html#formalia-diff"><i class="fa fa-check"></i><b>6.3</b> Grundlagen der Differentialrechnung</a><ul>
<li class="chapter" data-level="6.3.1" data-path="formalia.html"><a href="formalia.html#einleitung-differential--und-integralrechnung"><i class="fa fa-check"></i><b>6.3.1</b> Einleitung: Differential- und Integralrechnung</a></li>
<li class="chapter" data-level="6.3.2" data-path="formalia.html"><a href="formalia.html#wiederholung-ableitungsregeln"><i class="fa fa-check"></i><b>6.3.2</b> Wiederholung: Ableitungsregeln</a></li>
<li class="chapter" data-level="6.3.3" data-path="formalia.html"><a href="formalia.html#ableitungen-in-r"><i class="fa fa-check"></i><b>6.3.3</b> Ableitungen in R</a></li>
<li class="chapter" data-level="6.3.4" data-path="formalia.html"><a href="formalia.html#maximierung-die-analytische-perspektive"><i class="fa fa-check"></i><b>6.3.4</b> Maximierung: die analytische Perspektive</a></li>
<li class="chapter" data-level="6.3.5" data-path="formalia.html"><a href="formalia.html#maximierung-die-algorithmische-perspektive"><i class="fa fa-check"></i><b>6.3.5</b> Maximierung: die algorithmische Perspektive</a></li>
<li class="chapter" data-level="6.3.6" data-path="formalia.html"><a href="formalia.html#anwendungsbeispiel"><i class="fa fa-check"></i><b>6.3.6</b> Anwendungsbeispiel</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="formalia.html"><a href="formalia.html#formalia-linalg"><i class="fa fa-check"></i><b>6.4</b> Lineare Algebra</a><ul>
<li class="chapter" data-level="6.4.1" data-path="formalia.html"><a href="formalia.html#einführung-von-matrizen"><i class="fa fa-check"></i><b>6.4.1</b> Einführung von Matrizen</a></li>
<li class="chapter" data-level="6.4.2" data-path="formalia.html"><a href="formalia.html#grundregeln-der-matrizenalgebra"><i class="fa fa-check"></i><b>6.4.2</b> Grundregeln der Matrizenalgebra</a></li>
<li class="chapter" data-level="6.4.3" data-path="formalia.html"><a href="formalia.html#anwendungsbeispiel-1-das-einfache-keynesianische-modell"><i class="fa fa-check"></i><b>6.4.3</b> Anwendungsbeispiel 1: Das einfache Keynesianische Modell</a></li>
<li class="chapter" data-level="6.4.4" data-path="formalia.html"><a href="formalia.html#anwendungsbeispiel-2-ols-regression"><i class="fa fa-check"></i><b>6.4.4</b> Anwendungsbeispiel 2: OLS-Regression</a></li>
<li class="chapter" data-level="6.4.5" data-path="formalia.html"><a href="formalia.html#ols-deriv"><i class="fa fa-check"></i><b>6.4.5</b> Optional: Herleitung des OLS-Schätzers</a></li>
<li class="chapter" data-level="6.4.6" data-path="formalia.html"><a href="formalia.html#weiterführende-literatur"><i class="fa fa-check"></i><b>6.4.6</b> Weiterführende Literatur</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="formalia.html"><a href="formalia.html#formalia-dist"><i class="fa fa-check"></i><b>6.5</b> Analyse von Verteilungen</a><ul>
<li class="chapter" data-level="6.5.1" data-path="formalia.html"><a href="formalia.html#vert-begriff"><i class="fa fa-check"></i><b>6.5.1</b> Theoretische und empirische Verteilungen</a></li>
<li class="chapter" data-level="6.5.2" data-path="formalia.html"><a href="formalia.html#vert-kennzahlen"><i class="fa fa-check"></i><b>6.5.2</b> Kennzahlen zur Beschreibung empirischer Verteilungen</a></li>
<li class="chapter" data-level="6.5.3" data-path="formalia.html"><a href="formalia.html#vert-grafik"><i class="fa fa-check"></i><b>6.5.3</b> Grafische Komplemente zu klassischen Kennzahlen</a></li>
<li class="chapter" data-level="6.5.4" data-path="formalia.html"><a href="formalia.html#vert-bemerkungen"><i class="fa fa-check"></i><b>6.5.4</b> Abschließende Bemerkungen</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="linmodel.html"><a href="linmodel.html"><i class="fa fa-check"></i><b>7</b> Lineare statistische Modelle in R</a><ul>
<li class="chapter" data-level="7.1" data-path="linmodel.html"><a href="linmodel.html#einleitung-und-überblick-1"><i class="fa fa-check"></i><b>7.1</b> Einleitung und Überblick</a><ul>
<li class="chapter" data-level="7.1.1" data-path="linmodel.html"><a href="linmodel.html#einführung-in-die-lineare-regression"><i class="fa fa-check"></i><b>7.1.1</b> Einführung in die lineare Regression</a></li>
<li class="chapter" data-level="7.1.2" data-path="linmodel.html"><a href="linmodel.html#einführungsbeispiel"><i class="fa fa-check"></i><b>7.1.2</b> Einführungsbeispiel</a></li>
<li class="chapter" data-level="7.1.3" data-path="linmodel.html"><a href="linmodel.html#überblick-über-die-inhalte-des-kapitels"><i class="fa fa-check"></i><b>7.1.3</b> Überblick über die Inhalte des Kapitels</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="linmodel.html"><a href="linmodel.html#lin-grundlagen"><i class="fa fa-check"></i><b>7.2</b> Grundlagen der einfachen linearen Regression</a><ul>
<li class="chapter" data-level="7.2.1" data-path="linmodel.html"><a href="linmodel.html#grundlegende-begriffe"><i class="fa fa-check"></i><b>7.2.1</b> Grundlegende Begriffe</a></li>
<li class="chapter" data-level="7.2.2" data-path="linmodel.html"><a href="linmodel.html#schätzung-mit-der-kleinste-quadrate-methode"><i class="fa fa-check"></i><b>7.2.2</b> Schätzung mit der Kleinste-Quadrate-Methode</a></li>
<li class="chapter" data-level="7.2.3" data-path="linmodel.html"><a href="linmodel.html#ols-ass"><i class="fa fa-check"></i><b>7.2.3</b> Annahmen für den OLS Schätzer</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="linmodel.html"><a href="linmodel.html#lin-kennzahlen"><i class="fa fa-check"></i><b>7.3</b> Kennzahlen in der linearen Regression</a><ul>
<li class="chapter" data-level="7.3.1" data-path="linmodel.html"><a href="linmodel.html#erklärte-varianz-und-das-r2"><i class="fa fa-check"></i><b>7.3.1</b> Erklärte Varianz und das <span class="math inline">\(R^2\)</span></a></li>
<li class="chapter" data-level="7.3.2" data-path="linmodel.html"><a href="linmodel.html#hypothesentests-und-statistische-signifikanz"><i class="fa fa-check"></i><b>7.3.2</b> Hypothesentests und statistische Signifikanz</a></li>
<li class="chapter" data-level="7.3.3" data-path="linmodel.html"><a href="linmodel.html#konfidenzintervalle-für-die-schätzer"><i class="fa fa-check"></i><b>7.3.3</b> Konfidenzintervalle für die Schätzer</a></li>
<li class="chapter" data-level="7.3.4" data-path="linmodel.html"><a href="linmodel.html#zur-rolle-der-stichprobengröße"><i class="fa fa-check"></i><b>7.3.4</b> Zur Rolle der Stichprobengröße</a></li>
<li class="chapter" data-level="7.3.5" data-path="linmodel.html"><a href="linmodel.html#linmod-residuals"><i class="fa fa-check"></i><b>7.3.5</b> Residuenanalyse</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="linmodel.html"><a href="linmodel.html#stat-ablauf"><i class="fa fa-check"></i><b>7.4</b> Zum Ablauf einer Regression</a></li>
<li class="chapter" data-level="7.5" data-path="linmodel.html"><a href="linmodel.html#lin-multi"><i class="fa fa-check"></i><b>7.5</b> Multiple lineare Regression</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="advlin.html"><a href="advlin.html"><i class="fa fa-check"></i><b>8</b> Fortgeschrittene Themen der linearen Regression</a><ul>
<li class="chapter" data-level="8.1" data-path="advlin.html"><a href="advlin.html#annahmen-und-eigenschaften-des-einfachen-ols-modells"><i class="fa fa-check"></i><b>8.1</b> Annahmen und Eigenschaften des einfachen OLS Modells</a><ul>
<li class="chapter" data-level="8.1.1" data-path="advlin.html"><a href="advlin.html#annahmen-im-matrixschreibweise"><i class="fa fa-check"></i><b>8.1.1</b> Annahmen im Matrixschreibweise</a></li>
<li class="chapter" data-level="8.1.2" data-path="advlin.html"><a href="advlin.html#erwartungstreue-effizienz-und-konsistenz"><i class="fa fa-check"></i><b>8.1.2</b> Erwartungstreue, Effizienz und Konsistenz</a></li>
<li class="chapter" data-level="8.1.3" data-path="advlin.html"><a href="advlin.html#abweichungen-von-den-ols-annahmen"><i class="fa fa-check"></i><b>8.1.3</b> Abweichungen von den OLS Annahmen</a></li>
<li class="chapter" data-level="8.1.4" data-path="advlin.html"><a href="advlin.html#monte-carlo-simulationen-in-r"><i class="fa fa-check"></i><b>8.1.4</b> Monte Carlo Simulationen in R</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="advlin.html"><a href="advlin.html#heteroskedastie"><i class="fa fa-check"></i><b>8.2</b> Heteroskedastie</a><ul>
<li class="chapter" data-level="8.2.1" data-path="advlin.html"><a href="advlin.html#liegt-heteroskedastie-vor"><i class="fa fa-check"></i><b>8.2.1</b> Liegt Heteroskedastie vor?</a></li>
<li class="chapter" data-level="8.2.2" data-path="advlin.html"><a href="advlin.html#reaktionen-auf-heteroskedastie"><i class="fa fa-check"></i><b>8.2.2</b> Reaktionen auf Heteroskedastie</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="advlin.html"><a href="advlin.html#autokorrelation"><i class="fa fa-check"></i><b>8.3</b> Autokorrelation</a><ul>
<li class="chapter" data-level="8.3.1" data-path="advlin.html"><a href="advlin.html#folgen-von-autokorrelation"><i class="fa fa-check"></i><b>8.3.1</b> Folgen von Autokorrelation</a></li>
<li class="chapter" data-level="8.3.2" data-path="advlin.html"><a href="advlin.html#testen-auf-autokorrelation"><i class="fa fa-check"></i><b>8.3.2</b> Testen auf Autokorrelation</a></li>
<li class="chapter" data-level="8.3.3" data-path="advlin.html"><a href="advlin.html#reaktionen-auf-autokorrelation"><i class="fa fa-check"></i><b>8.3.3</b> Reaktionen auf Autokorrelation</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="advlin.html"><a href="advlin.html#multikollinearität"><i class="fa fa-check"></i><b>8.4</b> Multikollinearität</a><ul>
<li class="chapter" data-level="8.4.1" data-path="advlin.html"><a href="advlin.html#folgen-von-multikollinearität"><i class="fa fa-check"></i><b>8.4.1</b> Folgen von Multikollinearität</a></li>
<li class="chapter" data-level="8.4.2" data-path="advlin.html"><a href="advlin.html#testen-auf-multikollinearität"><i class="fa fa-check"></i><b>8.4.2</b> Testen auf Multikollinearität</a></li>
<li class="chapter" data-level="8.4.3" data-path="advlin.html"><a href="advlin.html#reaktionen-auf-multikollinearität"><i class="fa fa-check"></i><b>8.4.3</b> Reaktionen auf Multikollinearität</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="advlin.html"><a href="advlin.html#advlin-omitted-var"><i class="fa fa-check"></i><b>8.5</b> Vergessene Variablen</a><ul>
<li class="chapter" data-level="8.5.1" data-path="advlin.html"><a href="advlin.html#folgen-vergessener-variablen"><i class="fa fa-check"></i><b>8.5.1</b> Folgen vergessener Variablen</a></li>
<li class="chapter" data-level="8.5.2" data-path="advlin.html"><a href="advlin.html#testen-auf-vergessene-variablen"><i class="fa fa-check"></i><b>8.5.2</b> Testen auf vergessene Variablen</a></li>
<li class="chapter" data-level="8.5.3" data-path="advlin.html"><a href="advlin.html#reaktion-auf-vergessene-variablen"><i class="fa fa-check"></i><b>8.5.3</b> Reaktion auf vergessene Variablen</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="advlin.html"><a href="advlin.html#falsche-funktionale-form"><i class="fa fa-check"></i><b>8.6</b> Falsche funktionale Form</a><ul>
<li class="chapter" data-level="8.6.1" data-path="advlin.html"><a href="advlin.html#folgen-einer-falschen-funktionalen-form"><i class="fa fa-check"></i><b>8.6.1</b> Folgen einer falschen funktionalen Form</a></li>
<li class="chapter" data-level="8.6.2" data-path="advlin.html"><a href="advlin.html#testen-auf-die-richtige-funktionale-form"><i class="fa fa-check"></i><b>8.6.2</b> Testen auf die richtige funktionale Form</a></li>
<li class="chapter" data-level="8.6.3" data-path="advlin.html"><a href="advlin.html#wahl-der-funktionalen-form"><i class="fa fa-check"></i><b>8.6.3</b> Wahl der funktionalen Form</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="advlin.html"><a href="advlin.html#weitere-fehlerquellen-systematische-messfehler-selbstselektion-und-simulatanität"><i class="fa fa-check"></i><b>8.7</b> Weitere Fehlerquellen: Systematische Messfehler, Selbstselektion und Simulatanität</a><ul>
<li class="chapter" data-level="8.7.1" data-path="advlin.html"><a href="advlin.html#messfehler"><i class="fa fa-check"></i><b>8.7.1</b> Messfehler</a></li>
<li class="chapter" data-level="8.7.2" data-path="advlin.html"><a href="advlin.html#selbstselektion"><i class="fa fa-check"></i><b>8.7.2</b> Selbstselektion</a></li>
<li class="chapter" data-level="8.7.3" data-path="advlin.html"><a href="advlin.html#simulatanität"><i class="fa fa-check"></i><b>8.7.3</b> Simulatanität</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="advlin.html"><a href="advlin.html#anhang-übersicht-über-die-testverfahren"><i class="fa fa-check"></i><b>8.8</b> Anhang: Übersicht über die Testverfahren</a></li>
<li class="chapter" data-level="8.9" data-path="advlin.html"><a href="advlin.html#advlin-proofs"><i class="fa fa-check"></i><b>8.9</b> Anhang: Relevante Theoreme und ihre mathematischen Beweise</a><ul>
<li class="chapter" data-level="8.9.1" data-path="advlin.html"><a href="advlin.html#theoreme"><i class="fa fa-check"></i><b>8.9.1</b> Theoreme</a></li>
<li class="chapter" data-level="8.9.2" data-path="advlin.html"><a href="advlin.html#beweise"><i class="fa fa-check"></i><b>8.9.2</b> Beweise</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="nonlin.html"><a href="nonlin.html"><i class="fa fa-check"></i><b>9</b> Ausgewählte nichtlineare Schätzverfahren</a><ul>
<li class="chapter" data-level="9.1" data-path="nonlin.html"><a href="nonlin.html#logit"><i class="fa fa-check"></i><b>9.1</b> Binäre abhängige Variablen: Logit- und Probit-Modelle</a><ul>
<li class="chapter" data-level="9.1.1" data-path="nonlin.html"><a href="nonlin.html#warum-nicht-ols"><i class="fa fa-check"></i><b>9.1.1</b> Warum nicht OLS?</a></li>
<li class="chapter" data-level="9.1.2" data-path="nonlin.html"><a href="nonlin.html#logit-und-probit-theoretische-grundidee"><i class="fa fa-check"></i><b>9.1.2</b> Logit und Probit: theoretische Grundidee</a></li>
<li class="chapter" data-level="9.1.3" data-path="nonlin.html"><a href="nonlin.html#logit-und-probit-implementierung-in-r"><i class="fa fa-check"></i><b>9.1.3</b> Logit und Probit: Implementierung in R</a></li>
<li class="chapter" data-level="9.1.4" data-path="nonlin.html"><a href="nonlin.html#logit-und-probit-interpretation-der-ergebnisse"><i class="fa fa-check"></i><b>9.1.4</b> Logit und Probit: Interpretation der Ergebnisse</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="markdown.html"><a href="markdown.html"><i class="fa fa-check"></i><b>10</b> Eine kurze Einführung in R Markdown</a><ul>
<li class="chapter" data-level="10.1" data-path="markdown.html"><a href="markdown.html#markdown-vs.r-markdown"><i class="fa fa-check"></i><b>10.1</b> Markdown vs. R-Markdown</a></li>
<li class="chapter" data-level="10.2" data-path="markdown.html"><a href="markdown.html#installation-von-r-markdown"><i class="fa fa-check"></i><b>10.2</b> Installation von R-Markdown</a></li>
<li class="chapter" data-level="10.3" data-path="markdown.html"><a href="markdown.html#der-r-markdown-workflow"><i class="fa fa-check"></i><b>10.3</b> Der R-Markdown Workflow</a><ul>
<li class="chapter" data-level="10.3.1" data-path="markdown.html"><a href="markdown.html#ein-neues-r-markdown-dokument-erstellen"><i class="fa fa-check"></i><b>10.3.1</b> Ein neues R-Markdown Dokument erstellen</a></li>
<li class="chapter" data-level="10.3.2" data-path="markdown.html"><a href="markdown.html#der-titelblock"><i class="fa fa-check"></i><b>10.3.2</b> Der Titelblock</a></li>
<li class="chapter" data-level="10.3.3" data-path="markdown.html"><a href="markdown.html#der-textkörper"><i class="fa fa-check"></i><b>10.3.3</b> Der Textkörper</a></li>
<li class="chapter" data-level="10.3.4" data-path="markdown.html"><a href="markdown.html#kompillieren-von-dokumenten"><i class="fa fa-check"></i><b>10.3.4</b> Kompillieren von Dokumenten</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="markdown.html"><a href="markdown.html#relative-pfade-in-markdown-dokumenten"><i class="fa fa-check"></i><b>10.4</b> Relative Pfade in Markdown-Dokumenten</a></li>
<li class="chapter" data-level="10.5" data-path="markdown.html"><a href="markdown.html#weitere-quellen"><i class="fa fa-check"></i><b>10.5</b> Weitere Quellen</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R für die sozio-ökonomische Forschung</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="basics" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Erste Schritte in R</h1>
<p>Nach den (wichtigen) Vorbereitungsschritten im vorangehenden Kapitel
wollen wir an dieser Stelle mit dem eigentlichen Programmieren anfangen.
Zu diesem Zweck müssen wir uns mit der Syntax von R vertraut machen,
also mit den Regeln, denen wir folgen müssen, wenn wir Code schreiben, damit der
Computer versteht, was wir ihm eigentlich in R sagen wollen.</p>
<p>Das Kapitel ist dabei folgendermaßen aufgebaut:
zunächst lernen wir in Abschnitt <a href="basics.html#es:befehle">3.1</a> wie wir mit Hilfe von R und
R-Studio mit unserem Computer ‘kommunizieren’ können.
Danach lernen wir in Abschnitt <a href="basics.html#es:objekte">3.2</a> nicht nur die zentralen Elemente
der Programmiersprache R kennen, nämlich Objekte und Funktionen, sondern
lernen auch wie wir solche Objekte erstellen und ihnen Namen zuweisen können.
Ein großer Teil des Kapitels (Abschnitt <a href="basics.html#es:objektarten">3.3</a>) ist dann den
unterschiedlichen Arten von Objekten in R gewidmet. Wir lernen zum Beispiel
wie sich Vektoren von Listen unterscheiden, und welche Pendants in R es zu
‘Zahlen’ und ‘Wörtern’ in unserer Alltagssprache gibt.
Abgeschlossen wir das Kapitel mit einer kurzen Einführung von ‘Paketen’ in
Abschnitt <a href="basics.html#es:pakete">3.4</a>.
Pakete sind ein wichtiger Bestandteil der Open-Source Sprache R:
hier handelt es sich um Code, den andere Menschen geschrieben und der
Allgemeinheit frei zugänglich gemacht haben.
Dadurch ist sichergestellt, dass R immer auf dem neuesten Stand der
Forschung und Praxis ist.</p>
<div id="es:befehle" class="section level2">
<h2><span class="header-section-number">3.1</span> Befehle in R an den Computer übermitteln</h2>
<p>Grundsätzlich können wir über R Studio auf zwei Arten mit dem Computer
“kommunizieren”: über die Konsole direkt, oder indem wir im Skriptbereich ein
Skript schreiben und dies dann ausführen.</p>
<p>Als Beispiel für die erste Möglichkeit wollen wir mit Hilfe von R die Zahlen
<code>2</code> und <code>5</code> miteinander addieren.
Zu diesem Zweck können wir einfach <code>2 + 2</code> in die Konsole eingeben, und den
Befehl mit ‘Enter’ an den Computer senden.
Da es sich beim Ausdruck <code>2 + 3</code> um korrekten R Code handelt, ‘versteht’ der
Computer was wir von ihm wollen und gibt uns das entsprechende Ergebnis aus:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span></a></code></pre></div>
<pre><code>#&gt; [1] 5</code></pre>
<p>Die Zeichenkombination <code>#&gt;</code> am Beginn der Zeile zeigt an, dass es sich bei
dieser Zeile um den Output eines R-Befehlt handelt. Das kann bei Ihrem
Computer durchaus anders aussehen.
Das Ergebnis von <code>2+3</code> ist eine Zahl (genauer: ein ‘Skalar’).
In R werden Skalare immer als Vektor der Länge 1 dargestellt.
Die <code>[1]</code> gibt also an, dass hier ein Vektor der Länge 1 angezeigt wird.
Wäre das Ergebnis unserer Berechnung ein Vektor der Länge 2 würde die
Outputzeile dementsprechend mit <code>#&gt; [2]</code> eingeleitet werden.</p>
<p>Auf diese Art und Weise können wir R als einfachen Taschenrechner verwenden,
denn für alle einfachen mathematischen Operationen können wir bestimmte Symbole
als Operatoren verwenden.
An dieser Stelle sei noch darauf hingewiesen, dass das Symbol <code>#</code> in R einen
Kommentar einleitet, das heißt alles was in einer Zeile nach <code>#</code> steht wird
vom Computer ignoriert und man kann sich an dieser Stelle Notizen im Code machen.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span> <span class="co"># Addition</span></a></code></pre></div>
<pre><code>#&gt; [1] 4</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="dv">2</span><span class="op">/</span><span class="dv">2</span> <span class="co"># Division</span></a></code></pre></div>
<pre><code>#&gt; [1] 1</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="dv">4</span><span class="op">*</span><span class="dv">2</span> <span class="co"># Multiplikation</span></a></code></pre></div>
<pre><code>#&gt; [1] 8</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="dv">3</span><span class="op">**</span><span class="dv">2</span> <span class="co"># Potenzierung</span></a></code></pre></div>
<pre><code>#&gt; [1] 9</code></pre>
<p>Alternativ können wir die Befehle in einem Skript aufschreiben, und dieses Skript
dann ausführen. Während die Interaktion über die Konsole sinnvoll ist um die
Effekte bestimmter Befehle auszuprobieren, bietet sich die Verwendung von
Skripten an, wenn wir mit den Befehlen später weiter arbeiten wollen, oder sie
anderen Menschen zugänglich zu machen. Denn das Skript können wir als Datei auf
unserem Computer speichern, vorzugsweise im Unterordner <code>R</code> unseres R-Projekts
(siehe Abschnitt <a href="einrichtung.html#unterordner">Relevante Unterordner erstellen</a>), und dann
später weiterverwenden.</p>
<p>Die Berechnungen, die wir bislang durchgeführt haben sind zugegebenermaßen nicht
sonderlich spannend.
Um fortgeschrittene Operationen in R durchführen und verstehen zu können müssen
wir uns zunächst mit den Konzepten von <strong>Objekten</strong>, <strong>Funktionen</strong> und
<strong>Zuweisungen</strong> beschäftigen.</p>
</div>
<div id="es:objekte" class="section level2">
<h2><span class="header-section-number">3.2</span> Objekte, Funktionen und Zuweisungen</h2>
<blockquote>
To understand computations in R, two slogans are helpful:
Everything that exists is an object.
Everything that happens is a function call.
<footer>
— John Chambers
</footer>
</blockquote>
<p>Mit der Aussage ‘Alles in R ist ein Objekt’ ist gemeint, dass jede Zahl, jede
Funktion, oder jeder Buchstabe in R ein Objekt ist, das irgendwo auf dem
Speicher Ihres Rechners abgespeichert ist.</p>
<p>In der Berechnung <code>2 + 3</code> ist die Zahl <code>2</code> genauso ein Objekt wie die Zahl <code>3</code>
und die Additionsfunktion, die durch den Operator <code>+</code> aufgerufen wird.</p>
<p>Mit der Aussage ‘Alles was in R passiert ist ein Funktionsaufruf’ ist gemeint,
dass wir R eine Berechnung durchführen lassen indem wir eine Funktion aufrufen.</p>
<p><strong>Funktionen</strong> sind Algorithmen, die bestimmte Routinen auf einen <em>Input</em>
anwenden und dabei einen <em>Output</em> produzieren.
Die Additionsfunktion, die wir in der Berechnung <code>2 + 3</code> aufgerufen haben hat
als Input die beiden Zahlen <code>2</code> und <code>3</code> aufgenommen, hat auf sie die Routine
der Addition angewandt und als Output die Zahl <code>5</code> ausgegeben.
Der Output <code>5</code> ist dabei in R genauso ein Objekt wie die Inputs <code>2</code> und <code>3</code>,
sowie die Funktion <code>+</code>.</p>
<p>Ein ‘Problem’ ist, dass R im vorliegenden Fall den Output der Berechnung
zwar ausgibt, wir danach aber keinen Zugriff darauf mehr haben:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span></a></code></pre></div>
<pre><code>#&gt; [1] 5</code></pre>
<p>Falls wir den Output weiterverwenden wollen, macht es Sinn, dem Output Objekt
einen Namen zu geben, damit wir später wieder darauf zugreifen können.
Der Prozess einem Objekt einen Namen zu geben wird <strong>Zuweisung</strong> oder
<strong>Assignment</strong> genannt und durch die Funktion <code>assign</code> vorgenommen:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw">assign</span>(<span class="st">&quot;zwischenergebnis&quot;</span>, <span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>)</a></code></pre></div>
<p>Wir können nun das Ergebnis der Berechnung <code>2 + 3</code> aufrufen, indem wir in R
den Namen des Output Objekts eingeben:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">zwischenergebnis</a></code></pre></div>
<pre><code>#&gt; [1] 5</code></pre>
<p>Da Zuweisungen so eine große Rolle spielen und sehr häufig vorkommen gibt es
auch für die Funktion <code>assign</code> eine Kurzschreibweise, nämlich <code>&lt;-</code>.
Entsprechend sind die folgenden beiden Befehle äquivalent:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="kw">assign</span>(<span class="st">&quot;zwischenergebnis&quot;</span>, <span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb28-2" data-line-number="2">zwischenergebnis &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span></a></code></pre></div>
<p>Daher werden wir Zuweisungen immer mit dem <code>&lt;-</code> Operator durchführen.<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a></p>
<p>Wir können in R nicht beliebig Namen vergeben.
Gültige (also: syntaktisch korrekte) Namen</p>
<ul>
<li>enthalten nur Buchstaben, Zahlen und die Symbole <code>.</code> und <code>_</code></li>
<li>fangen nicht mit <code>.</code> oder einer Zahl an!</li>
</ul>
<p>Zudem gibt es einige Wörter, die schlicht nicht als Name verwendet werden
dürfen, z.B. <code>function</code>, <code>TRUE</code>, oder <code>if</code>. Die gesamte Liste verbotener Worte
kann mit dem Befehl <code>?Reserved</code> ausgegeben werden.</p>
<p>Wenn man einen Namen vergeben möchte, der nicht mit den gerade formulierten
Regeln kompatibel ist, gibt R eine Fehlermeldung aus:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="ot">TRUE</span> &lt;-<span class="st"> </span><span class="dv">5</span></a></code></pre></div>
<pre><code>#&gt; Error in TRUE &lt;- 5: invalid (do_set) left-hand side to assignment</code></pre>
<p>Zudem sollte man Folgendes beachten:</p>
<ul>
<li>Namen sollten kurz und informativ sein; entsprechend ist <code>sample_mean</code> ein
guter Name, <code>vector_2</code> dagegen eher weniger</li>
<li>Man sollte <strong>nie Umlaute in Namen verwenden</strong></li>
<li>R ist <em>case sensitive</em>, d.h. <code>mean_value</code> ist ein anderer Name als <code>Mean_Value</code></li>
<li>Auch wenn möglich, sollte man nie von R bereit gestellte Funktionen
überschreiben. Eine Zuweisung wie <code>assign &lt;- 2</code> ist zwar möglich, führt
in der Regel aber zu großem Unglück, weil man nicht mehr ganz einfach auf die
zugrundeliegende Funktion zurückgreifen kann.</li>
</ul>
<blockquote>
<p><strong>Hinweis</strong>: Alle aktuellen Namenszuweisungen sind im Bereich <code>Environment</code>
in R Studio (Nr. 4 in Abbildung <a href="einrichtung.html#fig:folder">2.4</a> oben) aufgelistet und können
durch die Funktion <code>ls()</code> angezeigt werden.</p>
</blockquote>
<blockquote>
<p><strong>Hinweis</strong>: Ein Objekt kann mehrere Namen haben, aber kein Name kann zu
mehreren Objekten zeigen, da im Zweifel eine neue Zuweisung die alte
Zuweisung überschreibt:</p>
</blockquote>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">2</span> </a>
<a class="sourceLine" id="cb31-2" data-line-number="2">y &lt;-<span class="st"> </span><span class="dv">2</span> <span class="co"># Das Objekt 2 hat nun zwei Namen</span></a>
<a class="sourceLine" id="cb31-3" data-line-number="3"><span class="kw">print</span>(x)</a></code></pre></div>
<pre><code>#&gt; [1] 2</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="kw">print</span>(y)</a></code></pre></div>
<pre><code>#&gt; [1] 2</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">4</span> <span class="co"># Der Name &#39;x&#39; zeigt nun zum Objekt &#39;4&#39;, nicht mehr zu &#39;2&#39;</span></a>
<a class="sourceLine" id="cb35-2" data-line-number="2"><span class="kw">print</span>(x)</a></code></pre></div>
<pre><code>#&gt; [1] 4</code></pre>
<blockquote>
<p><strong>Hinweis</strong>: Wie Sie vielleicht bereits bemerkt haben wird nach einer
Zuweisung kein Wert sichtbar ausgegeben:</p>
</blockquote>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1"><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span> <span class="co"># Keine Zuweisung, R gibt das Ergebnis in der Konsole aus</span></a></code></pre></div>
<pre><code>#&gt; [1] 4</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span> <span class="co"># Zuweisung, R gibt das Ergebnis in der Konsole nicht aus</span></a></code></pre></div>
<p>An dieser Stelle wollen wir das bisher Gelernte kurz zusammenfassen:</p>
<ul>
<li>Wir können Befehle in R Studio an den Computer übermitteln indem wir (a) den
R Code in die Konsole schreiben und Enter drücken oder (b) den Code in ein
Skript schreiben und dann ausführen</li>
<li>Alles was in R <em>existiert</em> ist ein Objekt, alles was in R <em>passiert</em> ist ein
Funktionsaufruf</li>
<li>Wir können einem Objekt mit Hilfe von <code>&lt;-</code> einen Namen geben und dann später
wieder aufrufen. Den Prozess der Namensgebung nennen wir <strong>Assignment</strong> und wir
können uns alle aktuell von uns vergebenen Namen mit der Funktion <code>ls()</code>
anzeigen lassen</li>
<li>Eine Funktion ist ein Objekt, das auf einen Input eine bestimmte Routine
anwendet und einen Output produziert</li>
</ul>
<p>An dieser Stelle sei noch auf die Hilfefunktion <code>help()</code> hingewiesen.
Über diese können Sie weitere Informationen über ein Objekt bekommen. Wenn Sie
z.B. genauere Informationen über die Verwendung der Funktion <code>assign</code> erhalten
wollen, können Sie Folgendes eingeben:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1"><span class="kw">help</span>(assign)</a></code></pre></div>
</div>
<div id="es:objektarten" class="section level2">
<h2><span class="header-section-number">3.3</span> Grundlegende Objeke in R</h2>
<p>Wir haben bereits gelernt, dass alles was in R existiert ein Objekt ist.
Wir haben aber auch schon gelernt, dass es unterschiedliche Typen von Objekten
gibt: Zahlen, wie <code>2</code> oder <code>3</code> und Funktionen wie <code>assign</code>.<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a>
Tatsächlich gibt es noch viel mehr Arten von Objekten.
Ein gutes Verständnis der Objektarten ist Grundvoraussetzung um später
anspruchsvolle Programmieraufgaben zu lösen.
Daher wollen wir uns im Folgenden mit den wichtigsten Objektarten in R
auseinandersetzen.</p>
<div id="funktionen" class="section level3">
<h3><span class="header-section-number">3.3.1</span> Funktionen</h3>
<p>Wie oben bereits kurz erwähnt handelt es sich bei Funktionen um Algorithmen,
die bestimmte Routinen auf einen <em>Input</em> anwenden und dabei einen <em>Output</em>
produzieren.</p>
<p>Die Funktion <code>log()</code> zum Beispiel nimmt als Input eine Zahl und gibt als
Output den Logarithmus dieser Zahl aus:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1"><span class="kw">log</span>(<span class="dv">2</span>)</a></code></pre></div>
<pre><code>#&gt; [1] 0.6931472</code></pre>
<p><strong>Eine Funktion aufrufen</strong></p>
<p>In R gibt es prinzipiell vier verschiedene Arten Funktionen aufzurufen.
Nur zwei davon sind allerdings aktuell für uns relevant.</p>
<p>Die bei weitem wichtigste Variante ist die so genannte <em>Prefix-Form</em>.
Dies ist die Form, die wir bei der überwältigenden Anzahl von Funktionen
verwenden werden.
Wir schreiben hier zunächst den Namen der Funktion (im Folgenden Beispiel
<code>assign</code>), dann in Klammern und mit Kommata getrennt die Argumente der Funktion
(hier der Name <code>test</code> und die Zahl <code>2</code>):</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1"><span class="kw">assign</span>(<span class="st">&quot;test&quot;</span>, <span class="dv">2</span>)</a></code></pre></div>
<p>Eine hin und wieder auftretende Form ist die sogenannte <em>Infix-Form</em>.
Hier wird der Funktionsname zwischen die Argumente geschrieben.
Dies ist, wie wir oben bereits bemerkt haben, bei vielen mathematischen
Funktionen wie <code>+</code>, <code>-</code> oder <code>/</code> der Fall.
Streng genommen ist die Infix-Form aber nur eine <em>Abkürzung</em>, denn jeder
Funktionsaufruf in Infix-Form kann auch in Prefix-Form geschrieben werden, wie
folgendes Beispiel zeigt:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1"><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span></a></code></pre></div>
<pre><code>#&gt; [1] 5</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1"><span class="st">`</span><span class="dt">+</span><span class="st">`</span>(<span class="dv">2</span>,<span class="dv">3</span>)</a></code></pre></div>
<pre><code>#&gt; [1] 5</code></pre>
<p><strong>Die Argumente einer Funktion</strong></p>
<p>Die Argumente einer Funktion stellen zum einen den <em>Input</em> für die in der
Funktion implementierte Routine dar.</p>
<p>Die Funktion <code>sum</code> zum Beispiel nimmt als Argumente eine beliebige Anzahl an
Zahlen (ihr ‘Input’) und berechnet die Summe dieser Zahlen:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1"><span class="kw">sum</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)</a></code></pre></div>
<pre><code>#&gt; [1] 10</code></pre>
<p>Darüber hinaus akzeptiert <code>sum()</code> noch ein <em>optionales Argument</em>, <code>na.rm</code>,
welches entweder den Wert <code>TRUE</code> oder <code>FALSE</code> annehmen kann. Die Buchstaben <code>na</code>
stehen hier für “not available”, und bezeichnen fehlende Werte. Wenn wir das
Argument nicht explizit spezifizieren nimmt es automatisch <code>FALSE</code>
als den Standardwert an.</p>
<p>Dieses optionale Argument ist kein klassischer Input, sondern kontrolliert das
genaue Verhalten der Funktion. Wenn <code>na.rm</code> den Wert <code>TRUE</code> hat, dann werden im
Falle von <code>sum()</code> die fehlende Werte, also die <code>NA</code>, ignoriert bevor die Summe
der Inputs gebildet wird:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1"><span class="kw">sum</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="ot">NA</span>) </a></code></pre></div>
<pre><code>#&gt; [1] NA</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1"><span class="kw">sum</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="ot">NA</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) </a></code></pre></div>
<pre><code>#&gt; [1] 10</code></pre>
<p>Wenn wir wissen wollen, welche Argumente eine Funktion akzeptiert, ist es immer
eine gute Idee über die Funktion <code>help()</code> einen Blick in die Dokumentation zu
werfen!</p>
<p>Im Falle von <code>sum()</code> sehen wir hier sofort, dass die Funktion neben den zu
addierenden Zahlen ein optionales Argument <code>na.rm</code> akzeptiert, welches den
Standardwert <code>FALSE</code> annimmt.</p>
<p><strong>Eigene Funktionen definieren</strong></p>
<p>Sehr häufig möchten wir selbst Funktionen definieren.
Das können wir mit dem reservierten Keyword <code>function</code> machen.
Als Beispiel wollen wir eine Funktion <code>pythagoras</code> definieren, die als Argumente
die Seitenlängen der Katheten eines rechtwinkligen Dreiecks annimmt und über den
<a href="https://de.wikipedia.org/wiki/Satz_des_Pythagoras">Satz des Pythagoras</a>
die Länge der Hypothenuse bestimmt:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1">pythagoras &lt;-<span class="st"> </span><span class="cf">function</span>(kathete_<span class="dv">1</span>, kathete_<span class="dv">2</span>){</a>
<a class="sourceLine" id="cb54-2" data-line-number="2">  hypo_quadrat &lt;-<span class="st"> </span>kathete_<span class="dv">1</span><span class="op">**</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>kathete_<span class="dv">2</span><span class="op">**</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb54-3" data-line-number="3">  hypothenuse &lt;-<span class="st"> </span><span class="kw">sqrt</span>(hypo_quadrat) <span class="co"># sqrt() zieht die Quadratwurzel</span></a>
<a class="sourceLine" id="cb54-4" data-line-number="4">  <span class="kw">return</span>(hypothenuse)</a>
<a class="sourceLine" id="cb54-5" data-line-number="5">}</a></code></pre></div>
<p>Wir definieren eine Funktion durch die Funktion <code>function()</code>.
In der Regel beginnen wir die Definition indem wir die zu erstellende Funktion
mit einem Namen assoziieren (hier: ‘pythagoras’) damit wir sie später auch
verwenden können.</p>
<p>Die Argumente für <code>function</code> sind dann die Argumente, welche die zu definierende
Funktion annehmen soll, in diesem Fall <code>kathete_1</code> und <code>kathete_2</code>.
Danach beginnen wir den ‘function body’, also den Code für die Routine, welche
die Funktion ausführen soll, mit einer geschweiften Klammer.</p>
<p>Innerhalb des <em>function bodies</em> wird dann die entsprechende Routine implementiert.
Im vorliegenden Beispiel definieren wir zunächst die Summe der Werte von
<code>kathete_1</code> und <code>kathete_2</code> als ein Zwischenergebnis, welches hier <code>hypo_quadrat</code>
genannt wird.
Dies ist der häufig unter <span class="math inline">\(c^2=a^2 + b^2\)</span> bekannte Teil des Satz von Pythagoras.
Da wir an der ‘normalen’ Länge der Hypothenuse interesssiert sind, ziehen wir
mit der Funktion <code>sqrt()</code> noch die Wurzel von <code>hypo_quadrat</code>, und geben dem
resultierenden Objekt den Namen <code>hypothenuse</code>, welches in der letzten Zeile
mit Hilfe des Keywords <code>return</code> als der Wert definiert wird, den die Funktion
als Output ausgibt.<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a></p>
<p>Am Ende der Routine kann man mit dem Keyword <code>return</code> explizit machen welchen
Wert die Funktion als Output ausgeben soll.
Wenn wir die Funktion nun aufrufen wird die oben definierte Routine ausgeführt:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" data-line-number="1"><span class="kw">pythagoras</span>(<span class="dv">2</span>, <span class="dv">4</span>)</a></code></pre></div>
<pre><code>#&gt; [1] 4.472136</code></pre>
<p>Beachten Sie, dass alle Objektnamen, die innerhalb des <em>function bodies</em> verwendet
werden, nach dem Funktionsaufruf verloren gehen, weil Funktionen
ihr eigenes <a href="https://adv-r.hadley.nz/environments.html">environment</a> haben.
Deswegen kommt es im vorliegenden Falle zu einem Fehler, da <code>hypo_quadrat</code> nur
innerhalb des <em>function bodies</em> existiert:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" data-line-number="1">pythagoras &lt;-<span class="st"> </span><span class="cf">function</span>(kathete_<span class="dv">1</span>, kathete_<span class="dv">2</span>){</a>
<a class="sourceLine" id="cb57-2" data-line-number="2">  hypo_quadrat &lt;-<span class="st"> </span>kathete_<span class="dv">1</span><span class="op">**</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>kathete_<span class="dv">2</span><span class="op">**</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb57-3" data-line-number="3">  hypothenuse &lt;-<span class="st"> </span><span class="kw">sqrt</span>(hypo_quadrat) <span class="co"># sqrt() zieht die Quadratwurzel</span></a>
<a class="sourceLine" id="cb57-4" data-line-number="4">  <span class="kw">return</span>(hypothenuse)</a>
<a class="sourceLine" id="cb57-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb57-6" data-line-number="6">x &lt;-<span class="st"> </span><span class="kw">pythagoras</span>(<span class="dv">2</span>, <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb57-7" data-line-number="7">hypo_quadrat</a></code></pre></div>
<pre><code>#&gt; Error in eval(expr, envir, enclos): object &#39;hypo_quadrat&#39; not found</code></pre>
<p>Es ist immer eine gute Idee, die selbst definierten Funktionen zu
dokumentieren - nicht nur wenn wir sie auch anderen zur Verfügung stellen wollen,
sondern auch damit wir selbst nach einer möglichen Pause unseren Code noch gut
verstehen können. Nichts ist frustrierender als nach einer mehrwöchigen Pause
viele Stunden investieren zu müssen, den eigens programmierten Code zu
entschlüsseln!</p>
<p>Die Dokumentation von Funktionen kann mit Hilfe von einfachen Kommentaren
erfolgen, ich empfehle jedoch sofort sich die
<a href="https://r-pkgs.org/man.html#man-functions">hier beschriebenen Konventionen</a>
anzugewöhnen. In diesem Falle würde eine Dokumentation unserer Funktion <code>pythagoras</code>
folgendermaßen aussehen:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" data-line-number="1"><span class="co">#&#39; Berechne die Länge der Hypothenuse in einem rechtwinkligen Dreieck</span></a>
<a class="sourceLine" id="cb59-2" data-line-number="2"><span class="co">#&#39; </span></a>
<a class="sourceLine" id="cb59-3" data-line-number="3"><span class="co">#&#39; Diese Funktion nimmt als Argumente die Längen der beiden Katheten eines</span></a>
<a class="sourceLine" id="cb59-4" data-line-number="4"><span class="co">#&#39;  rechtwinkligen Dreiecks und berechnet daraus die Länge der Hypothenuse.</span></a>
<a class="sourceLine" id="cb59-5" data-line-number="5"><span class="co">#&#39; @param kathete_1 Die Länge der ersten Kathete</span></a>
<a class="sourceLine" id="cb59-6" data-line-number="6"><span class="co">#&#39; @param kathete_2 Die Länge der zweiten Kathete</span></a>
<a class="sourceLine" id="cb59-7" data-line-number="7"><span class="co">#&#39; @return Die Länge der Hypothenuse des durch a und b definierten </span></a>
<a class="sourceLine" id="cb59-8" data-line-number="8"><span class="co">#&#39;  rechtwinkligen Dreieckst</span></a>
<a class="sourceLine" id="cb59-9" data-line-number="9">pythagoras &lt;-<span class="st"> </span><span class="cf">function</span>(kathete_<span class="dv">1</span>, kathete_<span class="dv">2</span>){</a>
<a class="sourceLine" id="cb59-10" data-line-number="10">  hypo_quadrat &lt;-<span class="st"> </span>kathete_<span class="dv">1</span><span class="op">**</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>kathete_<span class="dv">2</span><span class="op">**</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb59-11" data-line-number="11">  hypothenuse &lt;-<span class="st"> </span><span class="kw">sqrt</span>(hypo_quadrat) <span class="co"># sqrt() zieht die Quadratwurzel</span></a>
<a class="sourceLine" id="cb59-12" data-line-number="12">  <span class="kw">return</span>(hypothenuse)</a>
<a class="sourceLine" id="cb59-13" data-line-number="13">}</a></code></pre></div>
<p>Die Dokumentation wird also direkt vor die Definition der Funktion gesetzt.
In der ersten Zeile gibt man der Funktion einen maximal einzeiligen Titel, der
nicht länger als 80 Zeichen sein sollte und die Funktion prägnant beschreibt.</p>
<p>Dann, nach einer Leerzeile wird genauer beschrieben was die Funktion macht.
Danach werden die Argumente der Funktion beschrieben. Für jedes Argument
beginnen wir die Reihe mit <code>@param</code>, gefolgt von dem Namen des Arguments und
dann einer kurzen Beschreibung.</p>
<p>Nach den Argumenten beschreiben wir noch kurz was der Output der Funktion ist.
Diese Zeile wird mit <code>@return</code> begonnen.</p>
<p>Die Dokumentation einer Funktion sollte also zumindest die Parameter und die
Art des Outputs erklären.</p>
<p><strong>Gründe für die Verwendung eigener Funktionen</strong></p>
<p>Eigene Funktionen zu definieren ist in der Praxis extrem hilfreich und es
ist empfehlenswert Routinen, die mehrere Male verwendet werden grundsätzlich als
Funktionen zu schreiben. Dafür gibt es mehrere Gründe:</p>
<ol style="list-style-type: decimal">
<li><strong>Der Code wird kürzer und transparenter.</strong> Zwar ist kurzer Code nicht
notwendigerweise leichter zu verstehen als langer, aber Funktionen können
besonders gut dokumentiert werden (am besten indem man den hier beschriebenen
Konventionen folgt).</li>
<li><strong>Funktionen bieten Struktur.</strong> Funktionen fassen in der Regel Ihre Vorstellung
davon zusammen, wie ein bestimmtes Problem zu lösen ist. Da man sich diese
Gedanken nicht ständig neu machen möchte ist es sinnvoll sie einmalig in einer
Funktion zusammenzufassen.</li>
<li><strong>Funktionen erleichtern Korrekturen.</strong> Wenn Sie merken, dass Sie in der
Implementierung einer Routine einen Fehler gemacht haben müssen Sie im besten
Falle nur einmal die Definition der Funktion korrigieren - im schlimmsten Falle
müssen Sie in Ihrem Code nach der Routine suchen und sie in jedem einzelnen
Anwendungsfall erneut korrigieren.</li>
</ol>
<p>Es gibt noch viele weitere Gründe dafür, Funktionen häufig zu verwenden. Viele
hängen mit dem Entwicklerprinzip
<a href="https://de.wikipedia.org/wiki/Don%E2%80%99t_repeat_yourself">DRY</a>
(“Don’t Repeat Yourself”) zusammen.</p>
</div>
<div id="basics-types-vectors" class="section level3">
<h3><span class="header-section-number">3.3.2</span> Vektoren</h3>
<p>Vektoren sind einer der wichtigsten Objektypen in R.
Quasi alle Daten mit denen wir in R arbeiten werden als Vektoren behandelt.</p>
<p>Was Vektoren angeht gibt es wiederum die wichtige
<strong>Unterscheidung von atomaren Vektoren und Listen</strong>.
Beide bestehen ihrerseits aus Objekten und sie unterscheiden sich dadurch, dass
atomare Vektoren nur aus Objekten des gleichen Typs bestehen können, Listen
dagegen auch Objekte unterschiedlichen Typs beinhalten können.</p>
<p>Entsprechend kann jeder atomare Vektor einem Typ zugeordnet werden, je nachdem
welchen Typ seine Bestandteile haben.
Hier sind insbesondere vier Typen relevant:</p>
<ul>
<li><code>logical</code> (logische Werte): es gibt zwei logische Werte, <code>TRUE</code> und <code>FALSE</code>,
welche auch mit <code>T</code> oder <code>F</code> abgekürzt werden können</li>
<li><code>integer</code> (ganze Zahlen): das sollte im Prinzip selbsterklärend sein,
allerding muss den ganzen Zahlen in R immer der Buchstabe <code>L</code> folgen, damit
die Zahl tatsächlich als ganze Zahl interpretiert wird.<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a> Beispiele sind
<code>1L</code>, <code>400L</code> oder <code>10L</code>.<br />
</li>
<li><code>double</code> (Dezimalzahlen): auch das sollte selbsterklärend sein; Beispiele wären
<code>1.5</code>, <code>0.0</code>, oder <code>-500.32</code>.</li>
<li>Ganze Zahlen und Dezimalzahlen werden häufig unter der Kategorie <code>numeric</code>
zusammengefasst. Dies ist in der Praxis aber quasi nie hilfreich und man sollte
diese Kategorie möglichst nie verwenden.</li>
<li>Wörter (<code>character</code>): sie sind dadurch gekennzeichnet, dass sie auch
Buchstaben enthalten können und am Anfang und Ende ein <code>&quot;</code> haben. Beispiele hier
wären <code>&quot;Hallo&quot;</code>, <code>&quot;500&quot;</code> oder <code>&quot;1_2_Drei&quot;</code>.</li>
<li>Es gibt noch zwei weitere besondere ‘Typen’, die strikt gesehen keine
atomaren Vektoren darstellen, allerdings in diesem Kontext schon häufig
auftauchen: <code>NULL</code>, was strikt genommen ein eigener Datentyp ist und immer
die Länge 0 hat, sowie <code>NA</code>, das einen fehlenden Wert darstellt.</li>
</ul>
<p>Hieraus ergibt sich die in Abbildung <a href="basics.html#fig:vektoren">3.1</a> aufgezeigte Aufteilung
von Vektoren.</p>
<div class="figure" style="text-align: center"><span id="fig:vektoren"></span>
<img src="figures/vector-classification.png" alt="Arten von Vektoren in R" width="80%" />
<p class="caption">
Figure 3.1: Arten von Vektoren in R
</p>
</div>
<p>Wir werden nun die einzelnen Typen genauer betrachten.
Vorher wollen wir jedoch noch die Funktion <code>typeof</code> einführen.
Sie hilft uns in der Praxis den Typ eines Objekts herauszufinden.
Dafür rufen wir einfach die Funktion <code>typeof</code> mit dem zu untersuchenden Objekt
oder dessen Namen auf:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1"><span class="kw">typeof</span>(2L)</a></code></pre></div>
<pre><code>#&gt; [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="fl">22.0</span></a>
<a class="sourceLine" id="cb62-2" data-line-number="2"><span class="kw">typeof</span>(x)</a></code></pre></div>
<pre><code>#&gt; [1] &quot;double&quot;</code></pre>
<p>Wir können auch explizit testen ob ein Objekt tatsächlich ein Objekt eines bestimmten Typs ist.
Die generelle Syntax hierfür ist: <code>is.*()</code>, also z.B.:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="fl">1.0</span></a>
<a class="sourceLine" id="cb64-2" data-line-number="2"><span class="kw">is.integer</span>(x)</a></code></pre></div>
<pre><code>#&gt; [1] FALSE</code></pre>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" data-line-number="1"><span class="kw">is.double</span>(x)</a></code></pre></div>
<pre><code>#&gt; [1] TRUE</code></pre>
<p>Diese Funktion gibt als Output also immer einen logischen Wert aus, je nachdem
ob die Inputs des entsprechenden Typs sind oder nicht.</p>
<p>Bestimmte Objekte können auch in einen anderen Typ transformiert werden.
Hier spricht man von <code>coercion</code> und die generelle Syntax hierfür ist:
<code>as.*()</code>, also z.B.:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" data-line-number="1">x &lt;-<span class="st"> &quot;2&quot;</span></a>
<a class="sourceLine" id="cb68-2" data-line-number="2"><span class="kw">print</span>(</a>
<a class="sourceLine" id="cb68-3" data-line-number="3">  <span class="kw">typeof</span>(x)</a>
<a class="sourceLine" id="cb68-4" data-line-number="4">)</a></code></pre></div>
<pre><code>#&gt; [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">as.double</span>(x)</a>
<a class="sourceLine" id="cb70-2" data-line-number="2"><span class="kw">print</span>(</a>
<a class="sourceLine" id="cb70-3" data-line-number="3">  <span class="kw">typeof</span>(x)</a>
<a class="sourceLine" id="cb70-4" data-line-number="4">)</a></code></pre></div>
<pre><code>#&gt; [1] &quot;double&quot;</code></pre>
<p>Allerdings ist eine Transformation nicht immer möglich:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" data-line-number="1"><span class="kw">as.double</span>(<span class="st">&quot;Hallo&quot;</span>)</a></code></pre></div>
<pre><code>#&gt; Warning: NAs introduced by coercion</code></pre>
<pre><code>#&gt; [1] NA</code></pre>
<p>Da R nicht weiß wie man aus dem Wort ‘Hallo’ eine Dezimalzahl machen soll,
transformiert R das Wort in einen ‘Fehlenden Wert’, der in R als <code>NA</code>
bekannt ist und unten noch genauer diskutiert wird.</p>
<p>Für die Grundtypen ergibt sich folgende logische Hierachie an trivialen
Transformationen: <code>logical</code> → <code>integer</code> → <code>double</code> → <code>character</code>,
d.h. man kann eine Dezimalzahl ohne Probleme in ein Wort transformieren,
aber nicht umgekehrt:</p>
<hr />
<blockquote>
<p><strong>Warum überhaupt transformieren?</strong></p>
<p>Für eine Programmiersprache sind Datentypen extrem wichtig, weil sonst unklar
bliebe wie mathematische Operationen auf unterschiedliche Objekte wie Zahlen
oder Wörter anzuwenden wären.
Selbst transformieren werden Sie Objekte vor allem wenn Sie eine bestimmte, nur
für eine bestimmte Objektart definierte Operation verwenden wollen und das
Objekt bislang als ein anderer Typ gespeichert ist.
Das kann zum Beispiel passieren wenn Sie Daten einlesen oder Wörter selbst in
Zahlenwerte übersetzen. Wenn in Ihrem Code unerwartete Fehler mit kryptischen
Fehlermeldungen auftauchen ist es immer eine gute Idee, erst einmal die Typen
der verwendeten Objekte zu checken und die Objekte ggf. zu transformieren.</p>
</blockquote>
<hr />
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb75-2" data-line-number="2">y &lt;-<span class="st"> </span><span class="kw">as.character</span>(x)</a>
<a class="sourceLine" id="cb75-3" data-line-number="3"><span class="kw">print</span>(y)</a></code></pre></div>
<pre><code>#&gt; [1] &quot;2&quot;</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" data-line-number="1">z &lt;-<span class="st"> </span><span class="kw">as.double</span>(y) <span class="co"># Das funktioniert</span></a>
<a class="sourceLine" id="cb77-2" data-line-number="2"><span class="kw">print</span>(z)</a></code></pre></div>
<pre><code>#&gt; [1] 2</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" data-line-number="1">k &lt;-<span class="st"> </span><span class="kw">as.double</span>(<span class="st">&quot;Hallo&quot;</span>) <span class="co"># Das nicht</span></a></code></pre></div>
<pre><code>#&gt; Warning: NAs introduced by coercion</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" data-line-number="1"><span class="kw">print</span>(k)</a></code></pre></div>
<pre><code>#&gt; [1] NA</code></pre>
<p>Bei der Transformation logischer Werte wird <code>TRUE</code> übrigens zu <code>1</code> und <code>FALSE</code>
zu <code>0</code>, eine Tatsache, die wir uns später noch zunutze machen werden:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb83-2" data-line-number="2"><span class="kw">as.integer</span>(x)</a></code></pre></div>
<pre><code>#&gt; [1] 1</code></pre>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb85-1" data-line-number="1">y &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb85-2" data-line-number="2"><span class="kw">as.integer</span>(y)</a></code></pre></div>
<pre><code>#&gt; [1] 0</code></pre>
<p>Da nicht immer ganz klar ist wann R bei Transformationen entgegen der gerade
eingeführten Hierachie eine Warnung ausgibt und wann nicht sollte man hier immer
besondere Vorsicht walten lassen!</p>
<p>Zudem ist bei jeder Transformation Vorsicht geboten, da sie häufig Eigenschaften
der Objekte implizit verändert.
So führt eine Transformation von einer Dezimalzahl hin zu einer ganzen Zahl
teils zu unerwartetem Rundungsverhalten:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb87-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="fl">1.99</span></a>
<a class="sourceLine" id="cb87-2" data-line-number="2"><span class="kw">as.integer</span>(x)</a></code></pre></div>
<pre><code>#&gt; [1] 1</code></pre>
<p>Auch führen Transformationen, die der eben genannten Hierachie zuwiderlaufen,
nicht zwangsweise zu Fehlern, sondern ‘lediglich’ zu unerwarteten Änderungen,
die in jedem Fall vermieden werden sollten:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb89-1" data-line-number="1">z &lt;-<span class="st"> </span><span class="kw">as.logical</span>(<span class="dv">99</span>)</a>
<a class="sourceLine" id="cb89-2" data-line-number="2"><span class="kw">print</span>(z)</a></code></pre></div>
<pre><code>#&gt; [1] TRUE</code></pre>
<p>Häufig transformieren Funktionen ihre Argumente automatisch, was meistens
hilfreich ist, manchmal aber auch gefährlich sein kann:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb91-1" data-line-number="1">x &lt;-<span class="st"> </span>1L <span class="co"># Integer</span></a>
<a class="sourceLine" id="cb91-2" data-line-number="2">y &lt;-<span class="st"> </span><span class="fl">2.0</span> <span class="co"># Double</span></a>
<a class="sourceLine" id="cb91-3" data-line-number="3">z &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span>y</a>
<a class="sourceLine" id="cb91-4" data-line-number="4"><span class="kw">typeof</span>(z)</a></code></pre></div>
<pre><code>#&gt; [1] &quot;double&quot;</code></pre>
<p>Bei einer Addition werden logische Werte ebenfalls automatisch transformiert:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb93-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb93-2" data-line-number="2">y &lt;-<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb93-3" data-line-number="3">z &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span>y <span class="co"># TRUE wird zu 1, FALSE zu 0</span></a>
<a class="sourceLine" id="cb93-4" data-line-number="4"><span class="kw">print</span>(z) </a></code></pre></div>
<pre><code>#&gt; [1] 1</code></pre>
<p>Daher sollte man immer den Überblick behalten, mit welchen Objekttypen man
gerade arbeitet.</p>
<p>Einen Überblick zu den Test- und Transformationsbefehlen finden Sie in
Tabelle <a href="basics.html#tab:artentests">3.1</a>.</p>
<table>
<caption><span id="tab:artentests">Table 3.1: </span> Ein Überblick zu Test- und Transformationsbefehlen in R.</caption>
<thead>
<tr class="header">
<th>Typ</th>
<th>Test</th>
<th>Transformation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>logical</td>
<td><code>is.logical</code></td>
<td><code>as.logical</code></td>
</tr>
<tr class="even">
<td>double</td>
<td><code>is.double</code></td>
<td><code>as.double</code></td>
</tr>
<tr class="odd">
<td>integer</td>
<td><code>is.integer</code></td>
<td><code>as.integer</code></td>
</tr>
<tr class="even">
<td>character</td>
<td><code>is.character</code></td>
<td><code>as.character</code></td>
</tr>
<tr class="odd">
<td>function</td>
<td><code>is.function</code></td>
<td><code>as.function</code></td>
</tr>
<tr class="even">
<td>NA</td>
<td><code>is.na</code></td>
<td>NA</td>
</tr>
<tr class="odd">
<td>NULL</td>
<td><code>is.null</code></td>
<td><code>as.null</code></td>
</tr>
</tbody>
</table>
<p>Ein letzter Hinweis zu <strong>Skalaren</strong>.
Unter Skalaren verstehen wir in der Regel ‘einzelne Zahlen’, z.B. <code>2</code>.
Dieses Konzept gibt es in R nicht.
<code>2</code> ist ein Vektor der Länge 1.
Wir unterscheiden also vom Typ her nicht zwischen einem Vektor, der nur ein oder
mehrere Elemente hat.</p>
<p><strong>Hinweis:</strong> Um längere Vektoren zu erstellen, verwenden wir die Funktion <code>c()</code>:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb95-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb95-2" data-line-number="2">x</a></code></pre></div>
<pre><code>#&gt; [1] 1 2 3</code></pre>
<p>Dabei können Vektoren auch miteinander verbunden werden:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb97-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span> <span class="co"># Shortcut für: x &lt;- c(1, 2, 3)</span></a>
<a class="sourceLine" id="cb97-2" data-line-number="2">y &lt;-<span class="st"> </span><span class="dv">4</span><span class="op">:</span><span class="dv">6</span></a>
<a class="sourceLine" id="cb97-3" data-line-number="3">z &lt;-<span class="st"> </span><span class="kw">c</span>(x, y)</a>
<a class="sourceLine" id="cb97-4" data-line-number="4">z</a></code></pre></div>
<pre><code>#&gt; [1] 1 2 3 4 5 6</code></pre>
<p>Da atomare Vektoren immer nur Objekte des gleichen Typs enthalten,
könnte man erwarten, dass es zu einem Fehler kommt, wenn wir Objete
unterschiedlichen Type kombinieren wollen:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb99-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="st">&quot;Hallo&quot;</span>)</a></code></pre></div>
<p>Tatsächlich transformiert R die Objekte allerdings nach der oben beschriebenen
Hierachie <code>logical</code> → <code>integer</code> → <code>double</code> → <code>character</code>.
Da hier keine Warnung oder kein Fehler ausgegeben wird, sind
derlei Transformationen eine gefährliche Fehlerquelle!</p>
<p><strong>Hinweis:</strong> Die Länge eines Vektors kann mit der Funktion <code>length</code> bestimmt
werden:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb100-1" data-line-number="1">x =<span class="st">  </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb100-2" data-line-number="2">len_x &lt;-<span class="st"> </span><span class="kw">length</span>(x)</a>
<a class="sourceLine" id="cb100-3" data-line-number="3">len_x</a></code></pre></div>
<pre><code>#&gt; [1] 3</code></pre>
</div>
<div id="basics-logic" class="section level3">
<h3><span class="header-section-number">3.3.3</span> Logische Werte (logical)</h3>
<p>Die logischen Werte <code>TRUE</code> und <code>FALSE</code> sind häufig das Ergebnis von logischen
Abfragen, z.B. ‘Ist 2 größer als 1?’.
Solche Abfragen kommen in der Forschungspraxis häufig vor und es macht Sinn,
sich mit den häufigsten logischen Operatoren vertraut zu machen.
Einen Überblick finden Sie in Tabelle <a href="basics.html#tab:logicaloperators">3.2</a>.</p>
<table>
<caption><span id="tab:logicaloperators">Table 3.2: </span> Zentrale logische Abfragen in R.</caption>
<thead>
<tr class="header">
<th align="center">Operator</th>
<th align="center">Funktion in R</th>
<th align="left">Beispiel</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">größer</td>
<td align="center"><code>&gt;</code></td>
<td align="left"><code>2&gt;1</code></td>
</tr>
<tr class="even">
<td align="center">kleiner</td>
<td align="center"><code>&lt;</code></td>
<td align="left"><code>2&lt;4</code></td>
</tr>
<tr class="odd">
<td align="center">gleich</td>
<td align="center"><code>==</code></td>
<td align="left"><code>4==3</code></td>
</tr>
<tr class="even">
<td align="center">größer gleich</td>
<td align="center"><code>&gt;=</code></td>
<td align="left"><code>8&gt;=8</code></td>
</tr>
<tr class="odd">
<td align="center">kleiner gleich</td>
<td align="center"><code>&lt;=</code></td>
<td align="left"><code>5&lt;=9</code></td>
</tr>
<tr class="even">
<td align="center">nicht gleich</td>
<td align="center"><code>!=</code></td>
<td align="left"><code>4!=5</code></td>
</tr>
<tr class="odd">
<td align="center">und</td>
<td align="center"><code>&amp;</code></td>
<td align="left"><code>x&lt;90 &amp; x&gt;55</code></td>
</tr>
<tr class="even">
<td align="center">oder</td>
<td align="center"><code>|</code></td>
<td align="left"><code>x&lt;90 | x&gt;55</code></td>
</tr>
<tr class="odd">
<td align="center">entweder oder</td>
<td align="center"><code>xor()</code></td>
<td align="left"><code>xor(2&lt;1, 2&gt;1)</code></td>
</tr>
<tr class="even">
<td align="center">nicht</td>
<td align="center"><code>!</code></td>
<td align="left"><code>!(x==2)</code></td>
</tr>
<tr class="odd">
<td align="center">ist wahr</td>
<td align="center"><code>isTRUE()</code></td>
<td align="left"><code>isTRUE(1&gt;2)</code></td>
</tr>
</tbody>
</table>
<p>Das Ergebnis eines solches Tests ist immer ein logischer Wert:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb102-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">4</span></a>
<a class="sourceLine" id="cb102-2" data-line-number="2">y &lt;-<span class="st"> </span>x <span class="op">==</span><span class="st"> </span><span class="dv">8</span></a>
<a class="sourceLine" id="cb102-3" data-line-number="3"><span class="kw">typeof</span>(y)</a></code></pre></div>
<pre><code>#&gt; [1] &quot;logical&quot;</code></pre>
<p>Es können auch längere Vektoren getestet werden:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb104-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span></a>
<a class="sourceLine" id="cb104-2" data-line-number="2">x<span class="op">&lt;</span><span class="dv">2</span></a></code></pre></div>
<pre><code>#&gt; [1]  TRUE FALSE FALSE</code></pre>
<p>Tests können beliebig miteinander verknüpft werden:</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb106-1" data-line-number="1">x &lt;-<span class="st"> </span>1L</a>
<a class="sourceLine" id="cb106-2" data-line-number="2">x<span class="op">&gt;</span><span class="dv">2</span> <span class="op">|</span><span class="st"> </span>x<span class="op">&lt;</span><span class="dv">2</span> <span class="op">&amp;</span><span class="st"> </span>(<span class="kw">is.double</span>(x) <span class="op">&amp;</span><span class="st"> </span>x<span class="op">!=</span><span class="dv">0</span>)</a></code></pre></div>
<pre><code>#&gt; [1] FALSE</code></pre>
<p>Da für viele mathematischen Operationen <code>TRUE</code> als die Zahl <code>1</code> interpretiert
wird, ist es einfach zu testen wie häufig eine bestimmte Bedingung erfüllt ist:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb108-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">50</span> </a>
<a class="sourceLine" id="cb108-2" data-line-number="2">smaller_<span class="dv">20</span> &lt;-<span class="st"> </span>x<span class="op">&lt;</span><span class="dv">20</span> </a>
<a class="sourceLine" id="cb108-3" data-line-number="3"><span class="kw">print</span>(</a>
<a class="sourceLine" id="cb108-4" data-line-number="4">  <span class="kw">sum</span>(smaller_<span class="dv">20</span>) <span class="co"># Wie viele Elemente sind kleiner als 20?</span></a>
<a class="sourceLine" id="cb108-5" data-line-number="5">  )</a></code></pre></div>
<pre><code>#&gt; [1] 19</code></pre>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb110-1" data-line-number="1"><span class="kw">print</span>(</a>
<a class="sourceLine" id="cb110-2" data-line-number="2">  <span class="kw">sum</span>(smaller_<span class="dv">20</span><span class="op">/</span><span class="kw">length</span>(x)) <span class="co"># Wie hoch ist der Anteil von diesen Elementen?</span></a>
<a class="sourceLine" id="cb110-3" data-line-number="3">)</a></code></pre></div>
<pre><code>#&gt; [1] 0.38</code></pre>
</div>
<div id="wörter-character" class="section level3">
<h3><span class="header-section-number">3.3.4</span> Wörter (character)</h3>
<p>Wörter werden in R dadurch gebildet, dass an ihrem Anfang und Ende das Symbol
<code>'</code> oder <code>&quot;</code> steht:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb112-1" data-line-number="1">x &lt;-<span class="st"> &quot;Hallo&quot;</span></a>
<a class="sourceLine" id="cb112-2" data-line-number="2"><span class="kw">typeof</span>(x)</a></code></pre></div>
<pre><code>#&gt; [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb114-1" data-line-number="1">y &lt;-<span class="st"> &#39;Auf Wiedersehen&#39;</span></a>
<a class="sourceLine" id="cb114-2" data-line-number="2"><span class="kw">typeof</span>(y)</a></code></pre></div>
<pre><code>#&gt; [1] &quot;character&quot;</code></pre>
<p>Wie andere Vektoren können sie mit der Funktion <code>c()</code> verbunden werden:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb116-1" data-line-number="1">z &lt;-<span class="st"> </span><span class="kw">c</span>(x, <span class="st">&quot;und&quot;</span>, y)</a>
<a class="sourceLine" id="cb116-2" data-line-number="2">z</a></code></pre></div>
<pre><code>#&gt; [1] &quot;Hallo&quot;           &quot;und&quot;             &quot;Auf Wiedersehen&quot;</code></pre>
<p>Nützlich ist in diesem Zusammenhang die Funktion <code>paste()</code>, die Elemente von
mehreren Vektoren in Wörter transformiert und verbindet:</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb118-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb118-2" data-line-number="2">y &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;Versuch Nr.&quot;</span>, x)</a>
<a class="sourceLine" id="cb118-3" data-line-number="3">y</a></code></pre></div>
<pre><code>#&gt;  [1] &quot;Versuch Nr. 1&quot;  &quot;Versuch Nr. 2&quot;  &quot;Versuch Nr. 3&quot;  &quot;Versuch Nr. 4&quot; 
#&gt;  [5] &quot;Versuch Nr. 5&quot;  &quot;Versuch Nr. 6&quot;  &quot;Versuch Nr. 7&quot;  &quot;Versuch Nr. 8&quot; 
#&gt;  [9] &quot;Versuch Nr. 9&quot;  &quot;Versuch Nr. 10&quot;</code></pre>
<p>Die Funktion <code>paste()</code> akzeptiert ein optionales Argument <code>sep</code>, mit dem wir
den Wert angeben können, der zwischen die zu verbindenden Elemente gesetzt wird
(der Default ist <code>sep=&quot; &quot;</code>):</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb120-1" data-line-number="1">tag_nr &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb120-2" data-line-number="2">x_axis &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;Tag&quot;</span>, tag_nr, <span class="dt">sep =</span> <span class="st">&quot;: &quot;</span>)</a>
<a class="sourceLine" id="cb120-3" data-line-number="3">x_axis</a></code></pre></div>
<pre><code>#&gt;  [1] &quot;Tag: 1&quot;  &quot;Tag: 2&quot;  &quot;Tag: 3&quot;  &quot;Tag: 4&quot;  &quot;Tag: 5&quot;  &quot;Tag: 6&quot;  &quot;Tag: 7&quot; 
#&gt;  [8] &quot;Tag: 8&quot;  &quot;Tag: 9&quot;  &quot;Tag: 10&quot;</code></pre>
<blockquote>
<p>Hinweis: Hier haben wir ein Beispiel für das sogenannte ‘Recycling’
gesehen: da der Vektor <code>c(&quot;Tag&quot;)</code> kürzer war als der Vektor <code>tag_nr</code> wird <code>c(&quot;Tag&quot;)</code>
einfach kopiert damit die Operation mit <code>paste()</code> Sinn ergibt. Recycling ist
oft praktisch, aber manchmal auch schädlich, nämlich dann, wenn man eigentlich
davon ausgeht eine Operation mit zwei gleich langen Vektoren durchzuführen, dies
aber tatsächlich nicht tut. In einem solchen Fall führt Recycling dazu, dass
keine Fehlermeldung ausgegeben wird. Ein Beispiel dafür gibt folgender Code, in
dem die Intention klar die Verbindung aller Wochentage zu Zahlen ist und einfach
ein Wochentag vergessen wurde:</p>
</blockquote>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb122-1" data-line-number="1">tage &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;Tag &quot;</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">7</span>, <span class="st">&quot;:&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;&quot;</span>)</a>
<a class="sourceLine" id="cb122-2" data-line-number="2">tag_namen &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Montag&quot;</span>, <span class="st">&quot;Dienstag&quot;</span>, <span class="st">&quot;Mittwoch&quot;</span>, <span class="st">&quot;Donnerstag&quot;</span>, <span class="st">&quot;Freitag&quot;</span>, <span class="st">&quot;Samstag&quot;</span>)</a>
<a class="sourceLine" id="cb122-3" data-line-number="3"><span class="kw">paste</span>(tage, tag_namen) <span class="co"># default ist sep=&quot; &quot;</span></a></code></pre></div>
<pre><code>#&gt; [1] &quot;Tag 1: Montag&quot;     &quot;Tag 2: Dienstag&quot;   &quot;Tag 3: Mittwoch&quot;  
#&gt; [4] &quot;Tag 4: Donnerstag&quot; &quot;Tag 5: Freitag&quot;    &quot;Tag 6: Samstag&quot;   
#&gt; [7] &quot;Tag 7: Montag&quot;</code></pre>
</div>
<div id="fehlende-werte-und-null" class="section level3">
<h3><span class="header-section-number">3.3.5</span> Fehlende Werte und NULL</h3>
<p>Fehlende Werte werden in R als <code>NA</code> kodiert.
<code>NA</code> erfüllt gerade in statistischen Anwendungen eine wichtige Rolle, da ein
bestimmter Platz in einem Vektor aktuell fehlend sein müsste, aber als Platz
dennoch existieren muss.</p>
<blockquote>
<p><strong>Beispiel:</strong> Der Vektor <code>x</code> enthält einen logischen Wert, der zeigt ob eine
Person die Fragen auf einem Fragebogen richtig beantwortet hat. Wenn die Person
die dritte Frage auf dem Fragebogen nicht beantwortet hat, sollte dies durch <code>NA</code>
kenntlich gemacht werden. Einfach den Wert komplett wegzulassen macht es im
Nachhinein unmöglich festzustellen <em>welche</em> Frage die Person nicht beantwortet
hat.</p>
</blockquote>
<p>Die meisten Operationen die <code>NA</code> als einen Input bekommen geben auch als
Output <code>NA</code> aus, weil unklar ist wie die Operation mit unterschiedlichen Werten
für den fehlenden Wert ausgehen würde:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb124-1" data-line-number="1"><span class="dv">5</span> <span class="op">+</span><span class="st"> </span><span class="ot">NA</span></a></code></pre></div>
<pre><code>#&gt; [1] NA</code></pre>
<p>Einzige Ausnahmen sind Operationen, die unabhängig vom fehlenden Wert einen
bestimmten Wert annehmen:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb126-1" data-line-number="1"><span class="ot">NA</span> <span class="op">|</span><span class="st"> </span><span class="ot">TRUE</span> <span class="co"># Gibt immer TRUE, unabhängig vom Wert für NA</span></a></code></pre></div>
<pre><code>#&gt; [1] TRUE</code></pre>
<p>Um zu testen ob ein Vektor <code>x</code> fehlende Werte enthält sollte die Funktion <code>is.na</code>
verwendet werden, und nicht etwa der Ausdruck <code>x==NA</code>:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb128-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">NA</span>, <span class="dv">5</span>, <span class="ot">NA</span>, <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb128-2" data-line-number="2"><span class="kw">print</span>(x <span class="op">==</span><span class="st"> </span><span class="ot">NA</span>) <span class="co"># Unklar, da man nicht weiß, ob alle NA für den gleichen Wert stehen</span></a></code></pre></div>
<pre><code>#&gt; [1] NA NA NA NA</code></pre>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb130-1" data-line-number="1"><span class="kw">print</span>(</a>
<a class="sourceLine" id="cb130-2" data-line-number="2">  <span class="kw">is.na</span>(x)</a>
<a class="sourceLine" id="cb130-3" data-line-number="3">)</a></code></pre></div>
<pre><code>#&gt; [1]  TRUE FALSE  TRUE FALSE</code></pre>
<p>Wenn eine Operation einen nicht zu definierenden Wert ausgibt, ist das Ergebnis
nicht <code>NA</code> sondern <code>NaN</code> (<em>not a number</em>):</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb132-1" data-line-number="1"><span class="dv">0</span> <span class="op">/</span><span class="st"> </span><span class="dv">0</span></a></code></pre></div>
<pre><code>#&gt; [1] NaN</code></pre>
<p>Eine weitere Besonderheit ist <code>NULL</code>, welches in der Regel als Vektor der
Länge 0 gilt, aber häufig zu besonderen Zwecken verwendet wird:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb134-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb134-2" data-line-number="2"><span class="kw">length</span>(x)</a></code></pre></div>
<pre><code>#&gt; [1] 0</code></pre>
<p><code>NULL</code> wird häufig verwendet um zu signalisieren, dass etwas nicht existiert.
So ist ein leerer Vektor <code>NULL</code>:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb136-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>()</a>
<a class="sourceLine" id="cb136-2" data-line-number="2">x</a></code></pre></div>
<pre><code>#&gt; NULL</code></pre>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb138-1" data-line-number="1"><span class="kw">length</span>(x)</a></code></pre></div>
<pre><code>#&gt; [1] 0</code></pre>
<p>Damit unterscheidet er sich von einem Vektor mit einem (oder mehreren)
fehlenden Werten:</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb140-1" data-line-number="1">y &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb140-2" data-line-number="2"><span class="kw">length</span>(y)</a></code></pre></div>
<pre><code>#&gt; [1] 1</code></pre>
<p>Auch im Programmieren von Funktionen wird <code>NULL</code> häufig für optionale Argumente
verwendet.
Solche fortgeschrittene Konzepte werden aber erst an späterer Stelle behandelt.
Für jetzt reicht die Idee, <code>NULL</code> als einen Vektor der Länge 0 zu verstehen.</p>
</div>
<div id="indizierung-und-ersetzung" class="section level3">
<h3><span class="header-section-number">3.3.6</span> Indizierung und Ersetzung</h3>
<p>Einzelne Elemente von atomaren Vektoren können mit eckigen Klammern extrahiert
werden:</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb142-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>)</a>
<a class="sourceLine" id="cb142-2" data-line-number="2">x[<span class="dv">1</span>]</a></code></pre></div>
<pre><code>#&gt; [1] 2</code></pre>
<p>Auf diese Weise können auch bestimmte Elemente modifiziert werden:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb144-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>)</a>
<a class="sourceLine" id="cb144-2" data-line-number="2">x[<span class="dv">2</span>] &lt;-<span class="st"> </span><span class="dv">99</span></a>
<a class="sourceLine" id="cb144-3" data-line-number="3">x</a></code></pre></div>
<pre><code>#&gt; [1]  2 99  6</code></pre>
<p>Es kann auch mehr als ein Element extrahiert werden:</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb146-1" data-line-number="1">x[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</a></code></pre></div>
<pre><code>#&gt; [1]  2 99</code></pre>
<p>Negative Indizes sind auch möglich, diese eliminieren die entsprechenden
Elemente:</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb148-1" data-line-number="1">x[<span class="op">-</span><span class="dv">1</span>]</a></code></pre></div>
<pre><code>#&gt; [1] 99  6</code></pre>
<p>Um das letzte Element eines Vektors zu bekommen verwendet man einen Umweg über
die Funktion <code>length()</code>:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb150-1" data-line-number="1">x[<span class="kw">length</span>(x)]</a></code></pre></div>
<pre><code>#&gt; [1] 6</code></pre>
</div>
<div id="nützliche-funktionen-für-atomare-vektoren" class="section level3">
<h3><span class="header-section-number">3.3.7</span> Nützliche Funktionen für atomare Vektoren</h3>
<p>Hier sollen nur einige Funktionen erwähnt werden, die im Kontext von
atomaren Vektoren besonders praktisch sind,<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a> inbesondere wenn es darum geht solche Vektoren
herzustellen, bzw. Rechenoperationen mit ihnen durchzuführen.</p>
<p><strong>Herstellung von atomaren Vektoren</strong>:</p>
<p>Eine Sequenz ganzer Zahlen wird in der Regel sehr häufig gebraucht.
Entsprechend gibt es den hilfreichen Shortcut<code>:</code>, den wir bei der Besprechung
von Vektoren bereits kennengelernt haben:</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb152-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb152-2" data-line-number="2">x</a></code></pre></div>
<pre><code>#&gt;  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb154-1" data-line-number="1">y &lt;-<span class="st"> </span><span class="dv">10</span><span class="op">:</span><span class="dv">1</span></a>
<a class="sourceLine" id="cb154-2" data-line-number="2">y</a></code></pre></div>
<pre><code>#&gt;  [1] 10  9  8  7  6  5  4  3  2  1</code></pre>
<p>Häufig möchten wir jedoch eine kompliziertere Sequenz bauen.
In dem Fall hilft uns die allgemeinere Funktion <code>seq()</code>:</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb156-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb156-2" data-line-number="2"><span class="kw">print</span>(x)</a></code></pre></div>
<pre><code>#&gt;  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<p>In diesem Fall ist <code>seq()</code> äquivalent zu <code>:</code>.
Die Funktion <code>seq</code> erlaubt aber mehrere optionale Argumente: so können wir
mit <code>by</code> die Schrittlänge zwischen den einzelnen Zahlen definieren.</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb158-1" data-line-number="1">y &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dt">by =</span> <span class="fl">0.5</span>)</a>
<a class="sourceLine" id="cb158-2" data-line-number="2"><span class="kw">print</span>(y)</a></code></pre></div>
<pre><code>#&gt;  [1]  1.0  1.5  2.0  2.5  3.0  3.5  4.0  4.5  5.0  5.5  6.0  6.5  7.0  7.5  8.0
#&gt; [16]  8.5  9.0  9.5 10.0</code></pre>
<p>Wenn wir die Länge des resultierenden Vektors festlegen wollen und die
Schrittlänge von R automatisch festgelegt werden soll, können wir dies mit
dem Argument <code>length.out</code> machen:</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb160-1" data-line-number="1">z &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">2</span>, <span class="dv">8</span>, <span class="dt">length.out =</span> <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb160-2" data-line-number="2"><span class="kw">print</span>(z)</a></code></pre></div>
<pre><code>#&gt; [1] 2 4 6 8</code></pre>
<p>Und wenn wir einen Vektor in der Länge eines anderen Vektors erstellen wollen,
bietet sich das Argument <code>along.with</code> an. Dies wird häufig für das Erstellen
von Indexvektoren verwendet.<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a>
In einem solchen Fall müssen wir die Indexzahlen
nicht direkt angeben:</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb162-1" data-line-number="1">z_index &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">along.with =</span> z)</a>
<a class="sourceLine" id="cb162-2" data-line-number="2"><span class="kw">print</span>(z_index)</a></code></pre></div>
<pre><code>#&gt; [1] 1 2 3 4</code></pre>
<p>Auch häufig möchten wir einen bestimmten Wert wiederholen.
Das geht mit der Funktion <code>rep</code>:</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb164-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb164-2" data-line-number="2"><span class="kw">print</span>(x)</a></code></pre></div>
<pre><code>#&gt; [1] NA NA NA NA NA</code></pre>
<p><strong>Rechenoperationen</strong></p>
<p>Es gibt eine Reihe von Operationen, die wir sehr häufig gemeinsam mit Vektoren
anwenden.
Häufig interessiert und die <strong>Länge</strong> eines Vektors.
Dafür können wir die Funktion <code>length()</code> verwenden:</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb166-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)</a>
<a class="sourceLine" id="cb166-2" data-line-number="2"><span class="kw">length</span>(x)</a></code></pre></div>
<pre><code>#&gt; [1] 4</code></pre>
<p>Wenn wir den <strong>größten</strong> oder <strong>kleinsten Wert</strong> eines Vektors erfahren möchten
geht das mit den Funktionen <code>min()</code> und <code>max()</code>:</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb168-1" data-line-number="1"><span class="kw">min</span>(x)</a></code></pre></div>
<pre><code>#&gt; [1] 1</code></pre>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb170-1" data-line-number="1"><span class="kw">max</span>(x)</a></code></pre></div>
<pre><code>#&gt; [1] 4</code></pre>
<p>Beide Funktionen besitzen ein optionales Argument <code>na.rm</code>, das entweder <code>TRUE</code>
oder <code>FALSE</code> sein kann. Im Falle von <code>TRUE</code> werden alle <code>NA</code> Werte für die
Rechenoperation entfernt:</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb172-1" data-line-number="1">y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="ot">NA</span>)</a>
<a class="sourceLine" id="cb172-2" data-line-number="2"><span class="kw">min</span>(y)</a></code></pre></div>
<pre><code>#&gt; [1] NA</code></pre>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb174-1" data-line-number="1"><span class="kw">min</span>(y, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>#&gt; [1] 1</code></pre>
<p>Den <strong>Mittelwert</strong> bzw die <strong>Varianz/Standardabweichung</strong> der Elemente bekommen
wir mit <code>mean()</code>, <code>var()</code>, bzw. <code>sd()</code>, wobei alle Funktionen auch das optionale
Argument <code>na.rm</code> akzeptieren:</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb176-1" data-line-number="1"><span class="kw">mean</span>(x)</a></code></pre></div>
<pre><code>#&gt; [1] 2.5</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb178-1" data-line-number="1"><span class="kw">var</span>(y)</a></code></pre></div>
<pre><code>#&gt; [1] NA</code></pre>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb180-1" data-line-number="1"><span class="kw">var</span>(y, <span class="dt">na.rm =</span> T)</a></code></pre></div>
<pre><code>#&gt; [1] 1.666667</code></pre>
<p>Ebenfalls häufig sind wir an der <strong>Summe</strong>, bzw, dem <strong>Produkt</strong> aller Elemente
des Vektors interessiert. Die Funktionen <code>sum()</code> und <code>prod()</code> helfen weiter und
auch sie kennen das optionale Argument <code>na.rm</code>:</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb182-1" data-line-number="1"><span class="kw">sum</span>(x)</a></code></pre></div>
<pre><code>#&gt; [1] 10</code></pre>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb184-1" data-line-number="1"><span class="kw">prod</span>(y, <span class="dt">na.rm =</span> T)</a></code></pre></div>
<pre><code>#&gt; [1] 24</code></pre>
</div>
<div id="listen" class="section level3">
<h3><span class="header-section-number">3.3.8</span> Listen</h3>
<p>Im Gegensatz zu atomaren Vektoren können Listen Objekte verschiedenen Typs
enthalten.
Sie werden mit der Funktion <code>list()</code> erstellt:</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb186-1" data-line-number="1">l_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb186-2" data-line-number="2">  <span class="st">&quot;a&quot;</span>,</a>
<a class="sourceLine" id="cb186-3" data-line-number="3">  <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>),</a>
<a class="sourceLine" id="cb186-4" data-line-number="4">  <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb186-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb186-6" data-line-number="6"><span class="kw">typeof</span>(l_<span class="dv">1</span>)</a></code></pre></div>
<pre><code>#&gt; [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb188-1" data-line-number="1">l_<span class="dv">1</span></a></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; [1] &quot;a&quot;
#&gt; 
#&gt; [[2]]
#&gt; [1] 1 2 3
#&gt; 
#&gt; [[3]]
#&gt; [1] FALSE</code></pre>
<p>Wir können Listen mit der Funktion <code>str()</code> (kurz für “structure”) inspizieren.
In diesem Fall erhalten wir unmittelbar Informationen über die Art der Elemente:</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb190-1" data-line-number="1"><span class="kw">str</span>(l_<span class="dv">1</span>)</a></code></pre></div>
<pre><code>#&gt; List of 3
#&gt;  $ : chr &quot;a&quot;
#&gt;  $ : num [1:3] 1 2 3
#&gt;  $ : logi FALSE</code></pre>
<p>Die einzelnen Elemente einer Liste können auch benannt werden:</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb192-1" data-line-number="1">l_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb192-2" data-line-number="2">  <span class="st">&quot;erstes_element&quot;</span> =<span class="st"> &quot;a&quot;</span>,</a>
<a class="sourceLine" id="cb192-3" data-line-number="3">  <span class="st">&quot;zweites_element&quot;</span> =<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>),</a>
<a class="sourceLine" id="cb192-4" data-line-number="4">  <span class="st">&quot;drittes_element&quot;</span> =<span class="st"> </span><span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb192-5" data-line-number="5">)</a></code></pre></div>
<p>Die Namen aller Elemente in der Liste erhalten wir mit der Funktion <code>names()</code>:</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb193-1" data-line-number="1"><span class="kw">names</span>(l_<span class="dv">2</span>)</a></code></pre></div>
<pre><code>#&gt; [1] &quot;erstes_element&quot;  &quot;zweites_element&quot; &quot;drittes_element&quot;</code></pre>
<p>Um einzelne Elemente einer Liste auszulesen müssen wir <code>[[</code> anstatt <code>[</code> verwenden.
Wir können dann Elemente entweder nach ihrer Position oder nach ihren Namen auswählen:</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb195-1" data-line-number="1">l_<span class="dv">2</span>[[<span class="dv">1</span>]]</a></code></pre></div>
<pre><code>#&gt; [1] &quot;a&quot;</code></pre>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb197-1" data-line-number="1">l_<span class="dv">2</span>[[<span class="st">&quot;erstes_element&quot;</span>]]</a></code></pre></div>
<pre><code>#&gt; [1] &quot;a&quot;</code></pre>
<p>Im Folgenden wollen wir uns noch mit drei speziellen Typen beschäftigen, die
weniger fundamental als die bislang diskutierten Typen sind, jedoch häufig in
der alltäglichen Arbeit vorkommen: Faktoren, Matrizen und Data Frames.</p>
</div>
<div id="introfactors" class="section level3">
<h3><span class="header-section-number">3.3.9</span> Faktoren</h3>
<p>Faktoren werden verwendet um ordinale oder kategoriale Daten darzustellen.
Ein Faktor kann nur einen von mehreren vorher definierten Werten annehmen, so
genannten <em>Levels</em>.
Faktoren werden über die Funktion <code>factor()</code> erstellt.
Sie nimmt als erstes Argument die Werte für den Faktor:</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb199-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Frau&quot;</span>, <span class="st">&quot;Mann&quot;</span>, <span class="st">&quot;Frau&quot;</span>)</a>
<a class="sourceLine" id="cb199-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;Frau&quot;</span>, <span class="st">&quot;Mann&quot;</span>, <span class="st">&quot;Frau&quot;</span>))</a>
<a class="sourceLine" id="cb199-3" data-line-number="3">x</a></code></pre></div>
<pre><code>#&gt; [1] Frau Mann Frau
#&gt; Levels: Frau Mann</code></pre>
<p>Wenn wir Levels definieren wollen, die aber aktuell noch keine Ausprägung
haben können wir dies mit dem Argument <code>levels</code> bewerkstelligen:</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb201-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Frau&quot;</span>, <span class="st">&quot;Mann&quot;</span>, <span class="st">&quot;Frau&quot;</span>)</a>
<a class="sourceLine" id="cb201-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;Frau&quot;</span>, <span class="st">&quot;Mann&quot;</span>, <span class="st">&quot;Frau&quot;</span>), </a>
<a class="sourceLine" id="cb201-3" data-line-number="3">            <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;Divers&quot;</span>,<span class="st">&quot;Frau&quot;</span>, <span class="st">&quot;Mann&quot;</span>))</a>
<a class="sourceLine" id="cb201-4" data-line-number="4">x</a></code></pre></div>
<pre><code>#&gt; [1] Frau Mann Frau
#&gt; Levels: Divers Frau Mann</code></pre>
<p>Wenn wir das Argument <code>levels</code> verwenden werden dort nicht genannte
Ausprägungen den Wert <code>NA</code> erhalten:</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb203-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Frau&quot;</span>, <span class="st">&quot;Mann&quot;</span>, <span class="st">&quot;Frau&quot;</span>)</a>
<a class="sourceLine" id="cb203-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;Frau&quot;</span>, <span class="st">&quot;Mann&quot;</span>, <span class="st">&quot;Frau&quot;</span>, <span class="st">&quot;Divers&quot;</span>), </a>
<a class="sourceLine" id="cb203-3" data-line-number="3">            <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;Frau&quot;</span>, <span class="st">&quot;Mann&quot;</span>))</a>
<a class="sourceLine" id="cb203-4" data-line-number="4">x</a></code></pre></div>
<pre><code>#&gt; [1] Frau Mann Frau &lt;NA&gt;
#&gt; Levels: Frau Mann</code></pre>
<p>Die Reihenfolge der einzelnen Levels spielt meist keine Rolle.
Bei ordinalen Daten möchten wir aber eine sinnvolle Wertigkeit der
Ausprägungen sicherstellen.
Das geht mit der Funktion <code>factor()</code> und dem Argument <code>ordered</code>:</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb205-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Hoch&quot;</span>, <span class="st">&quot;Hoch&quot;</span>, <span class="st">&quot;Gering&quot;</span>, <span class="st">&quot;Hoch&quot;</span>)</a>
<a class="sourceLine" id="cb205-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="kw">factor</span>(x, </a>
<a class="sourceLine" id="cb205-3" data-line-number="3">            <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;Gering&quot;</span>, <span class="st">&quot;Mittel&quot;</span>, <span class="st">&quot;Hoch&quot;</span>), </a>
<a class="sourceLine" id="cb205-4" data-line-number="4">            <span class="dt">ordered =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb205-5" data-line-number="5">x</a></code></pre></div>
<pre><code>#&gt; [1] Hoch   Hoch   Gering Hoch  
#&gt; Levels: Gering &lt; Mittel &lt; Hoch</code></pre>
<p>Häufig handelt es sich bei den Ausprägungen von Faktoren um Wörter, also
Objekte vom Type <code>character</code>.
Technisch gesehen werden Faktoren aber als <code>integer</code> gespeichert: um
Speicherplatz zu sparen wird jedem Level auf dem Computer eine ganze Zahl
zugewiesen, die dann auf den eigentlichen Wert gemapt wird. Gerade wenn die
Ausprägungen als solche große Zahlen oder lange Wörter sind spart das Speicher,
weil diese Ausprägungen nur einmal gespeichert werden müssen, und jedes Element
des Fakors nur noch eine einfache Zahl ist.
Daher gibt <code>typeof()</code> für Faktoren auch <code>integer</code> aus:</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb207-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;Frau&quot;</span>, <span class="st">&quot;Mann&quot;</span>, <span class="st">&quot;Frau&quot;</span>), </a>
<a class="sourceLine" id="cb207-2" data-line-number="2">            <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;Mann&quot;</span>, <span class="st">&quot;Frau&quot;</span>, <span class="st">&quot;Divers&quot;</span>))</a>
<a class="sourceLine" id="cb207-3" data-line-number="3"><span class="kw">typeof</span>(x)</a></code></pre></div>
<pre><code>#&gt; [1] &quot;integer&quot;</code></pre>
<p>Um zu überprüfen ob es sich bei einem Objekt um einen Faktor handelt verwenden
wir die Funktion <code>is.factor()</code>:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb209-1" data-line-number="1"><span class="kw">is.factor</span>(x)</a></code></pre></div>
<pre><code>#&gt; [1] TRUE</code></pre>
<p>Manche Operationen, die für <code>integer</code> definiert sind, funktionieren bei Faktoren
aber nicht, z.B. Addition:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb211-1" data-line-number="1">x[<span class="dv">1</span>] <span class="op">+</span><span class="st"> </span>x[<span class="dv">2</span>]</a></code></pre></div>
<pre><code>#&gt; Warning in Ops.factor(x[1], x[2]): &#39;+&#39; not meaningful for factors</code></pre>
<pre><code>#&gt; [1] NA</code></pre>
<p>Dafür können wir andere nützliche Dinge mit Faktoren anstellen, z.B. die
absoluten Häufigkeiten über die Funktion <code>table</code> anzeigen:</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb214-1" data-line-number="1"><span class="kw">table</span>(x)</a></code></pre></div>
<pre><code>#&gt; x
#&gt;   Mann   Frau Divers 
#&gt;      1      2      0</code></pre>
<p>Faktoren werden vor allem in der Arbeit mit ordinalen und kategorialen Daten
verwendet (siehe Kapitel <a href="data.html#data">4</a>).</p>
</div>
<div id="intro-matrix" class="section level3">
<h3><span class="header-section-number">3.3.10</span> Matrizen</h3>
<p>Bei Matrizen handelt es sich um zweidimensionale Objekte mit Zeilen und Spalten,
bei denen es sich jeweils um atomare Vektoren handelt.</p>
<p><strong>Erstellen von Matrizen</strong></p>
<p>Matrizen werden mit der Funktion <code>matrix()</code> erstellt.
Diese Funktion nimmt als erstes Argument die Elemente der Matrix und dann
die Spezifikation der Anzahl von Zeilen (<code>nrow</code>) und/oder der Anzahl von
Spalten (<code>ncol</code>):</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb216-1" data-line-number="1">m_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">11</span><span class="op">:</span><span class="dv">20</span>, <span class="dt">nrow =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb216-2" data-line-number="2">m_<span class="dv">1</span></a></code></pre></div>
<pre><code>#&gt;      [,1] [,2]
#&gt; [1,]   11   16
#&gt; [2,]   12   17
#&gt; [3,]   13   18
#&gt; [4,]   14   19
#&gt; [5,]   15   20</code></pre>
<p>Wir können die Zeilen und Spalten sowie einzelne Werte folgendermaßen extrahieren
und gegebenenfalls Ersetzungen vornehmen:</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb218-1" data-line-number="1">m_<span class="dv">1</span>[,<span class="dv">1</span>] <span class="co"># Erste Spalte</span></a></code></pre></div>
<pre><code>#&gt; [1] 11 12 13 14 15</code></pre>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb220-1" data-line-number="1">m_<span class="dv">1</span>[<span class="dv">1</span>,] <span class="co"># Erste Zeile</span></a></code></pre></div>
<pre><code>#&gt; [1] 11 16</code></pre>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb222-1" data-line-number="1">m_<span class="dv">1</span>[<span class="dv">2</span>,<span class="dv">2</span>] <span class="co"># Element [2,2]</span></a></code></pre></div>
<pre><code>#&gt; [1] 17</code></pre>
<blockquote>
<p><strong>Optionaler Hinweis:</strong> Matrizen sind weniger ‘fundamental’ als atomare Vektoren.
Entsprechend gibt uns <code>typeof()</code> für eine Matrix auch den Typ der enthaltenen
atomaren Vektoren an:</p>
</blockquote>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb224-1" data-line-number="1"><span class="kw">typeof</span>(m_<span class="dv">1</span>)</a></code></pre></div>
<pre><code>#&gt; [1] &quot;integer&quot;</code></pre>
<blockquote>
<p>Um zu testen ob es sich bei einem Objekt um eine Matrix handelt verwenden wir
entsprechend <code>is.matrix()</code>:</p>
</blockquote>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb226-1" data-line-number="1"><span class="kw">is.matrix</span>(m_<span class="dv">1</span>)</a></code></pre></div>
<pre><code>#&gt; [1] TRUE</code></pre>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb228-1" data-line-number="1"><span class="kw">is.matrix</span>(<span class="fl">2.0</span>)</a></code></pre></div>
<pre><code>#&gt; [1] FALSE</code></pre>
<p><strong>Matrizenalgebra</strong></p>
<p>Matrizenalgebra spielt in vielen statistischen Anwendungen eine wichtige Rolle.
In R ist es sehr einfach die typischen Rechenoperationen für Matrizen zu
implementieren. Hier nur ein paar Beispiele, für die wir die folgenden
Matrizen verwenden:</p>
<p><span class="math display">\[A = \left( 
\begin{array}{rrr}                                
1 &amp; 6 \\                                               
5 &amp; 3 \\                                               
\end{array}
\right) \quad B = \left( 
\begin{array}{rrr}                                
0 &amp; 2 \\                                               
4 &amp; 8 \\                                               
\end{array}\right)\]</span></p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb230-1" data-line-number="1">matrix_a &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">3</span>), <span class="dt">ncol =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb230-2" data-line-number="2">matrix_b &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">8</span>), <span class="dt">ncol =</span> <span class="dv">2</span>)</a></code></pre></div>
<p>Skalar-Addition:
<span class="math display">\[4+\boldsymbol{A}=
\left( 
\begin{array}{rrr}                                
4+a_{11} &amp; 4+a_{21} \\                                               
4+a_{12} &amp; 4+a_{22} \\                                               
\end{array}
\right)\]</span></p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb231-1" data-line-number="1"><span class="dv">4</span><span class="op">+</span>matrix_a</a></code></pre></div>
<pre><code>#&gt;      [,1] [,2]
#&gt; [1,]    5   10
#&gt; [2,]    9    7</code></pre>
<p>Matrizen-Addition:
<span class="math display">\[\boldsymbol{A}+\boldsymbol{B}=
\left(
\begin{array}{rrr}                                
a_{11} + b_{11} &amp; a_{21} + b_{21}\\                                               
a_{12} + b_{12} &amp; a_{22} + b_{22}\\                                               
\end{array}
\right)\]</span></p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb233-1" data-line-number="1">matrix_a <span class="op">+</span><span class="st"> </span>matrix_b</a></code></pre></div>
<pre><code>#&gt;      [,1] [,2]
#&gt; [1,]    1    8
#&gt; [2,]    9   11</code></pre>
<p>Skalar-Multiplikation:
<span class="math display">\[2\cdot\boldsymbol{A}=
\left( 
\begin{array}{rrr}                                
2\cdot a_{11} &amp; 2\cdot a_{21} \\                                               
2\cdot a_{12} &amp; 2\cdot a_{22} \\                                               
\end{array}
\right)\]</span></p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb235-1" data-line-number="1"><span class="dv">2</span><span class="op">*</span>matrix_a</a></code></pre></div>
<pre><code>#&gt;      [,1] [,2]
#&gt; [1,]    2   12
#&gt; [2,]   10    6</code></pre>
<p>Elementenweise Matrix Multiplikation (auch ‘Hadamard-Produkt’):
<span class="math display">\[\boldsymbol{A}\odot\boldsymbol{B}=
\left(
\begin{array}{rrr}                                
a_{11}\cdot b_{11} &amp; a_{21}\cdot b_{21}\\                                               
a_{12}\cdot b_{12} &amp; a_{22}\cdot b_{22}\\                                               
\end{array}
\right)\]</span></p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb237-1" data-line-number="1">matrix_a <span class="op">*</span><span class="st"> </span>matrix_b</a></code></pre></div>
<pre><code>#&gt;      [,1] [,2]
#&gt; [1,]    0   12
#&gt; [2,]   20   24</code></pre>
<p>Matrizen-Multiplikation:
<span class="math display">\[\boldsymbol{A}\cdot\boldsymbol{B}=
\left(
\begin{array}{rrr}                                
a_{11}\cdot b_{11} + a_{12}\cdot b_{21} &amp; a_{11}\cdot b_{21}+a_{12}\cdot b_{22}\\                     a_{21}\cdot b_{11} + a_{22}\cdot b_{21} &amp; a_{21}\cdot b_{12}+a_{22}\cdot b_{22}\\                     
\end{array}
\right)\]</span></p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb239-1" data-line-number="1">matrix_a <span class="op">%*%</span><span class="st"> </span>matrix_b</a></code></pre></div>
<pre><code>#&gt;      [,1] [,2]
#&gt; [1,]   24   50
#&gt; [2,]   12   34</code></pre>
<p>Die Inverse einer Matrix <span class="math inline">\(\boldsymbol{A}\)</span>, <span class="math inline">\(\boldsymbol{A}^{-1}\)</span>, ist
definiert sodass gilt
<span class="math display">\[\boldsymbol{A}\boldsymbol{A}^{-1}=\boldsymbol{I}\]</span>
Sie kann in R mit der Funktion <code>solve()</code> identifiziert werden:</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb241-1" data-line-number="1"><span class="kw">solve</span>(matrix_a)</a></code></pre></div>
<pre><code>#&gt;            [,1]        [,2]
#&gt; [1,] -0.1111111  0.22222222
#&gt; [2,]  0.1851852 -0.03703704</code></pre>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb243-1" data-line-number="1">matrix_a <span class="op">%*%</span><span class="st"> </span><span class="kw">solve</span>(matrix_a)</a></code></pre></div>
<pre><code>#&gt;      [,1]         [,2]
#&gt; [1,]    1 2.775558e-17
#&gt; [2,]    0 1.000000e+00</code></pre>
<p>Die minimalen Abweichungen sind auf machinelle Rundungsfehler zurückzuführen und
treten häufig auf.</p>
<p>Es gibt im Internet zahlreiche gute Überblicksartikel zum Thema Matrizenalgebra
in R, z.B. <a href="https://www.statmethods.net/advstats/matrix.html">hier</a>
oder in größerem Umfang
<a href="https://www.math.uh.edu/~jmorgan/Math6397/day13/LinearAlgebraR-Handout.pdf">hier</a>.</p>
</div>
<div id="data-frames" class="section level3">
<h3><span class="header-section-number">3.3.11</span> Data Frames</h3>
<p>Der <code>data.frame</code> ist eine besondere Art von Liste und ist ein in der
Datenanalyse regelmäßig auftretender Datentyp.
Im Gegensatz zu einer normalen Liste müssen bei einem <code>data.frame</code> alle Elemente
die gleiche Länge aufweisen.
Das heißt man kann sich einen <code>data.frame</code> als eine rechteckig angeordnete Liste
vorstellen.</p>
<p>Wegen der engen Verwandschaft können wir einen <code>data.frame</code> direkt aus einer Liste
erstellen indem wir die Funktion <code>as.data.frame()</code> verwenden:</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb245-1" data-line-number="1">l_<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb245-2" data-line-number="2">  <span class="st">&quot;a&quot;</span> =<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,</a>
<a class="sourceLine" id="cb245-3" data-line-number="3">  <span class="st">&quot;b&quot;</span> =<span class="st"> </span><span class="dv">4</span><span class="op">:</span><span class="dv">6</span>,</a>
<a class="sourceLine" id="cb245-4" data-line-number="4">  <span class="st">&quot;c&quot;</span> =<span class="st"> </span><span class="dv">7</span><span class="op">:</span><span class="dv">9</span></a>
<a class="sourceLine" id="cb245-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb245-6" data-line-number="6">df_<span class="dv">3</span> &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(l_<span class="dv">3</span>)</a></code></pre></div>
<p>Wenn wir R nach dem Typ von <code>df_3</code> fragen, sehen wir, dass es sich weiterhin um
eine Liste handelt:</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb246-1" data-line-number="1"><span class="kw">typeof</span>(df_<span class="dv">3</span>)</a></code></pre></div>
<pre><code>#&gt; [1] &quot;list&quot;</code></pre>
<p>Allerdings können wir testen ob <code>df_3</code> ein <code>data.frame</code> ist indem wir
<code>is.data.frame</code> benutzen:</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb248-1" data-line-number="1"><span class="kw">is.data.frame</span>(df_<span class="dv">3</span>)</a></code></pre></div>
<pre><code>#&gt; [1] TRUE</code></pre>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb250-1" data-line-number="1"><span class="kw">is.data.frame</span>(l_<span class="dv">3</span>)</a></code></pre></div>
<pre><code>#&gt; [1] FALSE</code></pre>
<p>Wenn wir <code>df_3</code> ausgeben sehen wir unmittelbar den Unterschied zur klassischen
Liste:</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb252-1" data-line-number="1">l_<span class="dv">3</span></a></code></pre></div>
<pre><code>#&gt; $a
#&gt; [1] 1 2 3
#&gt; 
#&gt; $b
#&gt; [1] 4 5 6
#&gt; 
#&gt; $c
#&gt; [1] 7 8 9</code></pre>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb254-1" data-line-number="1">df_<span class="dv">3</span></a></code></pre></div>
<pre><code>#&gt;   a b c
#&gt; 1 1 4 7
#&gt; 2 2 5 8
#&gt; 3 3 6 9</code></pre>
<p>Die andere Möglichkeit einen <code>data.frame</code> zu erstellen ist direkt über die
Funktion <code>data.frame()</code>, wobei es hier in der Regel ratsam ist das optionale
Argument <code>stringsAsFactors</code> auf <code>FALSE</code> zu setzen, da sonst Wörter in so
genannte Faktoren umgewandelt werden:<a href="#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a></p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb256-1" data-line-number="1">df_<span class="dv">4</span> &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb256-2" data-line-number="2">  <span class="st">&quot;gender&quot;</span> =<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(<span class="st">&quot;male&quot;</span>, <span class="dv">3</span>), <span class="kw">rep</span>(<span class="st">&quot;female&quot;</span>, <span class="dv">2</span>)),</a>
<a class="sourceLine" id="cb256-3" data-line-number="3">  <span class="st">&quot;height&quot;</span> =<span class="st"> </span><span class="kw">c</span>(<span class="dv">189</span>, <span class="dv">175</span>, <span class="dv">180</span>, <span class="dv">166</span>, <span class="dv">150</span>),</a>
<a class="sourceLine" id="cb256-4" data-line-number="4">  <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb256-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb256-6" data-line-number="6">df_<span class="dv">4</span></a></code></pre></div>
<pre><code>#&gt;   gender height
#&gt; 1   male    189
#&gt; 2   male    175
#&gt; 3   male    180
#&gt; 4 female    166
#&gt; 5 female    150</code></pre>
<p>Data Frames sind das klassische Objekt um eingelesene Daten zu repräsentieren.
Wenn Sie sich z.B. Daten zum BIP in Deutschland aus dem Internet runterladen und
diese Daten dann in R einlesen, werden diese Daten zunächst einmal als <code>data.frame</code>
repräsentiert.<a href="#fn11" class="footnote-ref" id="fnref11"><sup>11</sup></a>
Diese Repräsentation erlaubt dann eine einfache Analyse und Manipulation der Daten.</p>
<p>Zwar gibt es ein eigenes Kapitel zur Bearbeitung von Daten
(siehe Kapitel <a href="data.html#data">4</a>), wir wollen aber schon hier einige zentrale Befehle
im Zusammenhang von Data Frames einführen.</p>
<p>An dieser Stelle sei schon angemerkt, dass um Zeilen, Spalten oder
einzelne Elemente auszuwählen die gleichen Befehle wie bei Matrizen
verwendet werden können:</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb258-1" data-line-number="1">df_<span class="dv">4</span>[, <span class="dv">1</span>] <span class="co"># erste Spalte</span></a></code></pre></div>
<pre><code>#&gt; [1] &quot;male&quot;   &quot;male&quot;   &quot;male&quot;   &quot;female&quot; &quot;female&quot;</code></pre>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb260-1" data-line-number="1">df_<span class="dv">4</span>[, <span class="dv">2</span>] <span class="co"># Werte der zweiten Spalte</span></a></code></pre></div>
<pre><code>#&gt; [1] 189 175 180 166 150</code></pre>
<p>Die Abfrage funktioniert nicht nur mit Indices, sondern auch mit
Spaltennamen:<a href="#fn12" class="footnote-ref" id="fnref12"><sup>12</sup></a></p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb262-1" data-line-number="1">df_<span class="dv">4</span>[[<span class="st">&quot;gender&quot;</span>]] </a></code></pre></div>
<pre><code>#&gt; [1] &quot;male&quot;   &quot;male&quot;   &quot;male&quot;   &quot;female&quot; &quot;female&quot;</code></pre>
<p>Wenn wir <code>[</code> anstatt von <code>[[</code> verwenden erhalten wir als Output einen (reduzierten)
Data Frame:</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb264-1" data-line-number="1">df_<span class="dv">4</span>[<span class="st">&quot;gender&quot;</span>] </a></code></pre></div>
<pre><code>#&gt;   gender
#&gt; 1   male
#&gt; 2   male
#&gt; 3   male
#&gt; 4 female
#&gt; 5 female</code></pre>
<p>Es können auch mehrere Zeilen ausgewählt werden:</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb266-1" data-line-number="1">df_<span class="dv">4</span>[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, ] <span class="co"># Die ersten beiden Zeilen</span></a></code></pre></div>
<pre><code>#&gt;   gender height
#&gt; 1   male    189
#&gt; 2   male    175</code></pre>
<p>Oder einzelne Werte:</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb268-1" data-line-number="1">df_<span class="dv">4</span>[<span class="dv">2</span>, <span class="dv">2</span>] <span class="co"># Zweiter Wert der zweiten Spalte</span></a></code></pre></div>
<pre><code>#&gt; [1] 175</code></pre>
<p>Dies können wir uns zu Nutze machen um den Typ der einzelnen Spalten
herauszufinden:</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb270-1" data-line-number="1"><span class="kw">typeof</span>(df_<span class="dv">4</span>[[<span class="st">&quot;gender&quot;</span>]])</a></code></pre></div>
<pre><code>#&gt; [1] &quot;character&quot;</code></pre>
<p>Gerade bei sehr großen Data Frames möchte man oft nur die ersten paar Zeilen
inspizieren.
Das ist mit der Funktion <code>head()</code> möglich.
Das erste Argument ist immer der Name des Data Frames.
Das zweite (optionale) Argument ist ein <code>integer</code>, der die Anzahl der
anzuzeigenden Zeilen angibt (Standardwert: <code>5</code>):</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb272-1" data-line-number="1"><span class="kw">head</span>(df_<span class="dv">4</span>, <span class="dv">2</span>) <span class="co"># gibt die ersten zwei Zeilen aus</span></a></code></pre></div>
<pre><code>#&gt;   gender height
#&gt; 1   male    189
#&gt; 2   male    175</code></pre>
</div>
</div>
<div id="es:pakete" class="section level2">
<h2><span class="header-section-number">3.4</span> Pakete</h2>
<p>Bei Paketen handelt es sich um eine Kombination aus R Code, Daten, Dokumentationen
und Tests.
Sie sind der beste Weg, reproduzierbaren Code zu erstellen und frei zugänglich
zu machen.
Zwar werden Pakete häufig der Öffentlichkeit zugänglich gemacht, z.B. über GitHub
oder CRAN, es ist aber genauso hilfreich, Pakete für den privaten Gebrauch zu
schreiben, z.B. um für bestimmte Routinen Funktionen zu programmieren, zu
dokumentieren und in verschiedenen Projekten verfügbar zu machen.<a href="#fn13" class="footnote-ref" id="fnref13"><sup>13</sup></a></p>
<p>Die Tatsache, dass viele Menschen statistische Probleme lösen indem sie
bestimmte Routinen entwickeln, diese dann generalisieren und über Pakete
der ganzen R Community frei verfügbar machen, ist einer der Hauptgründe für
den Erfolg und die breite Anwendbarkeit von R.</p>
<p>Wenn man R startet haben wir Zugriff auf eine gewisse Anzahl von Funktionen,
vordefinierten Variablen und Datensätzen. Die Gesamtheit dieser Objekte wird
in der Regel <code>base R</code> genannt, weil wir alle Funktionalitäten ohne Weiteres
nutzen können.</p>
<p>Die Funktion <code>assign</code>, zum Beispiel, ist Teil von <code>base R</code>: wir starten R und
können sie ohne Weiteres verwenden.</p>
<p>Im Prinzip kann so gut wie jedwede statistische Prozedur in <code>base R</code> implementiert
werden. Dies ist aber häufig zeitaufwendig und fehleranfällig: wie wir am
Beispiel von Funktionen gelernt haben, sollten häufig verwendete Routinen im
Rahmen von einer Funktion implementiert werden, die dann immer wieder angewendet
werden kann. Das reduziert nicht nur Fehler, sondern macht den Code besser
verständlich.</p>
<p>Pakete folgen dem gleichen Prinzip, nur tragen sie die Idee noch weiter:
hier wollen wir die Funktionen auch über ein einzelnes R Projekt hinaus nutzbar
machen, sodass sie nicht in jedem Projekt neu definiert werden müssen, sondern
zentral nutzbar gemacht und dokumentiert werden.</p>
<p>Um ein Paket in R zu nutzen, muss es zunächst installiert werden.
Für Pakete, die auf der zentralen R Pakete Plattform CRAN verfügbar sind,
geht dies mit der Funktion <code>install.packages</code>.
Wenn wir z.B. das Paket <code>data.table</code> installieren wollen geht das mit dem
folgenden Befehl:</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb274-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">&quot;data.table&quot;</span>)</a></code></pre></div>
<p>Das Paket <code>data.table</code> enthält viele Objekte, welche die Arbeit mit großen
Datensätzen enorm erleichtern. Beispielsweise ist darunter eine verbesserte Version des
<code>data.frame</code>, der <code>data.table</code>. Wir können einen <code>data.frame</code> mit Hilfe der
Funktion <code>as.data.table()</code> in einen <code>data.table</code> umwandeln.</p>
<p>Allerdings haben wir selbst nach erfolgreicher Installation von <code>data.table</code>
nicht direkt Zugriff auf diese Funktion:</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb275-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb275-2" data-line-number="2">  <span class="dt">a=</span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span>,</a>
<a class="sourceLine" id="cb275-3" data-line-number="3">  <span class="dt">b=</span><span class="dv">21</span><span class="op">:</span><span class="dv">25</span></a>
<a class="sourceLine" id="cb275-4" data-line-number="4">)</a>
<a class="sourceLine" id="cb275-5" data-line-number="5"><span class="kw">as.data.table</span>(x)</a></code></pre></div>
<pre><code>#&gt; Error in as.data.table(x): could not find function &quot;as.data.table&quot;</code></pre>
<p>Wir haben zwei Möglichkeiten auf die Objekte im Paket <code>data.table</code> zuzugreifen:
zum einen können wir mit dem Operator <code>::</code> arbeiten:</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb277-1" data-line-number="1">y &lt;-<span class="st"> </span>data.table<span class="op">::</span><span class="kw">as.data.table</span>(x)</a>
<a class="sourceLine" id="cb277-2" data-line-number="2">y</a></code></pre></div>
<pre><code>#&gt;    a  b
#&gt; 1: 1 21
#&gt; 2: 2 22
#&gt; 3: 3 23
#&gt; 4: 4 24
#&gt; 5: 5 25</code></pre>
<p>Wir schreiben also den Namen des Pakets, direkt gefolgt von <code>::</code> und dann den
Namen des Objekts aus dem Paket, das wir verwenden wollen.</p>
<p>Zwar ist das der transparenteste und sauberste Weg auf Objekte aus anderen
Paketen zuzugreifen, allerdings kann es auch nervig sein wenn man häufig oder
sehr viele Objekte aus dem gleichen Paket verwendet.
Wir können alle Objekte eines Paketes direkt zugänglich machen indem wir die
Funktion <code>library()</code> verwenden.</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb279-1" data-line-number="1"><span class="kw">library</span>(data.table)</a>
<a class="sourceLine" id="cb279-2" data-line-number="2">y &lt;-<span class="st"> </span><span class="kw">as.data.table</span>(x)</a></code></pre></div>
<p>Der Übersicht halber sollte das für alle in
einem Skript verwendeten Pakete ganz am Anfang des Skripts gemacht werden.
So sieht man auch unmittelbar welche Pakete für das Skript installiert sein
müssen.</p>
<p>Grundsätzlich sollte man in jedem Skript nur die Pakete mit <code>library()</code> einlesen,
die auch tatsächlich verwendet werden. Ansonsten lädt man unnötigerweise viele
Objekte und verliert den Überblick woher eine bestimmte Funktion eigentlich
kommt. Außerdem ist es schwieriger für andere das Skript zu verwenden, weil
unter Umständen viele Pakete unnötigerweise installiert werden müssen.</p>
<p>Da Pakete dezentral von verschiedensten Menschen hergestellt werden, besteht die
Gefahr, dass Objekte in unterschiedlichen Paketen den gleichen Namen bekommen.
Da in R ein Name nur zu einem Objekt gehören kann, werden beim Einladen mehrerer
Pakete eventuell Namen überschrieben, oder ‘maskiert’. Dies wird am Anfang beim
Einlesen der Pakete mitgeteilt, gerät aber leicht in Vergessenheit und kann zu
sehr kryptischen Fehlermeldungen führen.</p>
<p>Wir wollen das kurz anhand der beiden Pakete <code>dplyr</code> und <code>plm</code> illustrieren:</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb280-1" data-line-number="1"><span class="kw">library</span>(dplyr)</a></code></pre></div>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb281-1" data-line-number="1"><span class="kw">library</span>(plm)</a></code></pre></div>
<pre><code>#&gt; 
#&gt; Attaching package: &#39;plm&#39;</code></pre>
<pre><code>#&gt; The following objects are masked from &#39;package:dplyr&#39;:
#&gt; 
#&gt;     between, lag, lead</code></pre>
<pre><code>#&gt; The following object is masked from &#39;package:data.table&#39;:
#&gt; 
#&gt;     between</code></pre>
<p>In beiden Paketen gibt es Objekte mit den Namen <code>between</code>, <code>lag</code> und <code>lead</code>.
Bei der Verwendung von <code>library</code> maskiert das später eingelesene Paket die
Objekte des früheren.
Wir können das illustrieren indem wir den Namen des Objekts eingeben:</p>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb285-1" data-line-number="1">lead</a></code></pre></div>
<pre><code>#&gt; function (x, k = 1, ...) 
#&gt; {
#&gt;     UseMethod(&quot;lead&quot;)
#&gt; }
#&gt; &lt;bytecode: 0x7fbd6be88838&gt;
#&gt; &lt;environment: namespace:plm&gt;</code></pre>
<p>Aus der letzten Zeile wird ersichtlich, dass <code>lead</code> hier aus dem Paket <code>plm</code>
kommt.</p>
<p>Wenn wir die Funktion aus <code>dplyr</code> verwenden wollen, müssen wir <code>::</code> verwenden:</p>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb287-1" data-line-number="1">dplyr<span class="op">::</span>lead</a></code></pre></div>
<pre><code>#&gt; function (x, n = 1L, default = NA, order_by = NULL, ...) 
#&gt; {
#&gt;     if (!is.null(order_by)) {
#&gt;         return(with_order(order_by, lead, x, n = n, default = default))
#&gt;     }
#&gt;     if (length(n) != 1 || !is.numeric(n) || n &lt; 0) {
#&gt;         bad_args(&quot;n&quot;, &quot;must be a nonnegative integer scalar, &quot;, 
#&gt;             &quot;not {friendly_type_of(n)} of length {length(n)}&quot;)
#&gt;     }
#&gt;     if (n == 0) 
#&gt;         return(x)
#&gt;     xlen &lt;- length(x)
#&gt;     n &lt;- pmin(n, xlen)
#&gt;     out &lt;- c(x[-seq_len(n)], rep(default, n))
#&gt;     attributes(out) &lt;- attributes(x)
#&gt;     out
#&gt; }
#&gt; &lt;bytecode: 0x7fbd6d376ef0&gt;
#&gt; &lt;environment: namespace:dplyr&gt;</code></pre>
<p>Wenn es zu Maskierungen kommt ist es also der Transparenz wegen besser in beiden
Fällen <code>::</code> zu verwenden, also <code>plm::lead</code> und <code>dplyr::lead</code>.</p>
<blockquote>
<p><strong>Hinweis</strong>: Alle von Konflikten betroffenen Objekte können mit der Funktion
<code>conflicts()</code> angezeigt werden.</p>
</blockquote>
<blockquote>
<p><strong>Optionale Info</strong>: Um zu überprüfen in welcher Reihenfolge R nach Objekten sucht, kann die
Funktion <code>search</code> verwendet werden. Wenn ein Objekt aufgerufen wird schaut
R zuerst im ersten Element des Vektors nach, der globalen Umgebung. Wenn das
Objekt dort nicht gefunden wird, schaut es im zweiten, etc.
Wie man hier auch erkennen kann, werden einige Pakete standardmäßig eingelesen.
Wenn ein Objekt nirgends gefunden wird gibt R einen Fehler aus.
Im vorliegenden Fall zeigt uns die Funktion, dass R erst im Paket
<code>plm</code> nach der Funktion <code>lead()</code> sucht, und nicht im Paket <code>dplyr</code>:</p>
</blockquote>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb289-1" data-line-number="1"><span class="kw">search</span>()</a></code></pre></div>
<pre><code>#&gt;  [1] &quot;.GlobalEnv&quot;         &quot;package:plm&quot;        &quot;package:dplyr&quot;     
#&gt;  [4] &quot;package:data.table&quot; &quot;package:tufte&quot;      &quot;package:stats&quot;     
#&gt;  [7] &quot;package:graphics&quot;   &quot;package:grDevices&quot;  &quot;package:utils&quot;     
#&gt; [10] &quot;package:datasets&quot;   &quot;package:methods&quot;    &quot;Autoloads&quot;         
#&gt; [13] &quot;package:base&quot;</code></pre>
<blockquote>
<p><strong>Weiterführender Hinweis</strong>: Um das Maskieren besser zu verstehen sollte man
sich mit dem Konzept von <em>namespaces</em> und <em>environments</em> auseinandersetzen.
Eine gute Erklärung bietet <span class="citation">Wickham and Bryan (<a href="#ref-Packages">2019</a>)</span>.</p>
</blockquote>
<blockquote>
<p><strong>Weiterführender Hinweis</strong>: Das Paket <code>conflicted</code> führt dazu, dass R immer
einen Fehler ausgibt wenn nicht eindeutige Objektnamen verwendet werden.</p>
</blockquote>
<p>Der besseren Transparenz wegen wird in diesem Buch ab jetzt immer die Notation
mit <code>::</code> verwendet, auch wenn dies nicht unbedingt nötig wäre.
So sehen Sie bei jedem Code-Beispiel unmittelbar aus welchem Paket die
verwendeten Funktionen stammen.
Lediglich bei den Basispaketen werden wir auf <code>::</code> verzichten.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-Packages">
<p>Wickham, Hadley, and Jennifer Bryan. 2019. <em>Advanced R</em>. 2nd ed. Sebastopol, CA: O’Reilly Media. <a href="https://r-pkgs.org/">https://r-pkgs.org/</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="einrichtung.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R-SocioEcon-dt.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
