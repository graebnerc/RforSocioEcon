<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Visualisierung von Daten | R für die sozio-ökonomische Forschung</title>
  <meta name="description" content="Einführung in R für die sozioökonomische Forschung; Version 0.9.0" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Visualisierung von Daten | R für die sozio-ökonomische Forschung" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Einführung in R für die sozioökonomische Forschung; Version 0.9.0" />
  <meta name="github-repo" content="graebnerc/RforSocioEcon" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Visualisierung von Daten | R für die sozio-ökonomische Forschung" />
  
  <meta name="twitter:description" content="Einführung in R für die sozioökonomische Forschung; Version 0.9.0" />
  

<meta name="author" content="Dr. Claudius Gräbner" />


<meta name="date" content="2020-11-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data.html"/>
<link rel="next" href="formalia.html"/>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R für die sozioökonomische Forschung</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Willkommen</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#danksagung"><i class="fa fa-check"></i>Danksagung</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#lizenz"><i class="fa fa-check"></i>Lizenz</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#änderungshistorie"><i class="fa fa-check"></i>Änderungshistorie</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="precons.html"><a href="precons.html"><i class="fa fa-check"></i><b>1</b> Vorbemerkungen</a>
<ul>
<li class="chapter" data-level="1.1" data-path="precons.html"><a href="precons.html#warum-r"><i class="fa fa-check"></i><b>1.1</b> Warum R?</a></li>
<li class="chapter" data-level="1.2" data-path="precons.html"><a href="precons.html#besonderheiten-von-r"><i class="fa fa-check"></i><b>1.2</b> Besonderheiten von R</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="einrichtung.html"><a href="einrichtung.html"><i class="fa fa-check"></i><b>2</b> Einrichtung</a>
<ul>
<li class="chapter" data-level="2.1" data-path="einrichtung.html"><a href="einrichtung.html#installation-von-r-und-r-studio"><i class="fa fa-check"></i><b>2.1</b> Installation von R und R-Studio</a></li>
<li class="chapter" data-level="2.2" data-path="einrichtung.html"><a href="einrichtung.html#die-r-studio-oberfläche"><i class="fa fa-check"></i><b>2.2</b> Die R Studio Oberfläche</a></li>
<li class="chapter" data-level="2.3" data-path="einrichtung.html"><a href="einrichtung.html#einrichtung-eines-r-projekts"><i class="fa fa-check"></i><b>2.3</b> Einrichtung eines R Projekts</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="einrichtung.html"><a href="einrichtung.html#arbeitsverzeichnisse-und-pfade"><i class="fa fa-check"></i><b>2.3.1</b> Arbeitsverzeichnisse und Pfade</a></li>
<li class="chapter" data-level="2.3.2" data-path="einrichtung.html"><a href="einrichtung.html#schritt-1-projektordner-anlegen"><i class="fa fa-check"></i><b>2.3.2</b> Schritt 1: Projektordner anlegen</a></li>
<li class="chapter" data-level="2.3.3" data-path="einrichtung.html"><a href="einrichtung.html#schritt-2-ein-r-studio-projekt-im-projektordner-erstellen"><i class="fa fa-check"></i><b>2.3.3</b> Schritt 2: Ein R-Studio Projekt im Projektordner erstellen</a></li>
<li class="chapter" data-level="2.3.4" data-path="einrichtung.html"><a href="einrichtung.html#unterordner"><i class="fa fa-check"></i><b>2.3.4</b> Schritt 3: Relevante Unterordner erstellen</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="einrichtung.html"><a href="einrichtung.html#optional-schritt-4-und-das-here-paket"><i class="fa fa-check"></i><b>2.4</b> Optional: Schritt 4 und das here-Paket</a></li>
<li class="chapter" data-level="2.5" data-path="einrichtung.html"><a href="einrichtung.html#abschließende-bemerkungen"><i class="fa fa-check"></i><b>2.5</b> Abschließende Bemerkungen</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="basics.html"><a href="basics.html"><i class="fa fa-check"></i><b>3</b> Erste Schritte in R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="basics.html"><a href="basics.html#es:befehle"><i class="fa fa-check"></i><b>3.1</b> Befehle in R an den Computer übermitteln</a></li>
<li class="chapter" data-level="3.2" data-path="basics.html"><a href="basics.html#es:objekte"><i class="fa fa-check"></i><b>3.2</b> Objekte, Funktionen und Zuweisungen</a></li>
<li class="chapter" data-level="3.3" data-path="basics.html"><a href="basics.html#es:objektarten"><i class="fa fa-check"></i><b>3.3</b> Grundlegende Objeke in R</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="basics.html"><a href="basics.html#funktionen"><i class="fa fa-check"></i><b>3.3.1</b> Funktionen</a></li>
<li class="chapter" data-level="3.3.2" data-path="basics.html"><a href="basics.html#basics-types-vectors"><i class="fa fa-check"></i><b>3.3.2</b> Vektoren</a></li>
<li class="chapter" data-level="3.3.3" data-path="basics.html"><a href="basics.html#basics-logic"><i class="fa fa-check"></i><b>3.3.3</b> Logische Werte (logical)</a></li>
<li class="chapter" data-level="3.3.4" data-path="basics.html"><a href="basics.html#wörter-character"><i class="fa fa-check"></i><b>3.3.4</b> Wörter (character)</a></li>
<li class="chapter" data-level="3.3.5" data-path="basics.html"><a href="basics.html#fehlende-werte-und-null"><i class="fa fa-check"></i><b>3.3.5</b> Fehlende Werte und NULL</a></li>
<li class="chapter" data-level="3.3.6" data-path="basics.html"><a href="basics.html#indizierung-und-ersetzung"><i class="fa fa-check"></i><b>3.3.6</b> Indizierung und Ersetzung</a></li>
<li class="chapter" data-level="3.3.7" data-path="basics.html"><a href="basics.html#nützliche-funktionen-für-atomare-vektoren"><i class="fa fa-check"></i><b>3.3.7</b> Nützliche Funktionen für atomare Vektoren</a></li>
<li class="chapter" data-level="3.3.8" data-path="basics.html"><a href="basics.html#listen"><i class="fa fa-check"></i><b>3.3.8</b> Listen</a></li>
<li class="chapter" data-level="3.3.9" data-path="basics.html"><a href="basics.html#introfactors"><i class="fa fa-check"></i><b>3.3.9</b> Faktoren</a></li>
<li class="chapter" data-level="3.3.10" data-path="basics.html"><a href="basics.html#intro-matrix"><i class="fa fa-check"></i><b>3.3.10</b> Matrizen</a></li>
<li class="chapter" data-level="3.3.11" data-path="basics.html"><a href="basics.html#data-frames"><i class="fa fa-check"></i><b>3.3.11</b> Data Frames</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="basics.html"><a href="basics.html#es:pakete"><i class="fa fa-check"></i><b>3.4</b> Pakete</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>4</b> Datenkunde und Datenaufbereitung</a>
<ul>
<li class="chapter" data-level="" data-path="data.html"><a href="data.html#verwendete-pakete"><i class="fa fa-check"></i>Verwendete Pakete</a></li>
<li class="chapter" data-level="4.1" data-path="data.html"><a href="data.html#data-arten"><i class="fa fa-check"></i><b>4.1</b> Arten von Daten</a></li>
<li class="chapter" data-level="4.2" data-path="data.html"><a href="data.html#data-get"><i class="fa fa-check"></i><b>4.2</b> Datenakquise</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="data.html"><a href="data.html#exkurs-1-ländercodes-übersetzen"><i class="fa fa-check"></i><b>4.2.1</b> Exkurs 1: Ländercodes übersetzen</a></li>
<li class="chapter" data-level="4.2.2" data-path="data.html"><a href="data.html#data-download-R"><i class="fa fa-check"></i><b>4.2.2</b> Exkurs 2: Daten direkt mit R herunterladen</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data.html"><a href="data.html#data-read-write"><i class="fa fa-check"></i><b>4.3</b> Daten einlesen und schreiben</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="data.html"><a href="data.html#einlesen-von-datensätzen"><i class="fa fa-check"></i><b>4.3.1</b> Einlesen von Datensätzen</a></li>
<li class="chapter" data-level="4.3.2" data-path="data.html"><a href="data.html#speichern-von-daten"><i class="fa fa-check"></i><b>4.3.2</b> Speichern von Daten</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data.html"><a href="data.html#data-wrangling"><i class="fa fa-check"></i><b>4.4</b> Verarbeitung von Daten (‘data wrangling’)</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="data.html"><a href="data.html#das-konzept-von-tidy-data"><i class="fa fa-check"></i><b>4.4.1</b> Das Konzept von ‘tidy data’</a></li>
<li class="chapter" data-level="4.4.2" data-path="data.html"><a href="data.html#data-long-wide"><i class="fa fa-check"></i><b>4.4.2</b> Von langen und breiten Datensätzen</a></li>
<li class="chapter" data-level="4.4.3" data-path="data.html"><a href="data.html#data-merge"><i class="fa fa-check"></i><b>4.4.3</b> Zusammenführen von Daten</a></li>
<li class="chapter" data-level="4.4.4" data-path="data.html"><a href="data.html#date-select"><i class="fa fa-check"></i><b>4.4.4</b> Datensätze filtern und selektieren</a></li>
<li class="chapter" data-level="4.4.5" data-path="data.html"><a href="data.html#data-summary"><i class="fa fa-check"></i><b>4.4.5</b> Datensätze zusammenfassen</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="data.html"><a href="data.html#data-role"><i class="fa fa-check"></i><b>4.5</b> Abschließende Bemerkungen zum Umgang mit Daten innerhalb eines Forschungsprojekts</a></li>
<li class="chapter" data-level="4.6" data-path="data.html"><a href="data.html#data-packages"><i class="fa fa-check"></i><b>4.6</b> Anmerkungen zu Paketen</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="vis.html"><a href="vis.html"><i class="fa fa-check"></i><b>5</b> Visualisierung von Daten</a>
<ul>
<li class="chapter" data-level="" data-path="data.html"><a href="data.html#verwendete-pakete"><i class="fa fa-check"></i>Verwendete Pakete</a></li>
<li class="chapter" data-level="" data-path="vis.html"><a href="vis.html#einleitung"><i class="fa fa-check"></i>Einleitung</a></li>
<li class="chapter" data-level="5.1" data-path="vis.html"><a href="vis.html#vis-theorie"><i class="fa fa-check"></i><b>5.1</b> Optional: Theoretische Grundlagen</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="vis.html"><a href="vis.html#vis-base-ggplot2"><i class="fa fa-check"></i><b>5.1.1</b> <code>ggplot2</code> vs. <code>base plot</code></a></li>
<li class="chapter" data-level="5.1.2" data-path="vis.html"><a href="vis.html#grammar"><i class="fa fa-check"></i><b>5.1.2</b> Einleitung zu Wickham’s <em>Grammar of Graphics</em></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="vis.html"><a href="vis.html#vis-elemente"><i class="fa fa-check"></i><b>5.2</b> Grundlegende Elemente von <code>ggplot2</code>-Grafiken</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="vis.html"><a href="vis.html#elemente-eines-ggplot"><i class="fa fa-check"></i><b>5.2.1</b> Elemente eines <code>ggplot</code></a></li>
<li class="chapter" data-level="5.2.2" data-path="vis.html"><a href="vis.html#beispiel-workflow"><i class="fa fa-check"></i><b>5.2.2</b> Beispiel Workflow</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="vis.html"><a href="vis.html#arten-von-datenvisualisierung"><i class="fa fa-check"></i><b>5.3</b> Arten von Datenvisualisierung</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="vis.html"><a href="vis.html#allgemeine-tipps-zum-grafikdesign"><i class="fa fa-check"></i><b>5.3.1</b> Allgemeine Tipps zum Grafikdesign</a></li>
<li class="chapter" data-level="5.3.2" data-path="vis.html"><a href="vis.html#streu--oder-blasendiagramm"><i class="fa fa-check"></i><b>5.3.2</b> Streu- oder Blasendiagramm</a></li>
<li class="chapter" data-level="5.3.3" data-path="vis.html"><a href="vis.html#linienchart"><i class="fa fa-check"></i><b>5.3.3</b> Linienchart</a></li>
<li class="chapter" data-level="5.3.4" data-path="vis.html"><a href="vis.html#histogramme-und-dichteplots"><i class="fa fa-check"></i><b>5.3.4</b> Histogramme und Dichteplots</a></li>
<li class="chapter" data-level="5.3.5" data-path="vis.html"><a href="vis.html#balkendiagramme"><i class="fa fa-check"></i><b>5.3.5</b> Balkendiagramme</a></li>
<li class="chapter" data-level="5.3.6" data-path="vis.html"><a href="vis.html#vis-pie"><i class="fa fa-check"></i><b>5.3.6</b> Kuchendiagramme</a></li>
<li class="chapter" data-level="5.3.7" data-path="vis.html"><a href="vis.html#vis-kinds-summary"><i class="fa fa-check"></i><b>5.3.7</b> Zusammenfassung</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="vis.html"><a href="vis.html#vis-adv"><i class="fa fa-check"></i><b>5.4</b> Beispiele aus der Praxis und fortgeschrittene Themen</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="vis.html"><a href="vis.html#regressionsgerade"><i class="fa fa-check"></i><b>5.4.1</b> Regressionsgerade</a></li>
<li class="chapter" data-level="5.4.2" data-path="vis.html"><a href="vis.html#vis-viele-plots"><i class="fa fa-check"></i><b>5.4.2</b> Mehrere Plots in einer Abbildung</a></li>
<li class="chapter" data-level="5.4.3" data-path="vis.html"><a href="vis.html#mehr-zu-den-skalen-ggplot2expansion-und-skalentransformation"><i class="fa fa-check"></i><b>5.4.3</b> Mehr zu den Skalen: <code>ggplot2::expansion()</code> und Skalentransformation</a></li>
<li class="chapter" data-level="5.4.4" data-path="vis.html"><a href="vis.html#mehr-zur-farbauswahl"><i class="fa fa-check"></i><b>5.4.4</b> Mehr zur Farbauswahl</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="vis.html"><a href="vis.html#vis-fehler"><i class="fa fa-check"></i><b>5.5</b> Typische Fehler in der Datenvisualisierung vermeiden</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="vis.html"><a href="vis.html#clutterplots-und-ihre-tranformation-zum-beschrifteten-streudiagramm"><i class="fa fa-check"></i><b>5.5.1</b> Clutterplots und ihre Tranformation zum beschrifteten Streudiagramm</a></li>
<li class="chapter" data-level="5.5.2" data-path="vis.html"><a href="vis.html#ein-unbalancierter-plot"><i class="fa fa-check"></i><b>5.5.2</b> Ein ‘unbalancierter’ Plot</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="vis.html"><a href="vis.html#vis-lies"><i class="fa fa-check"></i><b>5.6</b> Lügen mit grafischer Statistik</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="vis.html"><a href="vis.html#klassiker-1-kontraintuitiver-nullpunkt"><i class="fa fa-check"></i><b>5.6.1</b> Klassiker 1: Kontraintuitiver ‘Nullpunkt’</a></li>
<li class="chapter" data-level="5.6.2" data-path="vis.html"><a href="vis.html#klassiker-2-geschickt-gewählter-zeitraum-und-clever-gewählte-achsenabschnitte"><i class="fa fa-check"></i><b>5.6.2</b> Klassiker 2: Geschickt gewählter Zeitraum und clever gewählte Achsenabschnitte</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="vis.html"><a href="vis.html#vis-links"><i class="fa fa-check"></i><b>5.7</b> Links und weiterführende Literatur</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="formalia.html"><a href="formalia.html"><i class="fa fa-check"></i><b>6</b> Formale Methoden der Sozioökonomie</a>
<ul>
<li class="chapter" data-level="" data-path="data.html"><a href="data.html#verwendete-pakete"><i class="fa fa-check"></i>Verwendete Pakete</a></li>
<li class="chapter" data-level="6.1" data-path="formalia.html"><a href="formalia.html#formalia-wachstum"><i class="fa fa-check"></i><b>6.1</b> Änderungsraten und die Rolle des Logarithmus</a></li>
<li class="chapter" data-level="6.2" data-path="formalia.html"><a href="formalia.html#formalia-diff"><i class="fa fa-check"></i><b>6.2</b> Grundlagen der Differentialrechnung</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="formalia.html"><a href="formalia.html#einleitung-differential--und-integralrechnung"><i class="fa fa-check"></i><b>6.2.1</b> Einleitung: Differential- und Integralrechnung</a></li>
<li class="chapter" data-level="6.2.2" data-path="formalia.html"><a href="formalia.html#wiederholung-ableitungsregeln"><i class="fa fa-check"></i><b>6.2.2</b> Wiederholung: Ableitungsregeln</a></li>
<li class="chapter" data-level="6.2.3" data-path="formalia.html"><a href="formalia.html#ableitungen-in-r"><i class="fa fa-check"></i><b>6.2.3</b> Ableitungen in R</a></li>
<li class="chapter" data-level="6.2.4" data-path="formalia.html"><a href="formalia.html#maximierung-die-analytische-perspektive"><i class="fa fa-check"></i><b>6.2.4</b> Maximierung: die analytische Perspektive</a></li>
<li class="chapter" data-level="6.2.5" data-path="formalia.html"><a href="formalia.html#maximierung-die-algorithmische-perspektive"><i class="fa fa-check"></i><b>6.2.5</b> Maximierung: die algorithmische Perspektive</a></li>
<li class="chapter" data-level="6.2.6" data-path="formalia.html"><a href="formalia.html#subsec:keynes-expl"><i class="fa fa-check"></i><b>6.2.6</b> Anwendungsbeispiel</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="formalia.html"><a href="formalia.html#formalia-linalg"><i class="fa fa-check"></i><b>6.3</b> Lineare Algebra</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="formalia.html"><a href="formalia.html#linalg-expls"><i class="fa fa-check"></i><b>6.3.1</b> Einführungsbeispiele</a></li>
<li class="chapter" data-level="6.3.2" data-path="formalia.html"><a href="formalia.html#einführung-von-matrizen"><i class="fa fa-check"></i><b>6.3.2</b> Einführung von Matrizen</a></li>
<li class="chapter" data-level="6.3.3" data-path="formalia.html"><a href="formalia.html#grundregeln-der-matrizenalgebra"><i class="fa fa-check"></i><b>6.3.3</b> Grundregeln der Matrizenalgebra</a></li>
<li class="chapter" data-level="6.3.4" data-path="formalia.html"><a href="formalia.html#anwendungsbeispiel-1-das-einfache-keynesianische-modell"><i class="fa fa-check"></i><b>6.3.4</b> Anwendungsbeispiel 1: Das einfache Keynesianische Modell</a></li>
<li class="chapter" data-level="6.3.5" data-path="formalia.html"><a href="formalia.html#anwendungsbeispiel-2-ols-regression"><i class="fa fa-check"></i><b>6.3.5</b> Anwendungsbeispiel 2: OLS-Regression</a></li>
<li class="chapter" data-level="6.3.6" data-path="formalia.html"><a href="formalia.html#ols-deriv"><i class="fa fa-check"></i><b>6.3.6</b> Optional: Herleitung des OLS-Schätzers</a></li>
<li class="chapter" data-level="6.3.7" data-path="formalia.html"><a href="formalia.html#weiterführende-literatur"><i class="fa fa-check"></i><b>6.3.7</b> Weiterführende Literatur</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="formalia.html"><a href="formalia.html#formalia-dist"><i class="fa fa-check"></i><b>6.4</b> Analyse von Verteilungen</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="formalia.html"><a href="formalia.html#vert-begriff"><i class="fa fa-check"></i><b>6.4.1</b> Theoretische und empirische Verteilungen</a></li>
<li class="chapter" data-level="6.4.2" data-path="formalia.html"><a href="formalia.html#vert-kennzahlen"><i class="fa fa-check"></i><b>6.4.2</b> Kennzahlen zur Beschreibung empirischer Verteilungen</a></li>
<li class="chapter" data-level="6.4.3" data-path="formalia.html"><a href="formalia.html#vert-grafik"><i class="fa fa-check"></i><b>6.4.3</b> Grafische Komplemente zu klassischen Kennzahlen</a></li>
<li class="chapter" data-level="6.4.4" data-path="formalia.html"><a href="formalia.html#vert-bemerkungen"><i class="fa fa-check"></i><b>6.4.4</b> Abschließende Bemerkungen</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="stat-stoch.html"><a href="stat-stoch.html"><i class="fa fa-check"></i><b>7</b> Grundlagen der Wahrscheinlichkeitstheorie</a>
<ul>
<li class="chapter" data-level="" data-path="data.html"><a href="data.html#verwendete-pakete"><i class="fa fa-check"></i>Verwendete Pakete</a></li>
<li class="chapter" data-level="7.1" data-path="stat-stoch.html"><a href="stat-stoch.html#einleitung-wahrscheinlichkeitstheorie-und-statistik"><i class="fa fa-check"></i><b>7.1</b> Einleitung: Wahrscheinlichkeitstheorie und Statistik</a></li>
<li class="chapter" data-level="7.2" data-path="stat-stoch.html"><a href="stat-stoch.html#grundbegriffe-der-wahrscheinlichkeitstheorie"><i class="fa fa-check"></i><b>7.2</b> Grundbegriffe der Wahrscheinlichkeitstheorie</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="stat-stoch.html"><a href="stat-stoch.html#wahrscheinlichkeitstheoretische-modelle"><i class="fa fa-check"></i><b>7.2.1</b> Wahrscheinlichkeitstheoretische Modelle</a></li>
<li class="chapter" data-level="7.2.2" data-path="stat-stoch.html"><a href="stat-stoch.html#stochastische-unabhängigkeit"><i class="fa fa-check"></i><b>7.2.2</b> Stochastische Unabhängigkeit</a></li>
<li class="chapter" data-level="7.2.3" data-path="stat-stoch.html"><a href="stat-stoch.html#bedingte-wahrscheinlichkeiten"><i class="fa fa-check"></i><b>7.2.3</b> Bedingte Wahrscheinlichkeiten</a></li>
<li class="chapter" data-level="7.2.4" data-path="stat-stoch.html"><a href="stat-stoch.html#der-satz-von-bayes"><i class="fa fa-check"></i><b>7.2.4</b> Der Satz von Bayes</a></li>
<li class="chapter" data-level="7.2.5" data-path="stat-stoch.html"><a href="stat-stoch.html#das-gesetz-der-total-wahrscheinlichkeiten"><i class="fa fa-check"></i><b>7.2.5</b> Das Gesetz der total Wahrscheinlichkeiten</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="stat-stoch.html"><a href="stat-stoch.html#diskrete-wahrscheinlichkeitsmodelle"><i class="fa fa-check"></i><b>7.3</b> Diskrete Wahrscheinlichkeitsmodelle</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="stat-stoch.html"><a href="stat-stoch.html#diskrete-zufallsvariablen"><i class="fa fa-check"></i><b>7.3.1</b> Diskrete Zufallsvariablen</a></li>
<li class="chapter" data-level="7.3.2" data-path="stat-stoch.html"><a href="stat-stoch.html#beispiel-die-binomial-verteilung"><i class="fa fa-check"></i><b>7.3.2</b> Beispiel: die Binomial-Verteilung</a></li>
<li class="chapter" data-level="7.3.3" data-path="stat-stoch.html"><a href="stat-stoch.html#beispiel-die-poisson-verteilung"><i class="fa fa-check"></i><b>7.3.3</b> Beispiel: die Poisson-Verteilung</a></li>
<li class="chapter" data-level="7.3.4" data-path="stat-stoch.html"><a href="stat-stoch.html#hinweise-zu-diskreten-wahrscheinlichkeitsverteilungen"><i class="fa fa-check"></i><b>7.3.4</b> Hinweise zu diskreten Wahrscheinlichkeitsverteilungen</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="stat-stoch.html"><a href="stat-stoch.html#stetige-wahrscheinlichkeitsmodelle"><i class="fa fa-check"></i><b>7.4</b> Stetige Wahrscheinlichkeitsmodelle</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="stat-stoch.html"><a href="stat-stoch.html#stetige-zv"><i class="fa fa-check"></i><b>7.4.1</b> Stetige ZV</a></li>
<li class="chapter" data-level="7.4.2" data-path="stat-stoch.html"><a href="stat-stoch.html#beispiel-die-uniformverteilung"><i class="fa fa-check"></i><b>7.4.2</b> Beispiel: die Uniformverteilung</a></li>
<li class="chapter" data-level="7.4.3" data-path="stat-stoch.html"><a href="stat-stoch.html#beispiel-die-normalverteilung"><i class="fa fa-check"></i><b>7.4.3</b> Beispiel: die Normalverteilung</a></li>
<li class="chapter" data-level="7.4.4" data-path="stat-stoch.html"><a href="stat-stoch.html#beispiel-die-exponentialverteilung"><i class="fa fa-check"></i><b>7.4.4</b> Beispiel: die Exponentialverteilung</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="stat-stoch.html"><a href="stat-stoch.html#zusammenfassung-wahrscheinlichkeitsmodelle-für-einzelne-zv"><i class="fa fa-check"></i><b>7.5</b> Zusammenfassung Wahrscheinlichkeitsmodelle für einzelne ZV</a></li>
<li class="chapter" data-level="7.6" data-path="stat-stoch.html"><a href="stat-stoch.html#analyse-mehrerer-zufallsvariablen-gemeinsame-und-marginale-verteilungen"><i class="fa fa-check"></i><b>7.6</b> Analyse mehrerer Zufallsvariablen: gemeinsame und marginale Verteilungen</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="stat-stoch.html"><a href="stat-stoch.html#gemeinsame-verteilungen-für-diskrete-zv"><i class="fa fa-check"></i><b>7.6.1</b> Gemeinsame Verteilungen für diskrete ZV</a></li>
<li class="chapter" data-level="7.6.2" data-path="stat-stoch.html"><a href="stat-stoch.html#gemeinsame-verteilungen-für-stetige-zv"><i class="fa fa-check"></i><b>7.6.2</b> Gemeinsame Verteilungen für stetige ZV</a></li>
<li class="chapter" data-level="7.6.3" data-path="stat-stoch.html"><a href="stat-stoch.html#gemeinsame-kumulative-verteilungen"><i class="fa fa-check"></i><b>7.6.3</b> Gemeinsame kumulative Verteilungen</a></li>
<li class="chapter" data-level="7.6.4" data-path="stat-stoch.html"><a href="stat-stoch.html#marginale-verteilungen"><i class="fa fa-check"></i><b>7.6.4</b> Marginale Verteilungen</a></li>
<li class="chapter" data-level="7.6.5" data-path="stat-stoch.html"><a href="stat-stoch.html#bedingte-verteilungen-und-bedinge-momente"><i class="fa fa-check"></i><b>7.6.5</b> Bedingte Verteilungen und bedinge Momente</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="desk-stat.html"><a href="desk-stat.html"><i class="fa fa-check"></i><b>8</b> Wiederholung: Deskriptive Statistik</a>
<ul>
<li class="chapter" data-level="" data-path="desk-stat.html"><a href="desk-stat.html#verwendete-pakete-und-datensätze"><i class="fa fa-check"></i>Verwendete Pakete und Datensätze</a></li>
<li class="chapter" data-level="8.1" data-path="desk-stat.html"><a href="desk-stat.html#kennzahlen-zur-lage-und-streuung-der-daten"><i class="fa fa-check"></i><b>8.1</b> Kennzahlen zur Lage und Streuung der Daten</a></li>
<li class="chapter" data-level="8.2" data-path="desk-stat.html"><a href="desk-stat.html#korrelationsmaße"><i class="fa fa-check"></i><b>8.2</b> Korrelationsmaße</a></li>
<li class="chapter" data-level="8.3" data-path="desk-stat.html"><a href="desk-stat.html#descVis"><i class="fa fa-check"></i><b>8.3</b> Hinweise zur quantitativen und visuellen Datenbeschreibung</a></li>
<li class="chapter" data-level="8.4" data-path="desk-stat.html"><a href="desk-stat.html#zusamenfassung"><i class="fa fa-check"></i><b>8.4</b> Zusamenfassung</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="stat-rep.html"><a href="stat-rep.html"><i class="fa fa-check"></i><b>9</b> Wiederholung: Drei Verfahren der schließenden Statistik</a>
<ul>
<li class="chapter" data-level="" data-path="data.html"><a href="data.html#verwendete-pakete"><i class="fa fa-check"></i>Verwendete Pakete</a></li>
<li class="chapter" data-level="9.1" data-path="stat-rep.html"><a href="stat-rep.html#punktschätzung"><i class="fa fa-check"></i><b>9.1</b> Punktschätzung</a></li>
<li class="chapter" data-level="9.2" data-path="stat-rep.html"><a href="stat-rep.html#hypothesentests"><i class="fa fa-check"></i><b>9.2</b> Hypothesentests</a></li>
<li class="chapter" data-level="9.3" data-path="stat-rep.html"><a href="stat-rep.html#berechnung-von-konfidenzintervallen"><i class="fa fa-check"></i><b>9.3</b> Berechnung von Konfidenzintervallen</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="linmodel.html"><a href="linmodel.html"><i class="fa fa-check"></i><b>10</b> Lineare statistische Modelle in R</a>
<ul>
<li class="chapter" data-level="10.1" data-path="linmodel.html"><a href="linmodel.html#einleitung-und-überblick"><i class="fa fa-check"></i><b>10.1</b> Einleitung und Überblick</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="linmodel.html"><a href="linmodel.html#einführung-in-die-lineare-regression"><i class="fa fa-check"></i><b>10.1.1</b> Einführung in die lineare Regression</a></li>
<li class="chapter" data-level="10.1.2" data-path="linmodel.html"><a href="linmodel.html#einführungsbeispiel"><i class="fa fa-check"></i><b>10.1.2</b> Einführungsbeispiel</a></li>
<li class="chapter" data-level="10.1.3" data-path="linmodel.html"><a href="linmodel.html#überblick-über-die-inhalte-des-kapitels"><i class="fa fa-check"></i><b>10.1.3</b> Überblick über die Inhalte des Kapitels</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="linmodel.html"><a href="linmodel.html#lin-grundlagen"><i class="fa fa-check"></i><b>10.2</b> Grundlagen der einfachen linearen Regression</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="linmodel.html"><a href="linmodel.html#grundlegende-begriffe"><i class="fa fa-check"></i><b>10.2.1</b> Grundlegende Begriffe</a></li>
<li class="chapter" data-level="10.2.2" data-path="linmodel.html"><a href="linmodel.html#schätzung-mit-der-kleinste-quadrate-methode"><i class="fa fa-check"></i><b>10.2.2</b> Schätzung mit der Kleinste-Quadrate-Methode</a></li>
<li class="chapter" data-level="10.2.3" data-path="linmodel.html"><a href="linmodel.html#ols-ass"><i class="fa fa-check"></i><b>10.2.3</b> Annahmen für den OLS Schätzer</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="linmodel.html"><a href="linmodel.html#lin-kennzahlen"><i class="fa fa-check"></i><b>10.3</b> Kennzahlen in der linearen Regression</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="linmodel.html"><a href="linmodel.html#erklärte-varianz-und-das-r2"><i class="fa fa-check"></i><b>10.3.1</b> Erklärte Varianz und das <span class="math inline">\(R^2\)</span></a></li>
<li class="chapter" data-level="10.3.2" data-path="linmodel.html"><a href="linmodel.html#hypothesentests-und-statistische-signifikanz"><i class="fa fa-check"></i><b>10.3.2</b> Hypothesentests und statistische Signifikanz</a></li>
<li class="chapter" data-level="10.3.3" data-path="linmodel.html"><a href="linmodel.html#konfidenzintervalle-für-die-schätzer"><i class="fa fa-check"></i><b>10.3.3</b> Konfidenzintervalle für die Schätzer</a></li>
<li class="chapter" data-level="10.3.4" data-path="linmodel.html"><a href="linmodel.html#zur-rolle-der-stichprobengröße"><i class="fa fa-check"></i><b>10.3.4</b> Zur Rolle der Stichprobengröße</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="linmodel.html"><a href="linmodel.html#lin-multi"><i class="fa fa-check"></i><b>10.4</b> Multiple lineare Regression</a></li>
<li class="chapter" data-level="10.5" data-path="linmodel.html"><a href="linmodel.html#stat-ablauf"><i class="fa fa-check"></i><b>10.5</b> Zum Ablauf einer Regression</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="advlin.html"><a href="advlin.html"><i class="fa fa-check"></i><b>11</b> Fortgeschrittene Themen der linearen Regression</a></li>
<li class="chapter" data-level="12" data-path="nonlin.html"><a href="nonlin.html"><i class="fa fa-check"></i><b>12</b> Ausgewählte nichtlineare Schätzverfahren</a></li>
<li class="chapter" data-level="13" data-path="outlook.html"><a href="outlook.html"><i class="fa fa-check"></i><b>13</b> Ausblick</a></li>
<li class="chapter" data-level="14" data-path="markdown.html"><a href="markdown.html"><i class="fa fa-check"></i><b>14</b> Eine kurze Einführung in R Markdown</a></li>
<li class="chapter" data-level="15" data-path="git.html"><a href="git.html"><i class="fa fa-check"></i><b>15</b> Eine kurze Einführung in die Versionskontrolle mit Git</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R für die sozio-ökonomische Forschung</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="vis" class="section level1" number="5">
<h1><span class="header-section-number">Chapter 5</span> Visualisierung von Daten</h1>
<div id="verwendete-pakete" class="section level2 unnumbered">
<h2>Verwendete Pakete</h2>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="vis.html#cb450-1" aria-hidden="true"></a><span class="kw">library</span>(here)</span>
<span id="cb450-2"><a href="vis.html#cb450-2" aria-hidden="true"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb450-3"><a href="vis.html#cb450-3" aria-hidden="true"></a><span class="kw">library</span>(data.table)</span>
<span id="cb450-4"><a href="vis.html#cb450-4" aria-hidden="true"></a><span class="kw">library</span>(ggpubr)</span>
<span id="cb450-5"><a href="vis.html#cb450-5" aria-hidden="true"></a><span class="kw">library</span>(ggrepel)</span>
<span id="cb450-6"><a href="vis.html#cb450-6" aria-hidden="true"></a><span class="kw">library</span>(scales)</span>
<span id="cb450-7"><a href="vis.html#cb450-7" aria-hidden="true"></a><span class="kw">library</span>(tufte)</span>
<span id="cb450-8"><a href="vis.html#cb450-8" aria-hidden="true"></a><span class="kw">library</span>(gapminder)</span>
<span id="cb450-9"><a href="vis.html#cb450-9" aria-hidden="true"></a><span class="kw">library</span>(viridis)</span>
<span id="cb450-10"><a href="vis.html#cb450-10" aria-hidden="true"></a><span class="kw">library</span>(latex2exp)</span>
<span id="cb450-11"><a href="vis.html#cb450-11" aria-hidden="true"></a><span class="kw">library</span>(WDI)</span>
<span id="cb450-12"><a href="vis.html#cb450-12" aria-hidden="true"></a><span class="kw">library</span>(countrycode)</span></code></pre></div>
</div>
<div id="einleitung" class="section level2 unnumbered">
<h2>Einleitung</h2>
<p>In diesem Kapitel lernen Sie mit Hilfe des Pakets <code>ggplot2</code> Ihre Daten
ansprechend zu visualisieren.</p>
<p>Der erste Abschnitt ist dabei optional und beschäftigt sich mit den theoretischen
Grundlagen von <code>ggplot2</code>.
Hier diskutieren wir die Abgrenzung zwischen dem <code>ggplot2</code>- und <code>base</code>-Ansatz
zur Datenvisualisierung in R und führen mit der in <span class="citation">Wickham (<a href="#ref-wickhamggplot" role="doc-biblioref">2010</a>)</span> entwickelten
<a href="#vis-grammar">Grammatik für Grafiken</a> das theoretische Fundament für <code>ggplot2</code> ein.
Diese beiden Abschnitte sind recht abstrakt, aber helfen Ihnen die interne Logik
von <code>ggplot2</code> besser zu verstehen.</p>
<p>Im zweiten Abschnitt werden die grundlegenden <a href="#vis-elements">Elemente einer Grafik</a>
in <code>ggplot2</code> beschrieben und eine erste Beispielgrafik Stück für Stück erstellt.
Der dritte Abschnitt erläutert anhand von Beispielen wie die
<a href="#vis-examples">gängigsten Visualisierungsarten</a> in <code>ggplot2</code> erstellt werden
können.</p>
<p>Danach werden ausgewählte <a href="vis.html#vis-adv">fortgeschrittene Techniken</a>, wie z.B. die
Visualisierung von Regressionsergebnissen oder das Erstellen von Plots mit
mehreren Abbildungen, eingeführt.
Dabei greifen wir an einigen optionalen Stellen natürlich auf das Kapitel
zur linearen Regression vor (siehe Kapitel <a href="linmodel.html#linmodel">10</a>), allerdings sollten
die Inhalte hier auch ohne tieferen Kenntnisse der Regressionsanalyse
verständlich sein.</p>
<p>Im fünften Abschnitt zeigen wir aufbauend auf <span class="citation">Schwabish (<a href="#ref-schwabischVis" role="doc-biblioref">2014</a>)</span> wie
<a href="vis.html#vis-fehler">typische Fehler</a> in der Datenvisualisierung vermieden werden können.
Der sechste Abschnitt illustriert ausgewählte
<a href="#vis-manip">Manipulationsstrategien</a> bei der Datenvisualisierung.
Im letzten Abschnitt finden Sie Empfehlungen für <a href="#vis-lit">weiterführende Literatur</a>.</p>
</div>
<div id="vis-theorie" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Optional: Theoretische Grundlagen</h2>
<div id="vis-base-ggplot2" class="section level3" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> <code>ggplot2</code> vs. <code>base plot</code></h3>
<p>Wie so oft bietet R verschiedene Ansätze zur Datenvisualisierung.
Die beiden prominentesten sind dabei die in der Basisversion von R integrierten
Visualisierungsfunktionen, häufig als <code>base</code> bezeichnet, und das Paket
<a href="https://github.com/tidyverse/ggplot2">ggplot2</a>
<span class="citation">(Wickham <a href="#ref-R-ggplot2" role="doc-biblioref">2016</a>)</span>.</p>
<p>Die Frage ‘Welcher Ansatz ist nun besser?’ ist nicht leicht zu beantworten,
insbesondere da beiden Ansätzen eine sehr unterschiedliche Design-Philosophie
zugrunde liegt:
<code>base</code> funktioniert dabei wie ein Stift und ein Blatt Papier:
Sie haben ein leeres Blatt, welches Sie mit dem Aufruf bestimmter <code>plot</code>-Funktionen
beschreiben.
Hierbei wird kein besonderes R-Objekt erstellt, in dem die Grafik gespeichert
wird - vielmehr speichern Sie am Ende ihr ‘vollgemaltes Blatt’ entweder als Bild
ab, oder Sie verwerfen es und beschreiben ein neues ‘Blatt’.</p>
<p>In <code>ggplot2</code> werden die Grafiken dagegen ‘scheibchenweise’ in einer Art
Liste zusammengesetzt.
Diese Liste enhält dann eine vollständige Beschreibung der Grafik im Sinne einer
geschichteten <a href="vis.html#grammar">Grammatik für Grafiken</a>.
Dabei findet kein ‘Malprozess’ statt: die finale Grafik wird erst dann erstellt
wenn auf die resultierende Liste eine <code>print</code>-Funktion angewandt wird.</p>
<p>Am Ende des Tages werden Sie wenige Dinge finden, die Sie nur mit <code>base</code> oder
nur mit <code>ggplot2</code> erreichen können.
Und wahrscheinlich gilt für die meisten, dass sie einfach bei dem Ansatz hängen
bleiben, der Ihnen am Anfang intuitiv am besten gefallen hat.
Ich habe in der <a href="vis.html#vis-links">weiterführenden Literatur</a> einige Diskussionsbeiträge
zum Thema <code>base</code> vs. <code>ggplot2</code> gesammelt und fasse mich hier daher kurz:
in dieser Einführung verwenden wir <code>ggplot2</code>.
Ich finde, dass die resultierenden Grafiken einen Tick schöner, die Syntax
ein wenig einfacher und die Dokumentation im Internet ein wenig besser ist.
Vor allem finde ich den Code leichter lesbar und den von <span class="citation">Wickham (<a href="#ref-wickhamggplot" role="doc-biblioref">2010</a>)</span>
vorgeschlagenen <em>Grammar of Graphics</em> Ansatz sehr intuitiv.</p>
<p>Wenn Sie dagegen lieber mit <code>base</code> arbeiten wollen - kein Problem. Es finden
sich im Internet gerade auf Englisch viele exzellente Einführungen.
Und im Endeffekt ist die einzige relevante Frage:
haben Sie auf eine für Sie möglichst unterhaltsame Art und Weise einen guten
Graphen produziert?
Welches Paket Sie dafür verwendet haben, interessiert schlussendlich niemanden…</p>
</div>
<div id="grammar" class="section level3" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> Einleitung zu Wickham’s <em>Grammar of Graphics</em></h3>
<p>Die Funktion von <code>ggplot2</code> ist leichter nachzuvollziehen wenn man weiß wodurch
das Paket inspiriert wurde.
In diesem Fall war es das Konzept der <em>Grammar of Graphics</em> <span class="citation">(Wilkinson <a href="#ref-GrammarGraphics" role="doc-biblioref">1999</a>)</span>,
beziehungsweise die Interpretation des Konzepts von <span class="citation">Wickham (<a href="#ref-wickhamggplot" role="doc-biblioref">2010</a>)</span>.</p>
<p>Dieses Konzept startet mit dem Wunsch eine ‘Grammatik’ für Grafiken zu entwickeln.
Eine Grammatik wird hier als eine Sammlung von Konzepten verstanden aus denen
sämtliche Grafiken hergestellt werden können- eine vollständige Beschreibung der
Grafik sozusagen.
So wie die Grammatik der deutschen Sprache eine Sammlung von Wörtern und Regeln
darstellt, aus denen jede Menge (mehr oder weniger sinnvolle) Aussagen hergestellt
werden können, verstehen wir unter einer Grammatik für Grafiken eine Sammlung von
Konzepten und Regeln aus denen wir jede Menge (mehr oder weniger sinnvolle)
Grafiken herstellen können.</p>
<p>Im Gegensatz zu der ursprünglich von <span class="citation">Wilkinson (<a href="#ref-GrammarGraphics" role="doc-biblioref">1999</a>)</span> vorgestellten Grammatik
folgt die Grammatik von <span class="citation">Wickham (<a href="#ref-wickhamggplot" role="doc-biblioref">2010</a>)</span> einer klar geordneten Struktur:
jeder Teil der Grammatik ist unabhängig vom Rest, und eine Grafik wird
vollends dadurch spezifiziert, dass die einzelnen Teile Stück für Stück
zusammen geführt werden.</p>
<p>Nach Wickham’s Grammatik besteht jede statistische Grafik aus den folgenden
Komponenten:</p>
<ol style="list-style-type: decimal">
<li><p>Einem <strong>Standard-Datensatz</strong> gemeinsam mit den Funktionen (<em>engl.: mappings</em>),
die bestimmten Variablen aus dem Datensatz eine so genannten <strong>Ästhetik</strong>
(<em>engl.: aesthetic</em>) zuweisen.
Die sogenannten <em>mappings</em> (es handelt sich dabei eigentlich um einfache Funktionen)
verlinken eine Variable in den Daten mit einer Ästhetik in der Grafik.
Beispielsweise könnten wir die Variable ‘Jahr’ in den Daten mit der Ästhetik
‘x-Achse’, die Variable ‘BIP’ mit der Ästhetik ‘y-Achse’ und die Variable ‘Land’
mit der Ästhetik ‘Farbe’ verlinken.</p></li>
<li><p>Eine oder mehrere <strong>Ebenen</strong>; jede Ebene besteht dabei aus einem geometrischem
Objekt, einer statistischen Transformation, einer Positionszuweisung und,
optionalerweise, einem von (1) abweichenden besonderen Datensatz und den
entsprechenden <em>aesthetic mappings</em>.</p></li>
</ol>
<ul>
<li>Von besonderer Relevanz sind dabei die geometrischen Objekte, <code>geoms</code>, denn
sie bestimmen um was für einen Plot es sich handelt: verwenden wir als <code>geoms</code>
Punkte bekommen wir ein Streudiagramm, bei Linien als <code>geoms</code> wird es ein Linienplot, usw.
Die <code>geoms</code> visualisieren also die Ästhetiken, aber bestimmte <code>geoms</code> können natürlich
nur bestimmte Ästhetiken repräsentieren: der <code>geom</code> ‘Punkt’ z.B. hat eine <code>x</code> und
eine <code>y</code>-Komponente (also eine <code>Position</code>), eine <code>Größe</code>, eine <code>Form</code> und eine <code>Farbe</code>.
Andere Ästhetiken ergeben für Punkte keinen Sinn.</li>
<li>Da wir nicht notwendigerweise die exakten Werte der Variable an die Ästhetik
weitergeben, wird die Möglichkeit einer <em>statistischen Transformation</em> offen
gelassen: eventuell wird nicht der Variablenwert, sondern z.B. der Logarithmus
dieses Wertes an die entsprechende Ästhetik weitergegeben.
Natürlich kann die statistische Transformation auch weggelassen werden - in diesem
Fall sprechen wir von der Transformation <code>identity</code> - die Daten werden nicht
verändert, sondern direkt an die Ästhetik weitergegeben.
Andere häufig verwendete Transformationen sind <code>boxplot</code> (wenn wir die Daten in
einem Boxplot zusammenfassen wollen), <code>bin</code> (wenn wir die Daten in einem diskreten
Histogramm darstellen wollen) oder <code>density</code> (wenn wir an der Wahrscheinlichkeitsdichte
der Beobachtungen interessiert sind).</li>
<li>Die Positionszuweisungen spielen nur eine Rolle wenn die Positionen der
<code>geoms</code> angepasst werden müssen, z.B. um Überlappungen zu vermeiden. Ein typisches
Beispiel ist auch das Schachteln von Balkendiagrammen.</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li><p>Einer <strong>Skala</strong> für jedes <em>aesthetic mapping</em>. Sie beschreibt die genaue Art
des Mappings zwischen Daten und Ästhetiken. Entsprechend handelt es sich bei einer
Skala in diesem Sinne hier um eine <strong>Funktion gemeinsam mit Parametern</strong>.
Am besten kann man sich das bei einer farblichen Skala vorstellen, die bestimmte
Werte in einen Farbenraum abbildet.</p></li>
<li><p>Einem <strong>Koordinatensystem</strong>, welches zu den Daten und Ästhetiken und
geometrischen Objekten passt. Am häufigsten wird hier sicher das
kartesische Koordinatensystem verwendet, aber für Kuchendiagramme bietet sich
z.B. das polare Koordinatensystem an.</p></li>
<li><p>Eine optionale <strong>Facettenspezifikation</strong> (<em>engl.: facet specification</em>), die
verwendet werden kann um die Daten in verschiedene Teil-Datensätze aufzusplitten.
So möchten wir vielleicht die Dynamik des BIP über die Zeit abbilden, aber
einen separaten Unter-Plot für jedes einzelne Land erstellen. In diesem Fall
verwenden wir eine Facettenspezifikation, die für jedes Land einen Teildatensatz
erstellt.</p></li>
</ol>
<p>Alle Komponenten bleiben dabei unabhängig voneinander:
die Daten z.B. sind unabhängig vom Rest, weil die gleiche Grafik für
unterschiedliche Daten produziert werden kann:
“Daten machen aus einer abstrakten Grafik eine konkrete Grafik” <span class="citation">(Wickham <a href="#ref-wickhamggplot" role="doc-biblioref">2010</a>, 10)</span>.</p>
<p>Das Besondere an der so formulierten Grammatik ist, dass man mit den Komponenten
1 - 5 so ziemlich jede statistische Grafik beschreiben kann.
Das Paket <code>ggplot2</code> macht sich das zunutze:
es formalisiert diese Regeln in R, sodass Sie mit dem entsprechenden R Code
quasi jede Grafik beschreiben können - und dann durch R erstellen lassen können.
Dadurch ist auch die Vorgehensweise motiviert, zunächst ein Objekt mit der
<em>Beschreibung</em> der Grafik zu erstellen und die Grafik dann am Ende durch
Anwendung einer <code>print</code>-Funktion auf diese Beschreibung herzustellen.
So können Sie das Objekt mit der Beschreibung vorher bereits speichern und
weitergeben und dann zu einem späteren Zeitpunkt erst die eigentliche Grafik
erstellen.
Dieses Vorgehen machen wir uns später zunutze wenn wir mehrere Sub-Abbildungen
in einer großen Grafik <a href="vis.html#vis-viele-plots">gemeinsam abbilden wollen</a>.</p>
<p>Wie Sie später sehen werden repräsentiert die Syntax von <code>ggplot2</code> genau diese
theoretische Beschreibung von Grafiken.
Hier greifen wir mit einem kleinen Beispiel vor:</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb451-1"><a href="vis.html#cb451-1" aria-hidden="true"></a>example_data &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</span>
<span id="cb451-2"><a href="vis.html#cb451-2" aria-hidden="true"></a>  <span class="dt">Variab1=</span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, </span>
<span id="cb451-3"><a href="vis.html#cb451-3" aria-hidden="true"></a>  <span class="dt">Variab2=</span><span class="dv">2</span><span class="op">:</span><span class="dv">4</span>, </span>
<span id="cb451-4"><a href="vis.html#cb451-4" aria-hidden="true"></a>  <span class="dt">Variab3=</span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>)</span>
<span id="cb451-5"><a href="vis.html#cb451-5" aria-hidden="true"></a>                           )</span>
<span id="cb451-6"><a href="vis.html#cb451-6" aria-hidden="true"></a></span>
<span id="cb451-7"><a href="vis.html#cb451-7" aria-hidden="true"></a>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(</span>
<span id="cb451-8"><a href="vis.html#cb451-8" aria-hidden="true"></a>  <span class="dt">data =</span> example_data, </span>
<span id="cb451-9"><a href="vis.html#cb451-9" aria-hidden="true"></a>  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>Variab1, </span>
<span id="cb451-10"><a href="vis.html#cb451-10" aria-hidden="true"></a>                <span class="dt">y=</span>Variab2, </span>
<span id="cb451-11"><a href="vis.html#cb451-11" aria-hidden="true"></a>                <span class="dt">color=</span>Variab3)</span>
<span id="cb451-12"><a href="vis.html#cb451-12" aria-hidden="true"></a>  ) <span class="op">+</span><span class="st"> </span></span>
<span id="cb451-13"><a href="vis.html#cb451-13" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">layer</span>( </span>
<span id="cb451-14"><a href="vis.html#cb451-14" aria-hidden="true"></a>    <span class="dt">geom =</span> <span class="st">&quot;point&quot;</span>, </span>
<span id="cb451-15"><a href="vis.html#cb451-15" aria-hidden="true"></a>    <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>, </span>
<span id="cb451-16"><a href="vis.html#cb451-16" aria-hidden="true"></a>    <span class="dt">position =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb451-17"><a href="vis.html#cb451-17" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_color_discrete</span>(</span>
<span id="cb451-18"><a href="vis.html#cb451-18" aria-hidden="true"></a>    <span class="dt">aesthetics =</span> <span class="kw">c</span>(<span class="st">&quot;color&quot;</span>)</span>
<span id="cb451-19"><a href="vis.html#cb451-19" aria-hidden="true"></a>    ) <span class="op">+</span><span class="st"> </span></span>
<span id="cb451-20"><a href="vis.html#cb451-20" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">coord_cartesian</span>(</span>
<span id="cb451-21"><a href="vis.html#cb451-21" aria-hidden="true"></a>    <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">4</span>), </span>
<span id="cb451-22"><a href="vis.html#cb451-22" aria-hidden="true"></a>    <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">5</span>)</span>
<span id="cb451-23"><a href="vis.html#cb451-23" aria-hidden="true"></a>    ) </span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-3-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Die Funktion <code>ggplot2::ggplot()</code> erstellt eine Liste, in der die
Grafik-Spezifikationen gespeichert werden und akzeptiert über die Argumente
<code>data</code> und <code>mapping</code> die Standard-Daten und Standard-Mappings.<a href="#fn27" class="footnote-ref" id="fnref27"><sup>27</sup></a>
Es korrespondiert damit zu Punkt (1) oben.</p>
<p>Als nächstes wird mit <code>ggplot2::layer()</code> eine neue Ebene spezifiziert.
Wie in der Theorie spezifizieren wir die Ebene über das Argument <code>geom</code> bezüglich
der auf ihr abzubildenden geometrischen Objekte (hier: Punkte), über <code>stat</code>
bezüglich der zu verwendeten statistischen Transformation (hier: keine Transformation,
sondern die Daten identisch zu ihren Werten im Standard-Datensatz) und über
<code>position</code> bezüglich der Positionszuweisungen (auch hier: keine besonderen
Positionszuweisungen).</p>
<p>Als nächstes spezifizieren wir die Skala. Für die Ästhetik ‘Position’ der Variablen
<code>Variab1</code> und <code>Variab2</code> ist keine Übersetzung notwendig, aber für den Link zwischen den Werten
von Variable <code>Variab3</code> und der Ästhetik ‘Farbe’ müssen wir eine explizite Funktion verwenden.
Mit der Funktion <code>ggplot2::scale_color_discrete()</code> weisen wir also jedem Wert der
(diskreten) Variable <code>Variab3</code> eine Farbe zu.</p>
<p>Schließlich legen wir mit <code>ggplot2::coord_cartesian()</code> noch das zu verwendende
Koordinatensystem fest indem wir mit den Argumenten <code>xlim</code> und <code>ylim</code> die Länge
der x- und y-Achse spezifizieren.
Eine besondere Facettenspezifikation verwenden wir hier dagegen nicht.</p>
<p>Wie Sie später sehen werden, verwenden wir in <code>ggplot2</code> häufig Abkürzungen für
die in diesem Beispiel verwendeten ‘Originalfunktionen’.
So gibt es für eine Ebene mit dem <code>geom</code> ‘Punkte’ die Abkürzung <code>ggplot2::geom_point()</code>.
Auch muss nicht jedes Element explizit spezifiziert werden:
da z.B. die meisten Grafiken ein kartesisches Koordinatensystem verwenden,
ist dies als Standard-Koordinatensystem in <code>ggplot2</code> implementiert und Sie müssen
nur dann explizit ein Koordinatensystem spezifizieren wenn Sie vom Standardwert abweichen wollen.</p>
<p>Wenn Sie sich genauer mit der hierarchischen Grammatik beschäftigen wollen,
die <code>ggplot2</code> zugrundeliegt, kann ich Ihnen den Originalartikel von <span class="citation">Wickham (<a href="#ref-wickhamggplot" role="doc-biblioref">2010</a>)</span> empfehlen.</p>
</div>
</div>
<div id="vis-elemente" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Grundlegende Elemente von <code>ggplot2</code>-Grafiken</h2>
<div id="elemente-eines-ggplot" class="section level3" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Elemente eines <code>ggplot</code></h3>
<p>Analog zu der gerade vorgestellten <a href="vis.html#grammar">Theorie</a> besteht jeder <code>ggplot</code>
aus den folgenden Komponenten:</p>
<ul>
<li><p>Dem <strong>Basisobjekt</strong>, welches einen leeren Plot erstellt und die <strong>Standardwerte</strong>
für den zu verwendeten Datensatz und die entsprechenden Ästhetiken definiert.</p></li>
<li><p>Verschiedenen <strong>Ebenen</strong> (<code>layer</code>), auf denen die - ggf. statistisch transformierten -
Variablen der Daten auf bestimmten Ästhetiken (<code>aesthetics</code>) als geometrische
Objekte (<code>geoms</code>) auf den entsprechenden Positionen (<code>position</code>) abgebilet werden.</p></li>
</ul>
<p>Die folgenden Elemente sind ebenfalls Teil eines jeden Plots, werden aber nicht
notwendigerweise explizit spezifiziert sondern einfach in der sich aus den
Ebenen ergebenden Standard-Spezifikation übernommen:</p>
<ul>
<li><strong>Skalen</strong>: Für jedes <code>mapping</code> zwischen einer Variable und einer Ästhetik
gibt es eine Skala, die mit entsprechenden Funktionen geändert werden kann.
So modifiziert die Funktion <code>ggplot2::scale_color_discrete()</code> das Mapping zwischen einer
diskreten Variable und der Farbskala.</li>
<li><strong>Labels</strong>: Jeder Plot kann mit Labels, wie Titeln, Achsenbeschriftungen,
Legenden oder sonstigem Text ergänzt werden.</li>
<li><strong>Koordinaten</strong>: Standardmäßig bilden wir Grafiken auf einem
kartesischen Koordinatensystem ab. Sie können die Ausschnitte dieses
Koordinatensystems beliebig anpassen, die Achsen transformieren,
oder sogar ein anderes Koordinatensystem verwenden (siehe z.B.
<a href="https://www.statworx.com/de/blog/coordinate-systems-in-ggplot2-easily-overlooked-and-rather-underrated/">hier</a>).</li>
<li><strong>Facetten</strong> Wenn wir mehrere Facetten verwenden teilen wir die Daten gemäß
einer Variable in mehrere Subdatensätze auf und bilden alle separat ab. Unten
sehen Sie ein Beispiel wo wir separate Abbildungen für jedes Land im Datensatz
erstellen.</li>
</ul>
<p>Hier ist eine Beispielimplementierung:</p>
<div class="sourceCode" id="cb452"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb452-1"><a href="vis.html#cb452-1" aria-hidden="true"></a>offenheit_plot &lt;-<span class="st"> </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>( <span class="co"># &lt;- Erstellt das Basisobjekt</span></span>
<span id="cb452-2"><a href="vis.html#cb452-2" aria-hidden="true"></a>  <span class="dt">data =</span> offenheit,  <span class="co"># &lt;- Spezifiziert Standard-Datensatz</span></span>
<span id="cb452-3"><a href="vis.html#cb452-3" aria-hidden="true"></a>  <span class="dt">mapping =</span> <span class="kw">aes</span>( <span class="co"># &lt;- Spezifiziert die Mappings zu den Ästhetiken</span></span>
<span id="cb452-4"><a href="vis.html#cb452-4" aria-hidden="true"></a>    <span class="dt">x=</span>trade_total_GDP, <span class="co"># Verbinde Ästhetik &#39;x-Achse&#39; &amp; Variable &#39;trade_total_GDP&#39; </span></span>
<span id="cb452-5"><a href="vis.html#cb452-5" aria-hidden="true"></a>    <span class="dt">y=</span>gvnt_cons) <span class="co"># Verbinde Ästhetik &#39;y-Achse&#39; &amp; Variable &#39;gvnt_cons&#39; </span></span>
<span id="cb452-6"><a href="vis.html#cb452-6" aria-hidden="true"></a>  ) <span class="op">+</span></span>
<span id="cb452-7"><a href="vis.html#cb452-7" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">layer</span>( <span class="co"># &lt;- Erstelle einen neuen Layer</span></span>
<span id="cb452-8"><a href="vis.html#cb452-8" aria-hidden="true"></a>    <span class="dt">geom =</span> <span class="st">&quot;point&quot;</span>, <span class="co"># Die Geoms auf diesem Layer sind Punkte</span></span>
<span id="cb452-9"><a href="vis.html#cb452-9" aria-hidden="true"></a>    <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="co"># Die Daten werden nicht statistisch transformiert</span></span>
<span id="cb452-10"><a href="vis.html#cb452-10" aria-hidden="true"></a>    <span class="dt">position =</span> <span class="st">&quot;identity&quot;</span>, <span class="co"># Positionen der Daten werden nicht geändert</span></span>
<span id="cb452-11"><a href="vis.html#cb452-11" aria-hidden="true"></a>    <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">color=</span>Land) <span class="co"># Zusätzlich zur Standard-Ästhetik oben: verbinde</span></span>
<span id="cb452-12"><a href="vis.html#cb452-12" aria-hidden="true"></a>                              <span class="co"># Variable &#39;Land&#39; mit der Ästhetik &#39;color&#39;</span></span>
<span id="cb452-13"><a href="vis.html#cb452-13" aria-hidden="true"></a>    ) <span class="op">+</span></span>
<span id="cb452-14"><a href="vis.html#cb452-14" aria-hidden="true"></a><span class="st">  </span><span class="co"># Erstelle noch einen Layer mit der geom &#39;smooth&#39; (Abkürzung für layer(...)):</span></span>
<span id="cb452-15"><a href="vis.html#cb452-15" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_smooth</span>( </span>
<span id="cb452-16"><a href="vis.html#cb452-16" aria-hidden="true"></a>    <span class="dt">method =</span> <span class="st">&quot;lm&quot;</span> <span class="co"># &lt;- Verwende eine lineares Modell für die geom &#39;smooth&#39;</span></span>
<span id="cb452-17"><a href="vis.html#cb452-17" aria-hidden="true"></a>    ) <span class="op">+</span></span>
<span id="cb452-18"><a href="vis.html#cb452-18" aria-hidden="true"></a><span class="st">  </span><span class="co"># Gebe der Skala der x-Achse einen neuen Namen:</span></span>
<span id="cb452-19"><a href="vis.html#cb452-19" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_x_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;Handel / BIP (in %)&quot;</span>) <span class="op">+</span></span>
<span id="cb452-20"><a href="vis.html#cb452-20" aria-hidden="true"></a><span class="st">  </span><span class="co"># Gebe der Skala der y-Achse einen neuen Namen:</span></span>
<span id="cb452-21"><a href="vis.html#cb452-21" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;Staatsausgaben&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb452-22"><a href="vis.html#cb452-22" aria-hidden="true"></a><span class="st">  </span><span class="co"># Gebe der Farbskala einen neuen Namen:</span></span>
<span id="cb452-23"><a href="vis.html#cb452-23" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_color_discrete</span>(<span class="dt">name=</span><span class="st">&quot;Land&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb452-24"><a href="vis.html#cb452-24" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Handelsoffenheit &amp; Staatsausgaben 1990-2018&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="co"># Ergänze Plot-Titel</span></span>
<span id="cb452-25"><a href="vis.html#cb452-25" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">coord_cartesian</span>() <span class="op">+</span><span class="st"> </span><span class="co"># Verwende eine kartesisches Koordinatensystem</span></span>
<span id="cb452-26"><a href="vis.html#cb452-26" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">facet_null</span>()  <span class="co"># Verwende nur eine Facette</span></span></code></pre></div>
<p>Dieser Code erstellt die einzelnen Elemente des Plots, die in <code>ggplot2</code>
separat erstellt und am Ende übereinander gelegt werden:</p>
<pre><code>#&gt; `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-7-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Daraus ergibt sich dann der Gesamtplot:</p>
<pre><code>#&gt; `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-8-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<pre><code>#&gt; `geom_smooth()` using formula &#39;y ~ x&#39;
#&gt; `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p>Die Rolle der Facetten wird hier deutlich:</p>
<pre><code>#&gt; `geom_smooth()` using formula &#39;y ~ x&#39;
#&gt; `geom_smooth()` using formula &#39;y ~ x&#39;
#&gt; `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-10-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Der modulare Aufbau eines <code>ggplot</code> macht es einfach eine Grafik sukzessive zu ändern:
wenn Sie z.B. von einem Streudiagramm zu einem Liniendiagramm wechseln wollen
müssen Sie nur die <code>geoms</code> ändern - die restlichen Komponenten des Plots
können identisch bleiben:</p>
<div class="sourceCode" id="cb457"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb457-1"><a href="vis.html#cb457-1" aria-hidden="true"></a><span class="co"># Code für ein Streudiagramm</span></span>
<span id="cb457-2"><a href="vis.html#cb457-2" aria-hidden="true"></a>streudiagramm &lt;-<span class="st"> </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(offenheit_red, </span>
<span id="cb457-3"><a href="vis.html#cb457-3" aria-hidden="true"></a>                        <span class="kw">aes</span>(<span class="dt">x=</span>year, <span class="dt">y=</span>trade_total_GDP)</span>
<span id="cb457-4"><a href="vis.html#cb457-4" aria-hidden="true"></a>                        ) <span class="op">+</span></span>
<span id="cb457-5"><a href="vis.html#cb457-5" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb457-6"><a href="vis.html#cb457-6" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme_bw</span>()</span>
<span id="cb457-7"><a href="vis.html#cb457-7" aria-hidden="true"></a></span>
<span id="cb457-8"><a href="vis.html#cb457-8" aria-hidden="true"></a><span class="co"># Code für ein Liniendiagramm</span></span>
<span id="cb457-9"><a href="vis.html#cb457-9" aria-hidden="true"></a>liniendiagramm &lt;-<span class="st"> </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(offenheit_red, </span>
<span id="cb457-10"><a href="vis.html#cb457-10" aria-hidden="true"></a>                        <span class="kw">aes</span>(<span class="dt">x=</span>year, <span class="dt">y=</span>trade_total_GDP)</span>
<span id="cb457-11"><a href="vis.html#cb457-11" aria-hidden="true"></a>                        ) <span class="op">+</span></span>
<span id="cb457-12"><a href="vis.html#cb457-12" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span><span class="co"># &lt;- nur diese Zeile verändert</span></span>
<span id="cb457-13"><a href="vis.html#cb457-13" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme_bw</span>()</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-13-1.png" width="50%" height="50%" style="display: block; margin: auto;" /></p>
</div>
<div id="beispiel-workflow" class="section level3" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Beispiel Workflow</h3>
<p>Hier betrachten wir den Workflow einer einfachen Grafik.
Sie werden <a href="vis.html#vis-adv">unten</a>
noch diverse Techniken lernen, wie Sie diese Grafik aufhübschen
können.
Übrigens ist die Reihenfolge der Schritte nicht weiter relevant, lediglich
der erste Schritt muss vor den anderen kommen.
Was den Rest angeht sind Sie aber in der Praxis recht flexibel, denn Sie
erstellen ja am Anfang eine Liste, zu der Sie in den weiteren Schritten weitere
Beschreibungsdetails hinzufügen.
Die Grafik wird aus dieser durch <code>ggplot()</code> erstellten Liste erst bei
Aufruf mit einer <code>print</code>-Funktion erstellt.</p>
<p><strong>1. Schritt: Aufbereitung der Daten</strong></p>
<p>Ihre Daten sollten ‘tidy’ sein, genauso wie im <a href="data.html#data">letzten Kapitel</a>
beschrieben. Im Folgenden gehen wir davon aus, dass wir einen entsprechend
aufbereiteten Datensatz haben:</p>
<pre><code>#&gt;    Land Jahr HandelGDP
#&gt; 1:  AUT 1965  48.23931
#&gt; 2:  AUT 1966  48.92554
#&gt; 3:  AUT 1967  48.30854
#&gt; 4:  AUT 1968  49.01388
#&gt; 5:  AUT 1969  52.72526
#&gt; 6:  AUT 1970  54.86039</code></pre>
<p>Dieser kleine Beispieldatensatz enthält Informationen über das Verhältnis
von Handelsströmen und BIP in Österreich seit 1965.</p>
<p><strong>2. Schritt: Auswahl des Standarddatensatzes und der Variablen</strong>
Wir entscheiden uns, dass der gerade aufbereitete Datensatz die Basis für unsere
Visualisierung darstellen soll. Natürlich können wir auch noch Daten aus anderen
Datensätzen hinzufügen, aber dieser Datensatz soll unser <em>Standard-Datensatz</em> für
die Grafik sein, die verwendet wird wenn wir nichts anderes spezifizieren.
Genauso spezifizieren wir die <em>Standard-Ästhetik-Links</em> für die Abbildung.
Eine Ästhetik ist z.B. die Größe, Farbe oder Achse der Abbildung.
Es ist hilfreich am Anfang Standardwerte für die Verknüpfung von Variablen
aus dem Datensatz mit Ästhetiken in der Grafik zu spezifizieren.</p>
<p>Im Beispiel wollen wir die Variable <code>Jahr</code> mit der x-Achse und die Variable
<code>HandelGDP</code> mit der y-Achse verbinden.
Da es sich um die Standardwerte handelt werden Sie in der Funktion
<code>ggplot()</code> spezifiziert:</p>
<div class="sourceCode" id="cb459"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb459-1"><a href="vis.html#cb459-1" aria-hidden="true"></a>aut_trade_plot &lt;-<span class="st"> </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(</span>
<span id="cb459-2"><a href="vis.html#cb459-2" aria-hidden="true"></a>  <span class="dt">data =</span> aut_trade, </span>
<span id="cb459-3"><a href="vis.html#cb459-3" aria-hidden="true"></a>  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Jahr, </span>
<span id="cb459-4"><a href="vis.html#cb459-4" aria-hidden="true"></a>                <span class="dt">y =</span> HandelGDP)</span>
<span id="cb459-5"><a href="vis.html#cb459-5" aria-hidden="true"></a>  )</span></code></pre></div>
<p><code>ggplot2::ggplot()</code> erstellt das Grafik-Objekt, bei dem es sich um eine recht
komplexe Liste handelt:</p>
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb460-1"><a href="vis.html#cb460-1" aria-hidden="true"></a><span class="kw">typeof</span>(aut_trade_plot)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;list&quot;</code></pre>
<p>Die Funktion <code>ggplot2::ggplot()</code> wird in der Regel mit zwei Argumenten verwendet:
<code>data</code> spezifiziert den Standard-Datensatz für die Grafik und <code>mapping</code> die
<em>aesthetic mappings</em>, welche die Variablen in <code>data</code> zu den ästhetischen
Komponenten der Grafik verlinken.
Wenn Sie den optionalen Abschnitt zur <a href="vis.html#grammar">Grammar of Graphics</a> gelesen
haben, werden Sie die Konzepte sofort wiedererkennen!</p>
<p>Wie oben beschrieben wird die Grafik bei <code>ggplot2</code> erst erstellt, wenn Sie das
Grafik-Objet mit einer <code>print</code>-Funktion aufrufen. Das passiert automatisch,
wenn Sie das Objekt als solches aufrufen:</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb462-1"><a href="vis.html#cb462-1" aria-hidden="true"></a>aut_trade_plot</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-17-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Da wir bislang nur die Standardwerte definiert haben ist die Grafik noch recht
leer. Zumindest sehen wir, dass die Achsen die Variablen unseres Datensatzes
repräsentieren.</p>
<p><strong>3. Schritt: Hinzufügen von Ebenen mit geometrischen Objekten</strong></p>
<p>Als nächstes wollen wir die geometrischen Objekte spezifizieren, mit denen
die Ästhetiken auf dem Plot dargestellt werden sollen.
Im vorliegenden Fall möchten wir z.B. unsere Beobachtungen mit einer Linie
visualisieren.
Das geht mit der Funktion <code>ggplot2::geom_line()</code>: sie fügt einen <code>geom</code> der Art ‘Linie’
hinzu. Im übrigen sind die Namen für alle verschiedenen <code>geoms</code> gleich aufgebaut,
es ist immer <code>ggplot2::geom_*(),</code> wobei <code>*</code> für die Abkürzung des entsprechenden
<code>geoms</code> steht.<a href="#fn28" class="footnote-ref" id="fnref28"><sup>28</sup></a></p>
<p>Die Funktionen <code>ggplot2::geom_*()</code> verlangen in der Regel kein zusätzliches Argument,
verwenden aber einige Standardwerte über die Sie Bescheid wissen sollten.
Die Argumente <code>data</code> und <code>mapping</code> funktionieren wie oben beschrieben und haben als
Standardwert die anfangs in <code>ggplot2::ggplot()</code> angegebenen Werte.
Das Argument <code>stat</code> spezifiziert statistische Transformationen, die an den Daten vor dem
Plotten vorgenommen werden sollen. Wenn die Daten bereits korrekt aufbereitet
wurden ist das häufig nicht notwendig und der Standardwert <code>stat='identity'</code> ist
ausreichend - in diesem Fall werden die Daten so abgebildet wie sie im
Datensatz vorhanden sind.<a href="#fn29" class="footnote-ref" id="fnref29"><sup>29</sup></a>
Das Gleiche gilt für das Argument <code>position</code>: auch hier ist der Standardwert
<code>position='identity'</code>, aber Sie können über verschiedene Funktionen die Position
der <code>geoms</code> anpassen, z.B. um Überlappungen zu vermeiden.<a href="#fn30" class="footnote-ref" id="fnref30"><sup>30</sup></a></p>
<p>Da wir zu unserer Grafik <code>aut_trade_plot</code> eine Ebene hinzufügen wollen, verwenden
wir einfach den Operator <code>+</code>:</p>
<div class="sourceCode" id="cb463"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb463-1"><a href="vis.html#cb463-1" aria-hidden="true"></a>aut_trade_plot &lt;-<span class="st"> </span>aut_trade_plot <span class="op">+</span><span class="st"> </span></span>
<span id="cb463-2"><a href="vis.html#cb463-2" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_line</span>()</span>
<span id="cb463-3"><a href="vis.html#cb463-3" aria-hidden="true"></a>aut_trade_plot</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-18-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Am Anfang ein Grafikobjekt zu definieren und dann neue Elemente
Stück für Stück mit <code>+</code> hinzuzufügen ist das Grundprinzip von <code>ggplot2</code>.
Auch hier ist die Verbindung zu Wickham’s <a href="vis.html#grammar">Grammar of Graphics</a>
offensichtlich.</p>
<p>Im Beispiel haben wir <code>ggplot2::geom_line()</code> ohne ein einziges Argument
aufgerufen.
Wir könnten die Argumente <code>data</code> und <code>mapping</code> verwenden, aber da wir hier die
in Schritt 1 definierten Standardwerte verwenden besteht dazu keine Veranlassung.</p>
<p>Wir können durchaus mehrere Ebenen nacheinander hinzufügen.
Wenn wir die einzelnen Beobachtungen z.B. noch durch Punkte verdeutlichen
wollen, dann können wir einfach eine weitere Ebene mit dem <code>geom</code> ‘Punkt’
hinzufügen.
Das geht mit der Funktion <code>ggplot2::geom_point()</code> und da wir die gleichen
Standardwerte wie vorher verwenden sind hier auch keine Argumente nötig:</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="vis.html#cb464-1" aria-hidden="true"></a>aut_trade_plot &lt;-<span class="st"> </span>aut_trade_plot <span class="op">+</span></span>
<span id="cb464-2"><a href="vis.html#cb464-2" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_point</span>()</span>
<span id="cb464-3"><a href="vis.html#cb464-3" aria-hidden="true"></a>aut_trade_plot</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-19-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Um den Trend der Entwicklung zu verdeutlichen möchten wir vielleicht noch einen
Trend grafisch hinzufügen.
Hierzu verwenden wir die Funktion <code>geom_smooth()</code>:</p>
<div class="sourceCode" id="cb465"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb465-1"><a href="vis.html#cb465-1" aria-hidden="true"></a>aut_trade_plot &lt;-<span class="st"> </span>aut_trade_plot <span class="op">+</span></span>
<span id="cb465-2"><a href="vis.html#cb465-2" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_smooth</span>()</span>
<span id="cb465-3"><a href="vis.html#cb465-3" aria-hidden="true"></a>aut_trade_plot</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-20-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p><strong>4. Schritt: Anpassen der Skalen</strong></p>
<p>Im nächsten Schritt wollen wir die <em>Skalen</em> der Abbildung anpassen.
Für uns sind hier vor allem die Skalen der y-Achse und der x-Achse relevant.<a href="#fn31" class="footnote-ref" id="fnref31"><sup>31</sup></a>
Daher verwenden wir die Funktionen <code>ggplot2::scale_x_continuous()</code> und <code>ggplot2::scale_y_continuous()</code>,
schließlich handelt es sich bei den auf diesen Skalen abgebildeten Variablen um
kontinuierliche Variable. Wenn es diskrete Daten gewesen wären, würden wir die Funktionen
<code>ggplot2::scale_x_discrete()</code> und <code>ggplot2::scale_y_discrete()</code> verwenden.</p>
<p>Beginnen wir mit der x-Achse. Hier möchten wir vor allem die auf der Skala angegeben
Jahreszahlen anpassen und die Länge der Skala auf den Zeitraum 1965-2018 anpassen.</p>
<p>Die abzubildenden Jahre spezifizieren wir mit dem Argument <code>breaks</code>, dem wir einen Vektor mit den
abzubildenden Jahreszahlen übergeben.
Die Limits der Skala können wir mit dem Argument <code>limits</code> spezifizieren indem
wir einen Vektor mit zwei Zahlen, dem unteren und dem oberen Limit, übergeben:</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="vis.html#cb466-1" aria-hidden="true"></a>aut_trade_plot &lt;-<span class="st"> </span>aut_trade_plot <span class="op">+</span></span>
<span id="cb466-2"><a href="vis.html#cb466-2" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_x_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">1965</span>, <span class="dv">2018</span>), </span>
<span id="cb466-3"><a href="vis.html#cb466-3" aria-hidden="true"></a>                     <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">1965</span>, <span class="dv">2017</span>, <span class="dv">5</span>))</span>
<span id="cb466-4"><a href="vis.html#cb466-4" aria-hidden="true"></a>aut_trade_plot</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-21-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Unschön hier ist nur der ‘Rand’, den <code>ggplot2</code> automatisch an den jeweiligen Enden der Skalen hinzufügt.
Dieser Rand kann durch das Argument <code>expand</code> geändert werden.
Wie übergeben <code>expand</code> im einfachsten Falle einen Vektor mit zwei Werten:
der erste Wert bestimmt eine Konstante, die auf beiden Seiten zur Skala
hinzuaddiert wird, der zweite Wert einen Skalar der die Skala um den ensprechenden
Wert multiplikativ streckt.
In unserem Fall sollen beide Werte gleich 0 sein, denn wir wollen, dass die Skala
1960 anfängt und 2017 aufhört, so wie über das Argument <code>limits</code> vorher
spezifiziert:</p>
<div class="sourceCode" id="cb467"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb467-1"><a href="vis.html#cb467-1" aria-hidden="true"></a>aut_trade_plot &lt;-<span class="st"> </span>aut_trade_plot <span class="op">+</span></span>
<span id="cb467-2"><a href="vis.html#cb467-2" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_x_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">1965</span>, <span class="dv">2018</span>), </span>
<span id="cb467-3"><a href="vis.html#cb467-3" aria-hidden="true"></a>                     <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">1960</span>, <span class="dv">2017</span>, <span class="dv">5</span>), </span>
<span id="cb467-4"><a href="vis.html#cb467-4" aria-hidden="true"></a>                     <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb467-5"><a href="vis.html#cb467-5" aria-hidden="true"></a>                     )</span>
<span id="cb467-6"><a href="vis.html#cb467-6" aria-hidden="true"></a>aut_trade_plot</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-22-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Das ist schon nicht so schlecht.
Als nächstes beschäftigen wir uns mit der y-Achse.
Hier möchten wir auch die Limits und die angegebenen Werte verändern, und
zwar von 0 bis 110. Das geht wieder über die Argumente <code>limits</code> und <code>breaks</code>.</p>
<p>Darüber hinaus wäre es schön, den Namen der Achse anzupassen.
Standardmäßig ist das der Name der Variable im Datensatz, aber hier wäre es
schöner wenn dort einer ‘Handel / BIP’ stehen würde.
Das erledigen wir mit dem Argument <code>name</code>.<a href="#fn32" class="footnote-ref" id="fnref32"><sup>32</sup></a></p>
<p>Auch möchten wir wieder den hässlichen Rand am oberen und unteren Ende der Skala
eliminieren und verwenden dazu das Argument <code>expand</code> wie vorher:</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb468-1"><a href="vis.html#cb468-1" aria-hidden="true"></a>aut_trade_plot &lt;-<span class="st"> </span>aut_trade_plot <span class="op">+</span></span>
<span id="cb468-2"><a href="vis.html#cb468-2" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;Handel / BIP&quot;</span>,  </span>
<span id="cb468-3"><a href="vis.html#cb468-3" aria-hidden="true"></a>                     <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">110</span>), </span>
<span id="cb468-4"><a href="vis.html#cb468-4" aria-hidden="true"></a>                     <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">110</span>, <span class="dv">10</span>),</span>
<span id="cb468-5"><a href="vis.html#cb468-5" aria-hidden="true"></a>                     <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb468-6"><a href="vis.html#cb468-6" aria-hidden="true"></a>                     )</span>
<span id="cb468-7"><a href="vis.html#cb468-7" aria-hidden="true"></a>aut_trade_plot</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-23-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p><strong>5. Schritt: Titel</strong></p>
<p>Titel und andere so genannte ‘Labels’ können Sie mit der Funktion <code>ggplot2::labs()</code>
sehr einfach hinzufügen.
<code>ggplot2::labs()</code> akzeptiert drei optionale Argumente: <code>title</code> für den Titel,
<code>subtitle</code> für den Untertitel und <code>caption</code> für eine Fußnote, die sich besonders
gut eignet um die Quelle der Daten anzugeben.</p>
<div class="sourceCode" id="cb469"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb469-1"><a href="vis.html#cb469-1" aria-hidden="true"></a>aut_trade_plot &lt;-<span class="st"> </span>aut_trade_plot <span class="op">+</span></span>
<span id="cb469-2"><a href="vis.html#cb469-2" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Handel und BIP in Österreich&quot;</span>, </span>
<span id="cb469-3"><a href="vis.html#cb469-3" aria-hidden="true"></a>          <span class="dt">subtitle =</span> <span class="st">&quot;Die Entwicklung zwischen 1965 und 2018&quot;</span>,</span>
<span id="cb469-4"><a href="vis.html#cb469-4" aria-hidden="true"></a>       <span class="dt">caption =</span> <span class="st">&quot;Daten: Weltbank.&quot;</span>)</span>
<span id="cb469-5"><a href="vis.html#cb469-5" aria-hidden="true"></a>aut_trade_plot</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-24-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Weit verbreitet ist auch die Funktion <code>ggplot2::ggtitle()</code>, die genauso
funktioniert, aber nur die Argumente <code>label</code> (für den Titel) und <code>subtitle</code>
akzeptiert.</p>
<p><strong>6. Schritt: Grundlegende Veränderungen mit <code>ggplot2::theme()</code></strong></p>
<p>Achtung, Kleinkram-Alarm! Zwar schaut die Grafik jetzt schon erträglich aus,
aber es gibt natürlich noch diverse Dinge, die wir verschönern könnten.
Warum der Hintergrund z.B. standardmäßig grau und die Linien in weiß sind, weiß
niemand. Solcherlei Veränderungen können Sie über die Funktion <code>ggplot2::theme()</code>
vornehmen. Wir betrachten hier nur ein paar Beispiele, eine Übersicht zu
allen möglichen Argumenten finden sie
<a href="https://ggplot2.tidyverse.org/reference/theme.html">hier</a>.</p>
<p>Um den Hintergrund des Plot im Abbildungsbereich zu verändern verwenden wir
das Argument <code>panel.background</code>.
Solcherlei Veränderungen werden immer über bestimmte Funktionen durchgeführt,
die sich nach der Art des zu veränderten Grafikbestandteils richten.
Im Falle des Plot-Hintergrundes ist das ein Rechteck, sodass wir die Funktion
<code>ggplot2::element_rect()</code> verwenden, die zahlreiche Gestaltungsmöglichkeiten erlaubt.<a href="#fn33" class="footnote-ref" id="fnref33"><sup>33</sup></a>
Hier wollen wir den Hintergrund weiß füllen, wir schreiben also
<code>ggplot2::element_rect(fill = "white")</code>:</p>
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb470-1"><a href="vis.html#cb470-1" aria-hidden="true"></a>aut_trade_plot &lt;-<span class="st"> </span>aut_trade_plot <span class="op">+</span></span>
<span id="cb470-2"><a href="vis.html#cb470-2" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme</span>(<span class="dt">panel.background =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="st">&quot;white&quot;</span>))</span>
<span id="cb470-3"><a href="vis.html#cb470-3" aria-hidden="true"></a>aut_trade_plot</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-25-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Das ist besser, allerdings möchten wir schon einen Grid haben um die Achsen
besser lesen zu können.
Das entsprechende Argument ist <code>panel.grid</code>, bzw. <code>panel.grid.major</code> und
<code>panel.grid.minor</code> für die Linien auf, bzw. zwischen den auf den Achsen aufgeschriebenen
Werten .<a href="#fn34" class="footnote-ref" id="fnref34"><sup>34</sup></a>
Damit wir den Plot nicht überlasten malen wir aber nur auf die auf den
Achsen auch tatsächlich abgebildeten Werte Linien, verwenden also das
Argument <code>panel.grid.major</code>.
Da es sich hier um Linien handelt verwenden wir die Funktion <code>ggplot2::element_line()</code>,
die wir hier noch über die Farbe des Grids informieren:
<code>ggplot2::element_line(colour = "grey")</code>.
Auch die fehlenden Achsenlinien machen den Plot nicht schöner.
Wir fügen Sie über das Argument <code>axis.line</code> mit der Funktion
<code>ggplot2::element_line()</code> explizit hinzu!</p>
<p>Sehr hässlich sind auch die kleinen schwarzen Zacken bei jedem Wert auf der
x- und y-Ache.
Diese werden mit <code>axis.ticks = ggplot2::element_black()</code> eliminiert. Sie verwenden
die Funktion <code>ggplot2::element_blank()</code> ohne Argument immer wenn Sie einen bestimmten
Teil der Grafik eliminieren wollen.<a href="#fn35" class="footnote-ref" id="fnref35"><sup>35</sup></a>
Somit bekommen wir insgesamt:</p>
<div class="sourceCode" id="cb471"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb471-1"><a href="vis.html#cb471-1" aria-hidden="true"></a>aut_trade_plot &lt;-<span class="st"> </span>aut_trade_plot <span class="op">+</span></span>
<span id="cb471-2"><a href="vis.html#cb471-2" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme</span>(</span>
<span id="cb471-3"><a href="vis.html#cb471-3" aria-hidden="true"></a>    <span class="dt">panel.background =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="st">&quot;white&quot;</span>), </span>
<span id="cb471-4"><a href="vis.html#cb471-4" aria-hidden="true"></a>    <span class="dt">panel.grid.major =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&quot;grey&quot;</span>),</span>
<span id="cb471-5"><a href="vis.html#cb471-5" aria-hidden="true"></a>    <span class="dt">panel.grid.minor =</span> <span class="kw">element_blank</span>(), </span>
<span id="cb471-6"><a href="vis.html#cb471-6" aria-hidden="true"></a>    <span class="dt">axis.line =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>), </span>
<span id="cb471-7"><a href="vis.html#cb471-7" aria-hidden="true"></a>    <span class="dt">axis.ticks =</span> <span class="kw">element_blank</span>() </span>
<span id="cb471-8"><a href="vis.html#cb471-8" aria-hidden="true"></a>    )</span>
<span id="cb471-9"><a href="vis.html#cb471-9" aria-hidden="true"></a>aut_trade_plot</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-26-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Sie merken bereits: mit <code>ggplot2::theme()</code> können Sie quasi alles an Ihrer Grafik
ändern was Sie sich irgendwie vorstellen können.
Einen Überblick über alle möglichen Parameter finden Sie
<a href="https://ggplot2.tidyverse.org/reference/theme.html">hier</a>.
Wie beschäfigten uns <a href="#vis-theme">unten</a> noch mit ausgewählten Argumenten etwas
genauer.</p>
<p>Gleichzeitig mag es aber auch nervig sein, so viele Einstellungen immer manuell
vorzunehmen. Daher gibt auch zahlreiche vorgefertigte Themen, die bestimmte
Standard-Spezifikationen vornehmen. Eine Übersicht finden Sie
<a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">hier</a>.
Häufig wird z.B. das Theme <code>ggplot2::theme_bw()</code> verwendet:</p>
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb472-1"><a href="vis.html#cb472-1" aria-hidden="true"></a>aut_trade_plot <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>()</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-27-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Natürlich können Sie auch eigene Themen schreiben, in denen Sie Ihre
Lieblingseinstellungen zusammenfassen.<a href="#fn36" class="footnote-ref" id="fnref36"><sup>36</sup></a></p>
<blockquote>
<p><strong>Tipp:</strong> Wenn Ihnen die Abbildungen im Skript bislang und auf den Slides
gefallen haben können Sie gerne mein Standard-Thema verwenden. Sie können
in <code>ggplot2</code> nämlich typische Anpassungen, die Sie mit <code>theme()</code> regelmäßig
durchführen, auch automatisieren und eigene Themen verwenden.
Das Thema, das ich verwende ist Teil des Pakets
<a href="https://github.com/graebnerc/icaeDesign">icaeDesign</a> <span class="citation">(Gräbner <a href="#ref-R-icae" role="doc-biblioref">2019</a>)</span> und kann durch
die Funktion <code>icaeDesign::theme_icae()</code> verwendet werden.
Um das Paket <code>icaeDesign</code> zu installieren müssen Sie folgendermaßen vorgehen:</p>
</blockquote>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb473-1"><a href="vis.html#cb473-1" aria-hidden="true"></a><span class="kw">library</span>(devtools)</span>
<span id="cb473-2"><a href="vis.html#cb473-2" aria-hidden="true"></a>devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;graebnerc/icaeDesign&quot;</span>)</span></code></pre></div>
<p>Unser Beispielplot sähe damit folgendermaßen aus:</p>
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb474-1"><a href="vis.html#cb474-1" aria-hidden="true"></a><span class="kw">library</span>(icaeDesign)</span>
<span id="cb474-2"><a href="vis.html#cb474-2" aria-hidden="true"></a>aut_trade_plot &lt;-<span class="st"> </span>aut_trade_plot <span class="op">+</span><span class="st"> </span><span class="kw">theme_icae</span>()</span>
<span id="cb474-3"><a href="vis.html#cb474-3" aria-hidden="true"></a>aut_trade_plot</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-29-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Das ist nicht so schlecht, allerdings ist der Untertitel hässlich.
Da ich selbst so gut wie nie Untertitel verwende ist das aktuell im Thema nicht
berücksichtigt.
Zum Glück können wir mit <code>ggplot2::theme()</code> auch nach einem benutzerdefinierten Theme
noch weitere Modifikationen vornehmen.
Da es sich beim Untertitel um Text handelt, verwenden wir die Funktion
<code>ggplot2::element_text()</code>:</p>
<div class="sourceCode" id="cb475"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb475-1"><a href="vis.html#cb475-1" aria-hidden="true"></a>aut_trade_plot <span class="op">+</span><span class="st"> </span></span>
<span id="cb475-2"><a href="vis.html#cb475-2" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme</span>(<span class="dt">plot.subtitle =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="fl">0.5</span>))</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-30-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Dabei ist der Aufruf <code>icaeDesign::theme_icae()</code> eine Abkürzung für folgenden Aufruf von
<code>ggplot2::theme()</code>. Sie müssen die Befehle nicht nachvollziehen, das ist nur zur
Info:</p>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="vis.html#cb476-1" aria-hidden="true"></a>ggplot2<span class="op">::</span><span class="kw">theme_minimal</span>() <span class="op">+</span></span>
<span id="cb476-2"><a href="vis.html#cb476-2" aria-hidden="true"></a>ggplot2<span class="op">::</span><span class="kw">theme</span>(</span>
<span id="cb476-3"><a href="vis.html#cb476-3" aria-hidden="true"></a>  <span class="dt">axis.line =</span> <span class="kw">element_line</span>(</span>
<span id="cb476-4"><a href="vis.html#cb476-4" aria-hidden="true"></a>    <span class="dt">color =</span> <span class="kw">rgb</span>(<span class="dv">188</span>, <span class="dv">197</span>, <span class="dv">207</span>, <span class="dt">maxColorValue =</span> <span class="dv">255</span>),</span>
<span id="cb476-5"><a href="vis.html#cb476-5" aria-hidden="true"></a>    <span class="dt">linetype =</span> <span class="st">&quot;solid&quot;</span>, <span class="dt">size =</span> <span class="fl">0.5</span></span>
<span id="cb476-6"><a href="vis.html#cb476-6" aria-hidden="true"></a>    ),</span>
<span id="cb476-7"><a href="vis.html#cb476-7" aria-hidden="true"></a>  <span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb476-8"><a href="vis.html#cb476-8" aria-hidden="true"></a>  <span class="dt">legend.spacing.x =</span> <span class="kw">unit</span>(<span class="fl">0.2</span>, <span class="st">&quot;cm&quot;</span>),</span>
<span id="cb476-9"><a href="vis.html#cb476-9" aria-hidden="true"></a>  <span class="dt">legend.title =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb476-10"><a href="vis.html#cb476-10" aria-hidden="true"></a>  <span class="dt">plot.title =</span> <span class="kw">element_text</span>(</span>
<span id="cb476-11"><a href="vis.html#cb476-11" aria-hidden="true"></a>    <span class="dt">color =</span> <span class="kw">rgb</span>(<span class="dv">43</span>, <span class="dv">49</span>, <span class="dv">62</span>, <span class="dt">maxColorValue =</span> <span class="dv">255</span>),</span>
<span id="cb476-12"><a href="vis.html#cb476-12" aria-hidden="true"></a>    <span class="dt">hjust =</span> <span class="fl">0.5</span></span>
<span id="cb476-13"><a href="vis.html#cb476-13" aria-hidden="true"></a>    ),</span>
<span id="cb476-14"><a href="vis.html#cb476-14" aria-hidden="true"></a>  <span class="dt">axis.title =</span> <span class="kw">element_text</span>(</span>
<span id="cb476-15"><a href="vis.html#cb476-15" aria-hidden="true"></a>    <span class="dt">color =</span> <span class="kw">rgb</span>(<span class="dv">43</span>, <span class="dv">49</span>, <span class="dv">62</span>, <span class="dt">maxColorValue =</span> <span class="dv">255</span>),</span>
<span id="cb476-16"><a href="vis.html#cb476-16" aria-hidden="true"></a>    <span class="dt">size =</span> <span class="kw">rel</span>(<span class="fl">0.75</span>)</span>
<span id="cb476-17"><a href="vis.html#cb476-17" aria-hidden="true"></a>    ),</span>
<span id="cb476-18"><a href="vis.html#cb476-18" aria-hidden="true"></a>  <span class="dt">axis.text =</span> <span class="kw">element_text</span>(</span>
<span id="cb476-19"><a href="vis.html#cb476-19" aria-hidden="true"></a>    <span class="dt">color =</span> <span class="kw">rgb</span>(<span class="dv">110</span>, <span class="dv">113</span>, <span class="dv">123</span>, <span class="dt">maxColorValue =</span> <span class="dv">255</span>),</span>
<span id="cb476-20"><a href="vis.html#cb476-20" aria-hidden="true"></a>    <span class="dt">size =</span> <span class="kw">rel</span>(<span class="fl">0.5</span>)</span>
<span id="cb476-21"><a href="vis.html#cb476-21" aria-hidden="true"></a>    ),</span>
<span id="cb476-22"><a href="vis.html#cb476-22" aria-hidden="true"></a>  <span class="dt">panel.grid.major =</span> <span class="kw">element_line</span>(</span>
<span id="cb476-23"><a href="vis.html#cb476-23" aria-hidden="true"></a>    <span class="kw">rgb</span>(<span class="dv">188</span>, <span class="dv">197</span>, <span class="dv">207</span>, <span class="dt">maxColorValue =</span> <span class="dv">255</span>),</span>
<span id="cb476-24"><a href="vis.html#cb476-24" aria-hidden="true"></a>    <span class="dt">linetype =</span> <span class="st">&quot;solid&quot;</span>),</span>
<span id="cb476-25"><a href="vis.html#cb476-25" aria-hidden="true"></a>  <span class="dt">panel.grid.minor =</span> <span class="kw">element_line</span>(</span>
<span id="cb476-26"><a href="vis.html#cb476-26" aria-hidden="true"></a>    <span class="kw">rgb</span>(<span class="dv">233</span>, <span class="dv">234</span>, <span class="dv">233</span>, <span class="dt">maxColorValue =</span> <span class="dv">255</span>),</span>
<span id="cb476-27"><a href="vis.html#cb476-27" aria-hidden="true"></a>    <span class="dt">linetype =</span> <span class="st">&quot;dotted&quot;</span>,</span>
<span id="cb476-28"><a href="vis.html#cb476-28" aria-hidden="true"></a>    <span class="dt">size =</span> <span class="kw">rel</span>(<span class="dv">4</span>)</span>
<span id="cb476-29"><a href="vis.html#cb476-29" aria-hidden="true"></a>    ),</span>
<span id="cb476-30"><a href="vis.html#cb476-30" aria-hidden="true"></a>  <span class="dt">strip.text =</span> <span class="kw">element_text</span>(</span>
<span id="cb476-31"><a href="vis.html#cb476-31" aria-hidden="true"></a>    <span class="dt">size =</span> <span class="kw">rel</span>(<span class="fl">0.9</span>),</span>
<span id="cb476-32"><a href="vis.html#cb476-32" aria-hidden="true"></a>    <span class="dt">colour =</span> <span class="kw">rgb</span>(<span class="dv">43</span>, <span class="dv">49</span>, <span class="dv">62</span>, <span class="dt">maxColorValue =</span> <span class="dv">255</span>),</span>
<span id="cb476-33"><a href="vis.html#cb476-33" aria-hidden="true"></a>    <span class="dt">margin =</span> <span class="kw">margin</span>(<span class="dt">t =</span> <span class="dv">1</span>, <span class="dt">r =</span> <span class="dv">1</span>, <span class="dt">b =</span> <span class="dv">1</span>, <span class="dt">l =</span> <span class="dv">1</span>, <span class="dt">unit =</span> <span class="st">&quot;pt&quot;</span>)</span>
<span id="cb476-34"><a href="vis.html#cb476-34" aria-hidden="true"></a>    ),</span>
<span id="cb476-35"><a href="vis.html#cb476-35" aria-hidden="true"></a>  <span class="dt">strip.text.x =</span> <span class="kw">element_text</span>(</span>
<span id="cb476-36"><a href="vis.html#cb476-36" aria-hidden="true"></a>    <span class="dt">margin =</span> <span class="kw">margin</span>(<span class="dt">t =</span> <span class="dv">5</span>, <span class="dt">r =</span> <span class="dv">1</span>, <span class="dt">b =</span> <span class="dv">1</span>, <span class="dt">l =</span> <span class="dv">1</span>, <span class="dt">unit =</span> <span class="st">&quot;pt&quot;</span>)</span>
<span id="cb476-37"><a href="vis.html#cb476-37" aria-hidden="true"></a>    )</span></code></pre></div>
<p><strong>7. Schritt: Ihre Grafik abspeichern</strong></p>
<p>Zum Schluss können wir noch unsere Grafik speichern.
Das machen wir ganz einfach mit der Funktion <code>ggplot2::ggsave()</code>.
Die wichtigsten Argumente sind
<code>filename</code> (für Dateinamen und Speicherort),
<code>plot</code> (für den zu speichernden Plot),
<code>width</code> (für die Breite der Abbildung) und <code>height</code> (für die Höhe der Figur).<a href="#fn37" class="footnote-ref" id="fnref37"><sup>37</sup></a></p>
<div class="sourceCode" id="cb477"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb477-1"><a href="vis.html#cb477-1" aria-hidden="true"></a>ggplot2<span class="op">::</span><span class="kw">ggsave</span>(<span class="dt">filename =</span> here<span class="op">::</span><span class="kw">here</span>(<span class="st">&quot;output/trade_ts.pdf&quot;</span>), </span>
<span id="cb477-2"><a href="vis.html#cb477-2" aria-hidden="true"></a>       <span class="dt">plot =</span> aut_trade_plot, </span>
<span id="cb477-3"><a href="vis.html#cb477-3" aria-hidden="true"></a>       <span class="dt">width =</span> <span class="dv">9</span>, </span>
<span id="cb477-4"><a href="vis.html#cb477-4" aria-hidden="true"></a>       <span class="dt">height =</span> <span class="dv">6</span>)</span></code></pre></div>
<p>Achten Sie auf die Beibehaltung einer übersichtlichen Ordnerstruktur.
Abbildungen sollten immer im Ordner <code>output</code> gespeichert werden!</p>
<blockquote>
<p><strong>Tipp: Das richtige Format</strong>
Wenn nicht irgendwelche gewichtigen Gründe dagegen sprechen (z.B. dass Sie
Ihre Grafik auf einer Website verwenden wollen) dann sollten Sie Ihre Grafik
immer als PDF speichern. Da es sich dabei um eine
<a href="https://de.wikipedia.org/wiki/Vektorgrafik">vektorbasierte Grafik</a>
handelt bleiben Sie sehr flexibel was das spätere Vergrößern oder Verkleiner
der Grafik angeht.
Wenn Sie kein PDF verwenden können ist in der Regel PNG die erste Alternative.</p>
</blockquote>
<p><strong>Zusammenfassung</strong></p>
<p>Abschließend noch einmal der komplette Code für unsere Abbildung:</p>
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb478-1"><a href="vis.html#cb478-1" aria-hidden="true"></a>aut_trade_plot &lt;-<span class="st"> </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(</span>
<span id="cb478-2"><a href="vis.html#cb478-2" aria-hidden="true"></a>  <span class="dt">data =</span> aut_trade, </span>
<span id="cb478-3"><a href="vis.html#cb478-3" aria-hidden="true"></a>  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> Jahr, </span>
<span id="cb478-4"><a href="vis.html#cb478-4" aria-hidden="true"></a>                <span class="dt">y =</span> HandelGDP)</span>
<span id="cb478-5"><a href="vis.html#cb478-5" aria-hidden="true"></a>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb478-6"><a href="vis.html#cb478-6" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_line</span>() <span class="op">+</span></span>
<span id="cb478-7"><a href="vis.html#cb478-7" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb478-8"><a href="vis.html#cb478-8" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_smooth</span>() <span class="op">+</span></span>
<span id="cb478-9"><a href="vis.html#cb478-9" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_x_continuous</span>(</span>
<span id="cb478-10"><a href="vis.html#cb478-10" aria-hidden="true"></a>    <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">1965</span>, <span class="dv">2018</span>), </span>
<span id="cb478-11"><a href="vis.html#cb478-11" aria-hidden="true"></a>    <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">1960</span>, <span class="dv">2017</span>, <span class="dv">5</span>), </span>
<span id="cb478-12"><a href="vis.html#cb478-12" aria-hidden="true"></a>    <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb478-13"><a href="vis.html#cb478-13" aria-hidden="true"></a>  ) <span class="op">+</span></span>
<span id="cb478-14"><a href="vis.html#cb478-14" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(</span>
<span id="cb478-15"><a href="vis.html#cb478-15" aria-hidden="true"></a>    <span class="dt">name =</span> <span class="st">&quot;Handel / BIP&quot;</span>,  </span>
<span id="cb478-16"><a href="vis.html#cb478-16" aria-hidden="true"></a>    <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">110</span>), </span>
<span id="cb478-17"><a href="vis.html#cb478-17" aria-hidden="true"></a>    <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">110</span>, <span class="dv">10</span>),</span>
<span id="cb478-18"><a href="vis.html#cb478-18" aria-hidden="true"></a>    <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb478-19"><a href="vis.html#cb478-19" aria-hidden="true"></a>  ) <span class="op">+</span><span class="st"> </span></span>
<span id="cb478-20"><a href="vis.html#cb478-20" aria-hidden="true"></a><span class="st"> </span>ggplot2<span class="op">::</span><span class="kw">ggtitle</span>(</span>
<span id="cb478-21"><a href="vis.html#cb478-21" aria-hidden="true"></a>    <span class="dt">label =</span> <span class="st">&quot;Handel und BIP in Österreich&quot;</span>, </span>
<span id="cb478-22"><a href="vis.html#cb478-22" aria-hidden="true"></a>    <span class="dt">subtitle =</span> <span class="st">&quot;Die Entwicklung zwischen 1965 und 2018&quot;</span></span>
<span id="cb478-23"><a href="vis.html#cb478-23" aria-hidden="true"></a>    ) <span class="op">+</span></span>
<span id="cb478-24"><a href="vis.html#cb478-24" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme</span>(</span>
<span id="cb478-25"><a href="vis.html#cb478-25" aria-hidden="true"></a>    <span class="dt">panel.background =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="st">&quot;white&quot;</span>), </span>
<span id="cb478-26"><a href="vis.html#cb478-26" aria-hidden="true"></a>    <span class="dt">panel.grid.major =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&quot;grey&quot;</span>),</span>
<span id="cb478-27"><a href="vis.html#cb478-27" aria-hidden="true"></a>    <span class="dt">panel.grid.minor =</span> <span class="kw">element_blank</span>(), </span>
<span id="cb478-28"><a href="vis.html#cb478-28" aria-hidden="true"></a>    <span class="dt">axis.line =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>), </span>
<span id="cb478-29"><a href="vis.html#cb478-29" aria-hidden="true"></a>    <span class="dt">axis.ticks =</span> <span class="kw">element_blank</span>() </span>
<span id="cb478-30"><a href="vis.html#cb478-30" aria-hidden="true"></a>  )</span>
<span id="cb478-31"><a href="vis.html#cb478-31" aria-hidden="true"></a></span>
<span id="cb478-32"><a href="vis.html#cb478-32" aria-hidden="true"></a>ggplot2<span class="op">::</span><span class="kw">ggsave</span>(<span class="dt">filename =</span> here<span class="op">::</span><span class="kw">here</span>(<span class="st">&quot;output/trade_ts.pdf&quot;</span>), </span>
<span id="cb478-33"><a href="vis.html#cb478-33" aria-hidden="true"></a>       <span class="dt">plot =</span> aut_trade_plot, </span>
<span id="cb478-34"><a href="vis.html#cb478-34" aria-hidden="true"></a>       <span class="dt">width =</span> <span class="dv">9</span>, </span>
<span id="cb478-35"><a href="vis.html#cb478-35" aria-hidden="true"></a>       <span class="dt">height =</span> <span class="dv">6</span>)</span></code></pre></div>
</div>
</div>
<div id="arten-von-datenvisualisierung" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Arten von Datenvisualisierung</h2>
<p>Es gibt viele verschiedene Arten wie Sie einen Datensatz visualisieren können.
Bevor Sie sich für eine Art entscheiden müssen Sie sich immer fragen:
"Welche Information möchte ich dem oder der Betrachter*in mit dieser Abbildung vermitteln?"
Die Antwort auf diese Frage in Kombination mit den Daten, die Sie zur Verfügung
haben bestimmt dann die adequate Darstellungsform.
Abbildung <a href="vis.html#fig:visfig">5.1</a> kann dabei als erste Inspiration dienen:</p>
<div class="figure" style="text-align: center"><span id="fig:visfig"></span>
<img src="figures/chap-vis-chart-selection.jpg" alt="Mögliche Darstellungsformen. Quelle: http://www.perceptualedge.com/blog/wp-content/uploads/2015/07/Abelas-Chart-Selection-Diagram.jpg" width="100%" height="75%" />
<p class="caption">
Figure 5.1: Mögliche Darstellungsformen. Quelle: <a href="http://www.perceptualedge.com/blog/wp-content/uploads/2015/07/Abelas-Chart-Selection-Diagram.jpg" class="uri">http://www.perceptualedge.com/blog/wp-content/uploads/2015/07/Abelas-Chart-Selection-Diagram.jpg</a>
</p>
</div>
<p>Im Folgenden werde ich Ihnen einige Beispiel-Implementierungen mit <code>ggplot2</code>
präsentieren.
Am Ende werden die verschiedenen Visualisierungsmöglichkeiten noch einmal kurz
in einer Tabelle <a href="vis.html#vis-kinds-summary">zusammengefasst</a>.
Zuvor möchte ich Ihnen jedoch einige Hinweise dazu geben, wie Sie Grafiken
grundsätzlich ein wenig ansprechender gestalten können.</p>
<div id="allgemeine-tipps-zum-grafikdesign" class="section level3" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Allgemeine Tipps zum Grafikdesign</h3>
<p>Die folgenden Punkte sollten Sie beim Erstellen von Grafiken immer im
Hinterkopf behalten:</p>
<ul>
<li>Entfernen Sie den Kasten um Ihre Abbildung, die normalen Achsen sind
vollkommen ausreichend. Das geht über <code>ggplot2::theme()</code> mit
<code>panel.border=element_blank()</code>.
Dann sollten Sie allerdings die Achsen wieder mit <code>axis.line=element_line()</code>
hinzufügen.</li>
<li>Überlegen Sie sich gut ob Sie eine Legende brauchen und wo sie möglichst
platzsparend plaziert werden kann.
Innerhalb von <code>ggplot2::theme()</code> geht das über das Argument <code>legend.position</code>,
welches für Legenden außerhalb des Plots <code>'top'</code>, <code>'bottom'</code>, <code>'left'</code> oder
<code>'right'</code>, und für Legenden innerhalb des Plots die Koordinaten innerhalb des
Plots mit <code>c(x, y)</code> akzeptiert.</li>
<li>Vermeiden Sie ein zu enges Gitter für Ihren Plot, da dies für die
Betrachter*innen schnell anstrengend wird.</li>
<li>Überhaupt gilt in der Regel ‘Weniger ist mehr’. Wenn Sie sich also nicht
sicher sind ob Sie ein bestimmtes Element in Ihrer Abbildung brauchen,
lassen Sie es weg.</li>
<li>Das gilt auch für kleinere Elemente wie die Ticks auf den
Achsen, denen man häufig keine Beachtung schenkt, die aber unbewusst sehr
störend sind. Sie werden mit <code>axis.ticks=element_blank()</code> eliminiert.</li>
<li>Verwenden Sie keine Spezialeffekte wie 3d-Balken oder ähnliches.</li>
<li>Verwenden Sie ein angenehmes Farbschema, häufig sind weniger aggressive
Farben besser geeignet (wie z.B. durch das Paket
<a href="https://github.com/graebnerc/icaeDesign">icaeDesign</a> bereit gestellt)</li>
<li>Auch ist es häufig besser leicht transparente Farben zu verwenden.</li>
<li>Wenn Sie in Ihren Labels LaTeX-Code verwenden bietet sich das
Paket <a href="https://github.com/stefano-meschiari/latex2exp">latex2exp</a> an.</li>
</ul>
<p>Wie Sie ja oben gesehen haben können Sie mit <code>ggplot2::theme()</code> quasi jeden Teil
Ihrer Grafik ändern und die Vorschläge entsprechend einfach implementieren.
Um hier Zeit zu sparen können Sie, wie oben bereits erwähnt, auch
<a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">vorgefertigte Themen</a>
verwenden oder Ihr eigenes Thema schreiben und dann immer wiederverwenden.</p>
<p>Im Folgenden werden einige Beispiel-Visualisierungsformen kurz eingeführt, aber
nicht im Detail diskutiert.
Weitere Ideen und tiefergehende Diskussionen finden Sie z.B. auf der
exzellenten Homepage von <span class="citation">Holtz and Healy (<a href="#ref-dataviz" role="doc-biblioref">2020</a>)</span>.</p>
</div>
<div id="streu--oder-blasendiagramm" class="section level3" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> Streu- oder Blasendiagramm</h3>
<p><strong>Besonders geeignet für:</strong> Zusammenhang von 2 - 3 verhältnis-skalierten Variablen.</p>
<p><strong>Mögliche Probleme:</strong> Negative Werte können in der Größendimension nicht
dargestellt werden.</p>
<p><strong>Beispiel 1: Zwei Variablen in einem Streudiagram</strong></p>
<p>Die dieser Abbildung zugrundeliegenden Daten beschreiben die Handelsoffenheit
von Österreich über die Zeit:</p>
<div class="sourceCode" id="cb479"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb479-1"><a href="vis.html#cb479-1" aria-hidden="true"></a><span class="kw">head</span>(offenheits_daten)</span></code></pre></div>
<pre><code>#&gt;    year       Land trade_total_GDP gvnt_cons
#&gt; 1: 1991 Österreich        70.04841  18.15780
#&gt; 2: 1992 Österreich        67.63017  18.48991
#&gt; 3: 1993 Österreich        63.26505  19.30042
#&gt; 4: 1994 Österreich        65.98709  19.44437
#&gt; 5: 1995 Österreich        68.25660  19.58966
#&gt; 6: 1996 Österreich        70.08367  19.56574</code></pre>
<div class="sourceCode" id="cb481"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb481-1"><a href="vis.html#cb481-1" aria-hidden="true"></a>streudiagramm &lt;-<span class="st"> </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(</span>
<span id="cb481-2"><a href="vis.html#cb481-2" aria-hidden="true"></a>  <span class="dt">data =</span> offenheits_daten, </span>
<span id="cb481-3"><a href="vis.html#cb481-3" aria-hidden="true"></a>  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>trade_total_GDP, </span>
<span id="cb481-4"><a href="vis.html#cb481-4" aria-hidden="true"></a>                <span class="dt">y=</span>gvnt_cons)</span>
<span id="cb481-5"><a href="vis.html#cb481-5" aria-hidden="true"></a>  ) <span class="op">+</span></span>
<span id="cb481-6"><a href="vis.html#cb481-6" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_point</span>(<span class="dt">alpha=</span><span class="fl">0.75</span>) <span class="op">+</span></span>
<span id="cb481-7"><a href="vis.html#cb481-7" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;Regierungsausgaben&quot;</span>) <span class="op">+</span></span>
<span id="cb481-8"><a href="vis.html#cb481-8" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_x_continuous</span>(<span class="dt">name =</span> <span class="kw">TeX</span>(<span class="st">&quot;$</span><span class="ch">\\</span><span class="st">frac{IMP + EXP}{BIP}</span><span class="ch">\\</span><span class="st">cdot 100</span><span class="ch">\\</span><span class="st">%$&quot;</span>), </span>
<span id="cb481-9"><a href="vis.html#cb481-9" aria-hidden="true"></a>                     <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">30</span>, <span class="dv">180</span>, <span class="dv">10</span>),</span>
<span id="cb481-10"><a href="vis.html#cb481-10" aria-hidden="true"></a>                     <span class="dt">labels =</span> scales<span class="op">::</span><span class="kw">percent_format</span>(<span class="dt">accuracy =</span> <span class="dv">1</span>, <span class="dt">scale =</span> <span class="dv">1</span>)</span>
<span id="cb481-11"><a href="vis.html#cb481-11" aria-hidden="true"></a>                     )<span class="op">+</span></span>
<span id="cb481-12"><a href="vis.html#cb481-12" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">labs</span>(</span>
<span id="cb481-13"><a href="vis.html#cb481-13" aria-hidden="true"></a>    <span class="dt">title =</span> <span class="st">&quot;Handelsoffenheit &amp; Regierungsaktivität in Europa&quot;</span>,</span>
<span id="cb481-14"><a href="vis.html#cb481-14" aria-hidden="true"></a>    <span class="dt">caption =</span> <span class="st">&quot;; Daten von 1990-2017.&quot;</span></span>
<span id="cb481-15"><a href="vis.html#cb481-15" aria-hidden="true"></a>    ) <span class="op">+</span></span>
<span id="cb481-16"><a href="vis.html#cb481-16" aria-hidden="true"></a><span class="st">  </span>icaeDesign<span class="op">::</span><span class="kw">theme_icae</span>() </span>
<span id="cb481-17"><a href="vis.html#cb481-17" aria-hidden="true"></a>streudiagramm</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-35-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Mit dem Keyword <code>alpha</code> in <code>ggplot2::geom_point(alpha=0.75)</code> können Sie die
Transparenz der Punkte kontrollieren.
Gerade bei überlappenden Punkten, bzw. sehr dichten Punktewolken hilft das
häufig, das Erscheinungsbild deutlich zu verbessern.</p>
<p><strong>Beispiel 2: Vier Dimensionen in einem Blasendiagramm</strong></p>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb482-1"><a href="vis.html#cb482-1" aria-hidden="true"></a><span class="kw">head</span>(ausgangsdaten)</span></code></pre></div>
<pre><code>#&gt; # A tibble: 6 x 5
#&gt;   country       continent lifeExp        pop gdpPercap
#&gt;   &lt;fct&gt;         &lt;chr&gt;       &lt;dbl&gt;      &lt;int&gt;     &lt;dbl&gt;
#&gt; 1 China         Asien        73.0 1318683096     4959.
#&gt; 2 India         Asien        64.7 1110396331     2452.
#&gt; 3 United States Amerika      78.2  301139947    42952.
#&gt; 4 Indonesia     Asien        70.6  223547000     3541.
#&gt; 5 Brazil        Amerika      72.4  190010647     9066.
#&gt; 6 Pakistan      Asien        65.5  169270617     2606.</code></pre>
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb484-1"><a href="vis.html#cb484-1" aria-hidden="true"></a>bubble_plot &lt;-<span class="st"> </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(</span>
<span id="cb484-2"><a href="vis.html#cb484-2" aria-hidden="true"></a>  <span class="dt">data =</span> ausgangsdaten, </span>
<span id="cb484-3"><a href="vis.html#cb484-3" aria-hidden="true"></a>  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> gdpPercap, </span>
<span id="cb484-4"><a href="vis.html#cb484-4" aria-hidden="true"></a>                <span class="dt">y =</span> lifeExp, </span>
<span id="cb484-5"><a href="vis.html#cb484-5" aria-hidden="true"></a>                <span class="dt">size =</span> pop, </span>
<span id="cb484-6"><a href="vis.html#cb484-6" aria-hidden="true"></a>                <span class="dt">fill =</span> continent)</span>
<span id="cb484-7"><a href="vis.html#cb484-7" aria-hidden="true"></a>    ) <span class="op">+</span></span>
<span id="cb484-8"><a href="vis.html#cb484-8" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_point</span>(</span>
<span id="cb484-9"><a href="vis.html#cb484-9" aria-hidden="true"></a>    <span class="dt">alpha=</span><span class="fl">0.5</span>, <span class="dt">shape=</span><span class="dv">21</span>, <span class="dt">color=</span><span class="st">&quot;black&quot;</span></span>
<span id="cb484-10"><a href="vis.html#cb484-10" aria-hidden="true"></a>    ) <span class="op">+</span></span>
<span id="cb484-11"><a href="vis.html#cb484-11" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_size</span>(</span>
<span id="cb484-12"><a href="vis.html#cb484-12" aria-hidden="true"></a>    <span class="dt">range =</span> <span class="kw">c</span>(<span class="fl">0.1</span>, <span class="dv">24</span>), <span class="dt">name=</span><span class="st">&quot;Bevölkerung&quot;</span>, <span class="dt">guide =</span> <span class="ot">FALSE</span></span>
<span id="cb484-13"><a href="vis.html#cb484-13" aria-hidden="true"></a>    ) <span class="op">+</span></span>
<span id="cb484-14"><a href="vis.html#cb484-14" aria-hidden="true"></a><span class="st">  </span>viridis<span class="op">::</span><span class="kw">scale_fill_viridis</span>(</span>
<span id="cb484-15"><a href="vis.html#cb484-15" aria-hidden="true"></a>    <span class="dt">discrete=</span><span class="ot">TRUE</span>, <span class="dt">option=</span><span class="st">&quot;A&quot;</span></span>
<span id="cb484-16"><a href="vis.html#cb484-16" aria-hidden="true"></a>    ) <span class="op">+</span></span>
<span id="cb484-17"><a href="vis.html#cb484-17" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(</span>
<span id="cb484-18"><a href="vis.html#cb484-18" aria-hidden="true"></a>    <span class="dt">name =</span> <span class="st">&quot;Lebenserwartung in Jahren&quot;</span></span>
<span id="cb484-19"><a href="vis.html#cb484-19" aria-hidden="true"></a>    ) <span class="op">+</span></span>
<span id="cb484-20"><a href="vis.html#cb484-20" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_x_continuous</span>(</span>
<span id="cb484-21"><a href="vis.html#cb484-21" aria-hidden="true"></a>    <span class="dt">name =</span> <span class="st">&quot;BIP pro Kopf (1000 PPP)&quot;</span></span>
<span id="cb484-22"><a href="vis.html#cb484-22" aria-hidden="true"></a>    ) <span class="op">+</span></span>
<span id="cb484-23"><a href="vis.html#cb484-23" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">labs</span>(</span>
<span id="cb484-24"><a href="vis.html#cb484-24" aria-hidden="true"></a>    <span class="dt">caption =</span> <span class="st">&quot;Hinweis: Größe der Blasen repräsentiert Bevölkerungsanzahl. Quelle: Gapminder.&quot;</span></span>
<span id="cb484-25"><a href="vis.html#cb484-25" aria-hidden="true"></a>    ) <span class="op">+</span></span>
<span id="cb484-26"><a href="vis.html#cb484-26" aria-hidden="true"></a><span class="st">  </span>icaeDesign<span class="op">::</span><span class="kw">theme_icae</span>() <span class="op">+</span></span>
<span id="cb484-27"><a href="vis.html#cb484-27" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme</span>(</span>
<span id="cb484-28"><a href="vis.html#cb484-28" aria-hidden="true"></a>    <span class="dt">legend.position=</span><span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb484-29"><a href="vis.html#cb484-29" aria-hidden="true"></a>    <span class="dt">plot.caption =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="dv">0</span>)</span>
<span id="cb484-30"><a href="vis.html#cb484-30" aria-hidden="true"></a>    )</span>
<span id="cb484-31"><a href="vis.html#cb484-31" aria-hidden="true"></a>bubble_plot</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-37-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
</div>
<div id="linienchart" class="section level3" number="5.3.3">
<h3><span class="header-section-number">5.3.3</span> Linienchart</h3>
<p><strong>Besonders geeignet für:</strong> Veränderungen weniger Variablen über die Zeit.</p>
<p>Die klassischen Liniengraphen haben Sie bereits häufiger kennen gelernt.
Im folgenden wollen wir von mehreren Ländern über die Zeit den
Durchschnitt berechnen und dann Mittelwert und Standardabweichung über die Zeit
visualisieren.
Zuerst aggregieren wir die Daten mit den im letzten Kapitel kennen gelernten
Funktionen:</p>
<div class="sourceCode" id="cb485"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb485-1"><a href="vis.html#cb485-1" aria-hidden="true"></a><span class="kw">head</span>(arbeitslosen_daten)</span></code></pre></div>
<pre><code>#&gt;    year iso3c unemp_rate population_ameco     Gruppe
#&gt; 1: 1995   AUT        4.2          7948.28 Kernländer
#&gt; 2: 1996   AUT        4.7          7959.02 Kernländer
#&gt; 3: 1997   AUT        4.7          7968.04 Kernländer
#&gt; 4: 1998   AUT        4.7          7976.79 Kernländer
#&gt; 5: 1999   AUT        4.2          7992.32 Kernländer
#&gt; 6: 2000   AUT        3.9          8011.57 Kernländer</code></pre>
<div class="sourceCode" id="cb487"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb487-1"><a href="vis.html#cb487-1" aria-hidden="true"></a>gewichtete_daten &lt;-<span class="st"> </span>arbeitslosen_daten <span class="op">%&gt;%</span></span>
<span id="cb487-2"><a href="vis.html#cb487-2" aria-hidden="true"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(year, Gruppe) <span class="op">%&gt;%</span></span>
<span id="cb487-3"><a href="vis.html#cb487-3" aria-hidden="true"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">population_group=</span><span class="kw">sum</span>(population_ameco)) <span class="op">%&gt;%</span></span>
<span id="cb487-4"><a href="vis.html#cb487-4" aria-hidden="true"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></span>
<span id="cb487-5"><a href="vis.html#cb487-5" aria-hidden="true"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">pop_rel_group=</span>population_ameco <span class="op">/</span><span class="st"> </span>population_group) <span class="op">%&gt;%</span></span>
<span id="cb487-6"><a href="vis.html#cb487-6" aria-hidden="true"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">group_by</span>(year, Gruppe) <span class="op">%&gt;%</span></span>
<span id="cb487-7"><a href="vis.html#cb487-7" aria-hidden="true"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">summarise</span>(</span>
<span id="cb487-8"><a href="vis.html#cb487-8" aria-hidden="true"></a>    <span class="dt">unemp_rate_mean=</span><span class="kw">weighted.mean</span>(unemp_rate, </span>
<span id="cb487-9"><a href="vis.html#cb487-9" aria-hidden="true"></a>                                  pop_rel_group),</span>
<span id="cb487-10"><a href="vis.html#cb487-10" aria-hidden="true"></a>    <span class="dt">unemp_rate_sd=</span><span class="kw">sd</span>(unemp_rate<span class="op">*</span>pop_rel_group)</span>
<span id="cb487-11"><a href="vis.html#cb487-11" aria-hidden="true"></a>  ) <span class="op">%&gt;%</span></span>
<span id="cb487-12"><a href="vis.html#cb487-12" aria-hidden="true"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">ungroup</span>() </span></code></pre></div>
<pre><code>#&gt; `summarise()` regrouping output by &#39;year&#39; (override with `.groups` argument)</code></pre>
<div class="sourceCode" id="cb489"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb489-1"><a href="vis.html#cb489-1" aria-hidden="true"></a><span class="kw">head</span>(gewichtete_daten)</span></code></pre></div>
<pre><code>#&gt; # A tibble: 6 x 4
#&gt;    year Gruppe           unemp_rate_mean unemp_rate_sd
#&gt;   &lt;dbl&gt; &lt;chr&gt;                      &lt;dbl&gt;         &lt;dbl&gt;
#&gt; 1  1995 Kernländer                  8.36          2.07
#&gt; 2  1995 Peripherieländer           13.9           3.03
#&gt; 3  1996 Kernländer                  8.74          2.26
#&gt; 4  1996 Peripherieländer           13.7           2.94
#&gt; 5  1997 Kernländer                  8.95          2.46
#&gt; 6  1997 Peripherieländer           13.1           2.80</code></pre>
<p>Nun erstellen wir den Plot.
Die Markierung für die Standardabweichung fügen wir mit der Funktion
<code>ggplot2::geom_ribbon()</code> ein, der wir mit <code>ymin</code> und <code>ymax</code> jeweils das obere und untere
Ende der einzufärbenden Region als Argument übergeben.
Da wir bereits eine Legende für den Mittelwert haben deaktivieren wir die
Legende für die Markierung mit dem Argument <code>show.legend=FALSE</code>.</p>
<div class="sourceCode" id="cb491"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb491-1"><a href="vis.html#cb491-1" aria-hidden="true"></a>x_axis_breaks &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1995</span>, <span class="dv">2000</span>, <span class="dv">2005</span>, <span class="dv">2007</span>, <span class="dv">2010</span>, <span class="dv">2014</span>, <span class="dv">2018</span>)</span>
<span id="cb491-2"><a href="vis.html#cb491-2" aria-hidden="true"></a></span>
<span id="cb491-3"><a href="vis.html#cb491-3" aria-hidden="true"></a>arbeitslosen_plot &lt;-<span class="st"> </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(</span>
<span id="cb491-4"><a href="vis.html#cb491-4" aria-hidden="true"></a>  <span class="dt">data =</span> gewichtete_daten, </span>
<span id="cb491-5"><a href="vis.html#cb491-5" aria-hidden="true"></a>  <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>year, </span>
<span id="cb491-6"><a href="vis.html#cb491-6" aria-hidden="true"></a>                <span class="dt">y=</span>unemp_rate_mean, </span>
<span id="cb491-7"><a href="vis.html#cb491-7" aria-hidden="true"></a>                <span class="dt">color=</span>Gruppe)</span>
<span id="cb491-8"><a href="vis.html#cb491-8" aria-hidden="true"></a>  ) <span class="op">+</span></span>
<span id="cb491-9"><a href="vis.html#cb491-9" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb491-10"><a href="vis.html#cb491-10" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_line</span>() <span class="op">+</span></span>
<span id="cb491-11"><a href="vis.html#cb491-11" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_ribbon</span>(</span>
<span id="cb491-12"><a href="vis.html#cb491-12" aria-hidden="true"></a>    <span class="kw">aes</span>(<span class="dt">ymin=</span>unemp_rate_mean<span class="op">-</span>unemp_rate_sd, </span>
<span id="cb491-13"><a href="vis.html#cb491-13" aria-hidden="true"></a>        <span class="dt">ymax=</span>unemp_rate_mean<span class="op">+</span>unemp_rate_sd,</span>
<span id="cb491-14"><a href="vis.html#cb491-14" aria-hidden="true"></a>        <span class="dt">linetype=</span><span class="ot">NA</span>, <span class="dt">fill=</span>Gruppe), </span>
<span id="cb491-15"><a href="vis.html#cb491-15" aria-hidden="true"></a>    <span class="dt">alpha=</span><span class="fl">0.25</span>, </span>
<span id="cb491-16"><a href="vis.html#cb491-16" aria-hidden="true"></a>    <span class="dt">show.legend =</span> <span class="ot">FALSE</span>) <span class="op">+</span></span>
<span id="cb491-17"><a href="vis.html#cb491-17" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ylab</span>(<span class="st">&quot;Bevölkerungsgewichtete Arbeitslosenquote&quot;</span>) <span class="op">+</span></span>
<span id="cb491-18"><a href="vis.html#cb491-18" aria-hidden="true"></a><span class="st">  </span>icaeDesign<span class="op">::</span><span class="kw">scale_color_icae</span>(</span>
<span id="cb491-19"><a href="vis.html#cb491-19" aria-hidden="true"></a>    <span class="dt">palette =</span> <span class="st">&quot;mixed&quot;</span>, </span>
<span id="cb491-20"><a href="vis.html#cb491-20" aria-hidden="true"></a>    <span class="dt">aesthetics=</span><span class="kw">c</span>(<span class="st">&quot;color&quot;</span>, <span class="st">&quot;fill&quot;</span>)</span>
<span id="cb491-21"><a href="vis.html#cb491-21" aria-hidden="true"></a>    ) <span class="op">+</span></span>
<span id="cb491-22"><a href="vis.html#cb491-22" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">labs</span>(</span>
<span id="cb491-23"><a href="vis.html#cb491-23" aria-hidden="true"></a>    <span class="dt">title =</span> <span class="st">&quot;Bevölkerungsgewichtete Arbeitslosenquote&quot;</span>,</span>
<span id="cb491-24"><a href="vis.html#cb491-24" aria-hidden="true"></a>    <span class="dt">caption =</span> <span class="st">&quot;Quelle: Gräbner et al. (2019, CJE)&quot;</span></span>
<span id="cb491-25"><a href="vis.html#cb491-25" aria-hidden="true"></a>    ) <span class="op">+</span><span class="st"> </span></span>
<span id="cb491-26"><a href="vis.html#cb491-26" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_x_continuous</span>(</span>
<span id="cb491-27"><a href="vis.html#cb491-27" aria-hidden="true"></a>    <span class="dt">breaks=</span>x_axis_breaks, </span>
<span id="cb491-28"><a href="vis.html#cb491-28" aria-hidden="true"></a>    <span class="dt">expand =</span> <span class="kw">expansion</span>(</span>
<span id="cb491-29"><a href="vis.html#cb491-29" aria-hidden="true"></a>      <span class="dt">mult =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="dt">add =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.5</span>)</span>
<span id="cb491-30"><a href="vis.html#cb491-30" aria-hidden="true"></a>      )</span>
<span id="cb491-31"><a href="vis.html#cb491-31" aria-hidden="true"></a>    ) <span class="op">+</span></span>
<span id="cb491-32"><a href="vis.html#cb491-32" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(</span>
<span id="cb491-33"><a href="vis.html#cb491-33" aria-hidden="true"></a>    <span class="dt">labels =</span> scales<span class="op">::</span><span class="kw">percent_format</span>(<span class="dt">accuracy =</span> <span class="dv">1</span>, <span class="dt">scale =</span> <span class="dv">1</span>)</span>
<span id="cb491-34"><a href="vis.html#cb491-34" aria-hidden="true"></a>    ) <span class="op">+</span></span>
<span id="cb491-35"><a href="vis.html#cb491-35" aria-hidden="true"></a><span class="st">  </span>icaeDesign<span class="op">::</span><span class="kw">theme_icae</span>() <span class="op">+</span></span>
<span id="cb491-36"><a href="vis.html#cb491-36" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme</span>(<span class="dt">axis.title.x =</span> <span class="kw">element_blank</span>())</span>
<span id="cb491-37"><a href="vis.html#cb491-37" aria-hidden="true"></a>arbeitslosen_plot </span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-40-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Die Grafik stammt aus <span class="citation">Gräbner et al. (<a href="#ref-CJE" role="doc-biblioref">2020</a>)</span>.
Bei den Kernländern handelt es sich um Österreich, Belgien, Finnland, Luxenburg,
Deutschland und Holland. Die Peripherieländer sind Griechenland, Irland,
Italien, Portugal und Spanien.</p>
</div>
<div id="histogramme-und-dichteplots" class="section level3" number="5.3.4">
<h3><span class="header-section-number">5.3.4</span> Histogramme und Dichteplots</h3>
<p><strong>Besonders geeignet für:</strong> Verteilung einer Variable.</p>
<p><strong>Mögliche Probleme:</strong> Die Breite der Balken hat in der Regel einen großen
Einfluss auf das Erscheinungsbild und die Botschaft der Grafik.
Die Entscheidung ist nicht einfach und es gibt
<a href="https://en.wikipedia.org/wiki/Histogram#Number_of_bins_and_width">mehrere Heuristiken</a>.</p>
<p><strong>Hinweis:</strong> Wenn Sie extrem viele Datenpunkte haben können Sie die Daten als
stetig interpretieren und gleich eine Wahrscheinlichkeitsdichte auf Basis Ihrer
Daten berechnen.
Dann sparen Sie sich das Problem der Balkenbreite.</p>
<p><strong>Beispiel 1: Einfaches Histogram</strong></p>
<div class="sourceCode" id="cb492"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb492-1"><a href="vis.html#cb492-1" aria-hidden="true"></a><span class="kw">head</span>(histogram_daten)</span></code></pre></div>
<pre><code>#&gt;             x
#&gt; 1 -0.56047565
#&gt; 2 -0.23017749
#&gt; 3  1.55870831
#&gt; 4  0.07050839
#&gt; 5  0.12928774
#&gt; 6  1.71506499</code></pre>
<div class="sourceCode" id="cb494"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb494-1"><a href="vis.html#cb494-1" aria-hidden="true"></a>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(<span class="dt">data =</span> histogram_daten, </span>
<span id="cb494-2"><a href="vis.html#cb494-2" aria-hidden="true"></a>       <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>x)) <span class="op">+</span></span>
<span id="cb494-3"><a href="vis.html#cb494-3" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_histogram</span>(<span class="dt">alpha=</span><span class="fl">0.75</span>, <span class="dt">color=</span><span class="ot">NA</span>, <span class="dt">fill=</span><span class="st">&quot;#002966&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb494-4"><a href="vis.html#cb494-4" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;Häufigkeit&quot;</span>, </span>
<span id="cb494-5"><a href="vis.html#cb494-5" aria-hidden="true"></a>                     <span class="dt">expand =</span> <span class="kw">expansion</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>))) <span class="op">+</span></span>
<span id="cb494-6"><a href="vis.html#cb494-6" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ggtitle</span>(<span class="st">&quot;Histogram mit 30 Balken&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb494-7"><a href="vis.html#cb494-7" aria-hidden="true"></a><span class="st">  </span>icaeDesign<span class="op">::</span><span class="kw">theme_icae</span>() <span class="op">+</span></span>
<span id="cb494-8"><a href="vis.html#cb494-8" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme</span>(<span class="dt">axis.title.x =</span> <span class="kw">element_blank</span>())</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-42-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Im Folgenden sehen Sie auch den großen Effekt unterschiedlicher Balkendicken:</p>
<div class="sourceCode" id="cb495"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb495-1"><a href="vis.html#cb495-1" aria-hidden="true"></a>bin_size &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">20</span>, <span class="dv">50</span>, <span class="dv">100</span>)</span>
<span id="cb495-2"><a href="vis.html#cb495-2" aria-hidden="true"></a>hist_list &lt;-<span class="st"> </span><span class="kw">list</span>()</span>
<span id="cb495-3"><a href="vis.html#cb495-3" aria-hidden="true"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(bin_size)){</span>
<span id="cb495-4"><a href="vis.html#cb495-4" aria-hidden="true"></a>  hist_list[[i]] &lt;-<span class="st"> </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(<span class="dt">data =</span> histogram_daten, </span>
<span id="cb495-5"><a href="vis.html#cb495-5" aria-hidden="true"></a>       <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>x)) <span class="op">+</span></span>
<span id="cb495-6"><a href="vis.html#cb495-6" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_histogram</span>(<span class="dt">alpha=</span><span class="fl">0.75</span>, <span class="dt">color=</span><span class="ot">NA</span>, <span class="dt">fill=</span><span class="st">&quot;#002966&quot;</span>, <span class="dt">bins =</span> bin_size[i]) <span class="op">+</span><span class="st"> </span></span>
<span id="cb495-7"><a href="vis.html#cb495-7" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;Häufigkeit&quot;</span>, </span>
<span id="cb495-8"><a href="vis.html#cb495-8" aria-hidden="true"></a>                     <span class="dt">expand =</span> <span class="kw">expansion</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>))) <span class="op">+</span></span>
<span id="cb495-9"><a href="vis.html#cb495-9" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ggtitle</span>(<span class="kw">paste0</span>(<span class="st">&quot;Histogram mit &quot;</span>, bin_size[i], <span class="st">&quot; Balken&quot;</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb495-10"><a href="vis.html#cb495-10" aria-hidden="true"></a><span class="st">  </span>icaeDesign<span class="op">::</span><span class="kw">theme_icae</span>() <span class="op">+</span></span>
<span id="cb495-11"><a href="vis.html#cb495-11" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme</span>(<span class="dt">axis.title.x =</span> <span class="kw">element_blank</span>())</span>
<span id="cb495-12"><a href="vis.html#cb495-12" aria-hidden="true"></a>}</span>
<span id="cb495-13"><a href="vis.html#cb495-13" aria-hidden="true"></a>ggpubr<span class="op">::</span><span class="kw">ggarrange</span>(<span class="dt">plotlist =</span> hist_list, <span class="dt">ncol =</span> <span class="dv">2</span>, <span class="dt">nrow =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-43-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p><strong>Beispiel 2: Dichteverteilung von Exportkörben</strong></p>
<p>Diese Daten beschreiben die Zusammensetzung der Exportkörbe von Deutschland,
Finnland und China bezüglich ihrer
<a href="http://atlas.cid.harvard.edu/glossary">ökonomischen Komplexität</a>:</p>
<pre><code>#&gt;              cgroup commoditycode         pci    exp_share
#&gt; 1:       Kernländer          0101  0.06424262 0.0001312370
#&gt; 2: Peripherieländer          0101  0.06424262 0.0004639794
#&gt; 3:       Kernländer          0102 -0.49254290 0.0005162508
#&gt; 4: Peripherieländer          0102 -0.49254290 0.0003700469
#&gt; 5:       Kernländer          0103  0.51082386 0.0005324995
#&gt; 6: Peripherieländer          0103  0.51082386 0.0004082251</code></pre>
<p>Aufgrund der großen Datenmenge kann die Verteilung der Exporte hier direkt über
die Dichte dargestellt werden.
Hierzu wird die Funktion <code>ggplot2::geom_density()</code> verwendet.
Um die Güter nach ihrem tatsächlichen Exportwert zu gewichten verwenden wir
die Ästhetik <code>weight</code>:</p>
<div class="sourceCode" id="cb497"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb497-1"><a href="vis.html#cb497-1" aria-hidden="true"></a>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(<span class="dt">data =</span> exportzusammensetzung, </span>
<span id="cb497-2"><a href="vis.html#cb497-2" aria-hidden="true"></a>       <span class="dt">mapping =</span> <span class="kw">aes</span>(</span>
<span id="cb497-3"><a href="vis.html#cb497-3" aria-hidden="true"></a>         <span class="dt">x=</span>pci, </span>
<span id="cb497-4"><a href="vis.html#cb497-4" aria-hidden="true"></a>         <span class="dt">color=</span>cgroup, </span>
<span id="cb497-5"><a href="vis.html#cb497-5" aria-hidden="true"></a>         <span class="dt">fill=</span>cgroup)</span>
<span id="cb497-6"><a href="vis.html#cb497-6" aria-hidden="true"></a>       ) <span class="op">+</span><span class="st"> </span></span>
<span id="cb497-7"><a href="vis.html#cb497-7" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_density</span>(</span>
<span id="cb497-8"><a href="vis.html#cb497-8" aria-hidden="true"></a>    <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">weight=</span>exp_share), </span>
<span id="cb497-9"><a href="vis.html#cb497-9" aria-hidden="true"></a>    <span class="dt">alpha=</span><span class="fl">0.5</span></span>
<span id="cb497-10"><a href="vis.html#cb497-10" aria-hidden="true"></a>    ) <span class="op">+</span><span class="st"> </span></span>
<span id="cb497-11"><a href="vis.html#cb497-11" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">labs</span>(</span>
<span id="cb497-12"><a href="vis.html#cb497-12" aria-hidden="true"></a>    <span class="dt">title =</span> <span class="st">&quot;Produktkomplexität von Exportkörben (2000-2017)&quot;</span>,</span>
<span id="cb497-13"><a href="vis.html#cb497-13" aria-hidden="true"></a>    <span class="dt">caption =</span> <span class="st">&quot;Quelle: Gräbner et al. (2020, CJE)&quot;</span></span>
<span id="cb497-14"><a href="vis.html#cb497-14" aria-hidden="true"></a>    ) <span class="op">+</span><span class="st"> </span></span>
<span id="cb497-15"><a href="vis.html#cb497-15" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ylab</span>(<span class="st">&quot;Dichte der Produkte im Exportkorb&quot;</span>) <span class="op">+</span></span>
<span id="cb497-16"><a href="vis.html#cb497-16" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">xlab</span>(<span class="st">&quot;Produktkomplexität&quot;</span>) <span class="op">+</span></span>
<span id="cb497-17"><a href="vis.html#cb497-17" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.62</span>), <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="op">+</span></span>
<span id="cb497-18"><a href="vis.html#cb497-18" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_x_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">3</span>, <span class="dv">3</span>), <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="op">+</span></span>
<span id="cb497-19"><a href="vis.html#cb497-19" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme_bw</span>() <span class="op">+</span></span>
<span id="cb497-20"><a href="vis.html#cb497-20" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="kw">c</span>(<span class="fl">0.175</span>, <span class="fl">0.8</span>), </span>
<span id="cb497-21"><a href="vis.html#cb497-21" aria-hidden="true"></a>                 <span class="dt">panel.border =</span> <span class="kw">element_blank</span>(), </span>
<span id="cb497-22"><a href="vis.html#cb497-22" aria-hidden="true"></a>                 <span class="dt">axis.line =</span> <span class="kw">element_line</span>())</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-45-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Auch diese Abbildung stammt ursprünglich aus <span class="citation">Gräbner et al. (<a href="#ref-CJE" role="doc-biblioref">2020</a>)</span>.</p>
</div>
<div id="balkendiagramme" class="section level3" number="5.3.5">
<h3><span class="header-section-number">5.3.5</span> Balkendiagramme</h3>
<p><strong>Besonders geeignet für:</strong> Vergleich der Ausprägung der gleichen Variable in
mehreren Gruppen.</p>
<p>Balkendiagramme sind auf den ersten Blick sehr ähnlich zu Histogrammen, sie
geben jedoch nicht notwendigerweise Häufigkeiten an.
Sie können häufig als Substitut für die zu vermeidenden <a href="vis.html#vis-pie">Kuchendiagramme</a>
verwendet werden.</p>
<p><strong>Beispiel: Balkendiagramm für kumulierte Wachstumsraten in mehreren Ländern</strong></p>
<p>Eine häufige Herausforderung ist es, die Balken nach Größe zu sortieren.
Das geht mit der Funktion <code>reorder()</code>, die sie innerhalb der Funktion <code>aes()</code>
anwenden:</p>
<div class="sourceCode" id="cb498"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb498-1"><a href="vis.html#cb498-1" aria-hidden="true"></a>cum_growth_countries_full &lt;-<span class="st"> </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(</span>
<span id="cb498-2"><a href="vis.html#cb498-2" aria-hidden="true"></a>  <span class="dt">data =</span> daten_cum_growth) <span class="op">+</span><span class="st"> </span></span>
<span id="cb498-3"><a href="vis.html#cb498-3" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_bar</span>(</span>
<span id="cb498-4"><a href="vis.html#cb498-4" aria-hidden="true"></a>    <span class="kw">aes</span>(<span class="dt">x=</span><span class="kw">reorder</span>(Land, <span class="op">-</span>Wachstum.Land.kum), </span>
<span id="cb498-5"><a href="vis.html#cb498-5" aria-hidden="true"></a>        <span class="dt">y=</span>Wachstum.Land.kum), </span>
<span id="cb498-6"><a href="vis.html#cb498-6" aria-hidden="true"></a>    <span class="dt">color=</span><span class="st">&quot;#002966&quot;</span>, <span class="dt">fill=</span><span class="st">&quot;#002966&quot;</span>, </span>
<span id="cb498-7"><a href="vis.html#cb498-7" aria-hidden="true"></a>    <span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span></span>
<span id="cb498-8"><a href="vis.html#cb498-8" aria-hidden="true"></a>    ) <span class="op">+</span></span>
<span id="cb498-9"><a href="vis.html#cb498-9" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ylab</span>(<span class="st">&quot;Kumulierte Wachstumsrate&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb498-10"><a href="vis.html#cb498-10" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ggtitle</span>(<span class="st">&quot;Kumuliertes Wachstum von 2009 bis 2018&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb498-11"><a href="vis.html#cb498-11" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="dv">0</span>) <span class="op">+</span></span>
<span id="cb498-12"><a href="vis.html#cb498-12" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(</span>
<span id="cb498-13"><a href="vis.html#cb498-13" aria-hidden="true"></a>    <span class="dt">limits =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">25</span>, <span class="kw">max</span>(daten_cum_growth<span class="op">$</span>Wachstum.Land.kum) <span class="op">+</span><span class="st"> </span><span class="dv">5</span>), </span>
<span id="cb498-14"><a href="vis.html#cb498-14" aria-hidden="true"></a>    <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="op">-</span><span class="dv">25</span>, <span class="kw">max</span>(daten_cum_growth<span class="op">$</span>Wachstum.Land.kum) <span class="op">+</span><span class="st"> </span><span class="dv">5</span>, </span>
<span id="cb498-15"><a href="vis.html#cb498-15" aria-hidden="true"></a>                 <span class="dt">by=</span><span class="fl">12.5</span>), </span>
<span id="cb498-16"><a href="vis.html#cb498-16" aria-hidden="true"></a>    <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb498-17"><a href="vis.html#cb498-17" aria-hidden="true"></a>    <span class="dt">labels =</span> scales<span class="op">::</span><span class="kw">percent_format</span>(<span class="dt">accuracy =</span> <span class="dv">1</span>, <span class="dt">scale =</span> <span class="dv">1</span>)</span>
<span id="cb498-18"><a href="vis.html#cb498-18" aria-hidden="true"></a>    ) <span class="op">+</span><span class="st"> </span></span>
<span id="cb498-19"><a href="vis.html#cb498-19" aria-hidden="true"></a><span class="st">  </span>icaeDesign<span class="op">::</span><span class="kw">theme_icae</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb498-20"><a href="vis.html#cb498-20" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle =</span> <span class="dv">90</span>, <span class="dt">hjust =</span> <span class="dv">1</span>), </span>
<span id="cb498-21"><a href="vis.html#cb498-21" aria-hidden="true"></a>        <span class="dt">axis.title.x =</span> <span class="kw">element_blank</span>(), </span>
<span id="cb498-22"><a href="vis.html#cb498-22" aria-hidden="true"></a>        <span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>) </span>
<span id="cb498-23"><a href="vis.html#cb498-23" aria-hidden="true"></a>cum_growth_countries_full</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-47-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Die Abbildung stammt aus <span class="citation">Kapeller, Gräbner, and Heimberger (<a href="#ref-fes" role="doc-biblioref">2019</a>)</span>, einer Studie, die sich mit Polarisierungstendenzen
in Europa und möglichen Gegenmaßnahmen auseinandersetzt.</p>
</div>
<div id="vis-pie" class="section level3" number="5.3.6">
<h3><span class="header-section-number">5.3.6</span> Kuchendiagramme</h3>
<blockquote>
A table is nearly always better than a dumb pie chart; the only worse design
than a pie chart is several of them, for then the viewer is asked to compare
quantities located in spatial disarray both within and between charts […]
Given their low density and failure to order numbers along a visual dimension,
pie charts should never be used.
<footer>
— Edward Tufte
</footer>
</blockquote>
<p>Es gibt keine kontraproduktiveren Abbildungen als Kuchendiagramme.
Entsprechend sollten Sie diese auch <strong>nie</strong> verwenden.
Es gibt für jeden möglichen Anwendungsfall mit Sicherheit bessere Alternativen.</p>
<p>Warum Kuchendiagramme so grausig sind können Sie
<a href="https://infogram.com/blog/the-infamous-pie-chart-history-pros-cons-and-best-practices/">hier</a>,
<a href="https://www.richardhollins.com/blog/why-pie-charts-suck/">hier</a>,
<a href="http://www.di.unipi.it/~nids/docs/pie_charts_suck_balls_and_ass_too.html">hier</a> oder
<a href="https://medium.com/the-mission/to-pie-charts-3b1f57bcb34a">hier</a> nachlesen.</p>
</div>
<div id="vis-kinds-summary" class="section level3" number="5.3.7">
<h3><span class="header-section-number">5.3.7</span> Zusammenfassung</h3>
<p>Tabelle <a href="vis.html#tab:diagramme">5.1</a> fasst die hier diskutierten Visualisierungsmöglichkeiten
noch einmal kurz zusammen.</p>
<table>
<caption><span id="tab:diagramme">Table 5.1: </span> Visualisierungsmöglichkeiten in R.</caption>
<colgroup>
<col width="14%" />
<col width="45%" />
<col width="39%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Art</strong></th>
<th><strong>Anwendungsgebiet</strong></th>
<th><strong>Relevante Funktion aus ggplot2</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Balkendiagramm</td>
<td>Vergleich von Werten</td>
<td><code>geom_bar()</code></td>
</tr>
<tr class="even">
<td>Linienchart</td>
<td>Dynamiken</td>
<td><code>geom_line()</code>, <code>geom_ribbon()</code></td>
</tr>
<tr class="odd">
<td>Histogram</td>
<td>Verteilungen weniger Variablen</td>
<td><code>geom_bar()</code>, <code>geom_hist()</code>, <code>geom_density()</code></td>
</tr>
<tr class="even">
<td>Streu- und Blasendiagramm</td>
<td>Zusammenhänge zwischen 2-4 variablen</td>
<td><code>geom_point()</code></td>
</tr>
<tr class="odd">
<td>Kuchendiagramm</td>
<td>Nichts</td>
<td>Keine</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="vis-adv" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> Beispiele aus der Praxis und fortgeschrittene Themen</h2>
<p>Die folgenden Arbeitsschritte tauchen in der Praxis sehr häufig auf und werden
deshalb in etwas größerem Detail besprochen.</p>
<div id="regressionsgerade" class="section level3" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> Regressionsgerade</h3>
<p>In diesem Unterabschnitt werden einige Themen aus Kapitel <a href="linmodel.html#linmodel">10</a>
zum Thema Regressionsanalyse vorausgesetzt.
Falls Sie noch nichts von linearen Regressionen gehört haben können Sie diesen
Abschnitt einfach überspringen.</p>
<p>Oftmals möchten wir die Ergebnisse einer Regression in den Daten
abbilden.
Im einfachsten Falle soll es nur die aus einer linearen Regression
resultierenden Gerade sein.
Das können wir dann ganz einfach als eigenen Layer mit der Funktion
<code>ggplot2::geom_smooth(method="lm")</code> hinzufügen.
Mit den weiteren Argumenten können wir z.B. die Farbe der Linie
(<code>color=black</code>) oder die Standardfehler um die Linie deaktivieren
(<code>se=FALSE</code>):</p>
<div class="sourceCode" id="cb499"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb499-1"><a href="vis.html#cb499-1" aria-hidden="true"></a>mort_rate_plot &lt;-<span class="st"> </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(<span class="dt">data =</span> development_data, </span>
<span id="cb499-2"><a href="vis.html#cb499-2" aria-hidden="true"></a>       <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span><span class="kw">log</span>(GDP_PPPpc), </span>
<span id="cb499-3"><a href="vis.html#cb499-3" aria-hidden="true"></a>                     <span class="dt">y=</span><span class="kw">log</span>(MORTRATE))</span>
<span id="cb499-4"><a href="vis.html#cb499-4" aria-hidden="true"></a>       ) <span class="op">+</span></span>
<span id="cb499-5"><a href="vis.html#cb499-5" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_point</span>(<span class="dt">alpha=</span><span class="fl">0.25</span>) <span class="op">+</span></span>
<span id="cb499-6"><a href="vis.html#cb499-6" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">labs</span>(</span>
<span id="cb499-7"><a href="vis.html#cb499-7" aria-hidden="true"></a>    <span class="dt">title =</span> <span class="st">&quot;Pro-Kopf Einkommen und Kindersterblichkeit&quot;</span>, </span>
<span id="cb499-8"><a href="vis.html#cb499-8" aria-hidden="true"></a>    <span class="dt">caption =</span> <span class="st">&quot;Daten: Weltbank.&quot;</span></span>
<span id="cb499-9"><a href="vis.html#cb499-9" aria-hidden="true"></a>  ) <span class="op">+</span></span>
<span id="cb499-10"><a href="vis.html#cb499-10" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">xlab</span>(<span class="st">&quot;BIP pro Kopf (PPP, log)&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb499-11"><a href="vis.html#cb499-11" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ylab</span>(<span class="st">&quot;Kindersterblichkeit in % (log)&quot;</span>) <span class="op">+</span></span>
<span id="cb499-12"><a href="vis.html#cb499-12" aria-hidden="true"></a><span class="st">  </span>icaeDesign<span class="op">::</span><span class="kw">theme_icae</span>()</span>
<span id="cb499-13"><a href="vis.html#cb499-13" aria-hidden="true"></a></span>
<span id="cb499-14"><a href="vis.html#cb499-14" aria-hidden="true"></a>mort_rate_plot <span class="op">+</span><span class="st"> </span>ggplot2<span class="op">::</span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>, </span>
<span id="cb499-15"><a href="vis.html#cb499-15" aria-hidden="true"></a>                             <span class="dt">color=</span><span class="st">&quot;#002966&quot;</span>, </span>
<span id="cb499-16"><a href="vis.html#cb499-16" aria-hidden="true"></a>                             <span class="dt">se =</span> <span class="ot">TRUE</span>) </span></code></pre></div>
<pre><code>#&gt; `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-50-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Alternativ kann die Gerade auch mit Hilfe der Funktion <code>ggplot2::geom_abline()</code>
eingezeichnet werden.
Dazu müssen wir Regression vorher aber explizit mit <code>lm()</code> durchführen:</p>
<div class="sourceCode" id="cb501"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb501-1"><a href="vis.html#cb501-1" aria-hidden="true"></a>lm_obj &lt;-<span class="st"> </span><span class="kw">lm</span>(<span class="kw">log</span>(MORTRATE) <span class="op">~</span><span class="st"> </span><span class="kw">log</span>(GDP_PPPpc), </span>
<span id="cb501-2"><a href="vis.html#cb501-2" aria-hidden="true"></a>             <span class="dt">data =</span> development_data)</span>
<span id="cb501-3"><a href="vis.html#cb501-3" aria-hidden="true"></a><span class="kw">summary</span>(lm_obj)</span></code></pre></div>
<pre><code>#&gt; 
#&gt; Call:
#&gt; lm(formula = log(MORTRATE) ~ log(GDP_PPPpc), data = development_data)
#&gt; 
#&gt; Residuals:
#&gt;      Min       1Q   Median       3Q      Max 
#&gt; -1.23149 -0.38749 -0.04103  0.35433  1.91519 
#&gt; 
#&gt; Coefficients:
#&gt;                Estimate Std. Error t value Pr(&gt;|t|)    
#&gt; (Intercept)    11.62670    0.12008   96.83   &lt;2e-16 ***
#&gt; log(GDP_PPPpc) -0.94723    0.01287  -73.62   &lt;2e-16 ***
#&gt; ---
#&gt; Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
#&gt; 
#&gt; Residual standard error: 0.5012 on 1363 degrees of freedom
#&gt; Multiple R-squared:  0.799,	Adjusted R-squared:  0.7989 
#&gt; F-statistic:  5420 on 1 and 1363 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>Häufig möchten wir auch noch die Regressionsgleichung im Plot abbilden,
und eventuell Kennzahlen der Regression, wie das <span class="math inline">\(R^2\)</span> hinzufügen.
Das können wir mit der Funktion <code>ggplot2::annotate()</code> machen.
Als erstes Argument müssen wir mit <code>geom</code> die Art der Anmerkung spezifizieren
(in diesem Falle: <code>geom='text'</code>). Danach werden über <code>x</code> und <code>y</code> die
Koordinaten angegeben. Über <code>label</code> wird dann der eigentliche Text
angegeben, der über <code>hjust</code> wie oben beschrieben noch formatiert werden kann.</p>
<p>Da eine Regressionsgleichung in der Regel leichter in LaTeX zu schreiben
ist, empfiehlt sich hier die Verwendung der Funktion <code>TeX()</code> aus dem Paket
<a href="https://github.com/stefano-meschiari/latex2exp">latex2exp</a> <span class="citation">(Meschiari <a href="#ref-R-latex" role="doc-biblioref">2015</a>)</span>.
Hier können wir quasi normalen LaTeX-Code verwenden, müssen aber das
häufig verwendete <code>\</code> als <code>\\</code> schreiben, damit es als <code>\</code> interpretiert
wird:</p>
<div class="sourceCode" id="cb503"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb503-1"><a href="vis.html#cb503-1" aria-hidden="true"></a>reg_eq &lt;-<span class="st"> &quot;$</span><span class="ch">\\</span><span class="st">log(MORTRATE) = </span><span class="ch">\\</span><span class="st">beta_0 + </span><span class="ch">\\</span><span class="st">beta_1 </span><span class="ch">\\</span><span class="st">log(GDP) + </span><span class="ch">\\</span><span class="st">epsilon$&quot;</span></span>
<span id="cb503-2"><a href="vis.html#cb503-2" aria-hidden="true"></a>rsq &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&quot;$R^2=&quot;</span>, <span class="kw">round</span>(<span class="kw">summary</span>(lm_obj)[[<span class="st">&quot;r.squared&quot;</span>]], <span class="dv">3</span>), <span class="st">&quot;$&quot;</span>)</span>
<span id="cb503-3"><a href="vis.html#cb503-3" aria-hidden="true"></a>mort_rate_plot_marked &lt;-<span class="st"> </span>mort_rate_plot <span class="op">+</span><span class="st"> </span></span>
<span id="cb503-4"><a href="vis.html#cb503-4" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_abline</span>(</span>
<span id="cb503-5"><a href="vis.html#cb503-5" aria-hidden="true"></a>    <span class="dt">intercept =</span> lm_obj[[<span class="st">&quot;coefficients&quot;</span>]][<span class="dv">1</span>],</span>
<span id="cb503-6"><a href="vis.html#cb503-6" aria-hidden="true"></a>    <span class="dt">slope =</span> lm_obj[[<span class="st">&quot;coefficients&quot;</span>]][<span class="dv">2</span>]) <span class="op">+</span></span>
<span id="cb503-7"><a href="vis.html#cb503-7" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">annotate</span>(<span class="dt">geom =</span> <span class="st">&quot;text&quot;</span>, </span>
<span id="cb503-8"><a href="vis.html#cb503-8" aria-hidden="true"></a>           <span class="dt">x =</span> <span class="fl">6.25</span>, </span>
<span id="cb503-9"><a href="vis.html#cb503-9" aria-hidden="true"></a>           <span class="dt">y =</span> <span class="fl">1.25</span>, <span class="dt">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb503-10"><a href="vis.html#cb503-10" aria-hidden="true"></a>           <span class="dt">label =</span> <span class="kw">TeX</span>(reg_eq)) <span class="op">+</span></span>
<span id="cb503-11"><a href="vis.html#cb503-11" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">annotate</span>(<span class="dt">geom =</span> <span class="st">&quot;text&quot;</span>, </span>
<span id="cb503-12"><a href="vis.html#cb503-12" aria-hidden="true"></a>           <span class="dt">x =</span> <span class="fl">6.25</span>, </span>
<span id="cb503-13"><a href="vis.html#cb503-13" aria-hidden="true"></a>           <span class="dt">y =</span> <span class="fl">0.85</span>, <span class="dt">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb503-14"><a href="vis.html#cb503-14" aria-hidden="true"></a>           <span class="dt">label =</span> <span class="kw">TeX</span>(rsq))</span>
<span id="cb503-15"><a href="vis.html#cb503-15" aria-hidden="true"></a>mort_rate_plot_marked</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-52-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
</div>
<div id="vis-viele-plots" class="section level3" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> Mehrere Plots in einer Abbildung</h3>
<p>Sehr häufig möchten wir in einer Grafik mehrere Plots unterbringen.
Das ist mit dem Paket <a href="https://github.com/kassambara/ggpubr">ggpubr</a> <span class="citation">(Kassambara <a href="#ref-R-ggpubr" role="doc-biblioref">2019</a>)</span>
leicht zu machen.
Dieses Paket bietet zahlreiche Gestaltungsmöglichkeiten.
Für mehrere Plots ist die Funktion <code>ggpubr::ggarrange()</code> das Richtige.
Sie akzeptiert zunächst einmal eine beliebige Anzahl an <code>ggplot2</code>-Objekten (oder
eine Liste solcher Objekte über das Argument <code>plotlist</code>).
Danach können noch einige optionale Argumente verwendet werden.</p>
<p>Die Argumente <code>ncol</code> bzw. <code>nrow</code> spezifizieren die Anzahl der Plots in einer Reihe, bzw. einer
Spalte. Mit <code>labels</code> können Sie Anmerkungen wie ‘a)’, ‘b)’ hinzufügen und mit
<code>font.label</code> die Schriftgröße und -art bestimmen.
Mit <code>common.legend</code> können Sie angeben ob die Plots eine gemeinsame
Legende haben sollen, oder in jedem Plot die plot-spezifische Legende
abgebildet werden soll. Die Position der Legenden kann darüber hinaus über
das Argument <code>legend</code> mit <code>top</code>, <code>bottom</code>, <code>left</code> oder <code>right</code> spezifiziert
werden:</p>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb504-1"><a href="vis.html#cb504-1" aria-hidden="true"></a>ggpubr<span class="op">::</span><span class="kw">ggarrange</span>(arbeitslosen_plot, </span>
<span id="cb504-2"><a href="vis.html#cb504-2" aria-hidden="true"></a>          mort_rate_plot<span class="op">+</span>ggplot2<span class="op">::</span><span class="kw">geom_smooth</span>(<span class="dt">color=</span><span class="st">&quot;#002966&quot;</span>, <span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>), </span>
<span id="cb504-3"><a href="vis.html#cb504-3" aria-hidden="true"></a>          <span class="dt">ncol =</span> <span class="dv">2</span>, </span>
<span id="cb504-4"><a href="vis.html#cb504-4" aria-hidden="true"></a>          <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;A)&quot;</span>, <span class="st">&quot;B)&quot;</span>), </span>
<span id="cb504-5"><a href="vis.html#cb504-5" aria-hidden="true"></a>          <span class="dt">font.label =</span> <span class="kw">list</span>(<span class="dt">face=</span><span class="st">&quot;bold&quot;</span>))</span></code></pre></div>
<pre><code>#&gt; `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-53-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<!-- Hier ist beim Output in der PDF irgendwie eine Überschneidung bei A) und B) und den beiden Überschriften. Soll das korrigiert werden? -->
</div>
<div id="mehr-zu-den-skalen-ggplot2expansion-und-skalentransformation" class="section level3" number="5.4.3">
<h3><span class="header-section-number">5.4.3</span> Mehr zu den Skalen: <code>ggplot2::expansion()</code> und Skalentransformation</h3>
<p>Häufig möchten Sie Ihre Skalen transformieren.</p>
<p>Bei eigentlich jedem Plot stehen Sie vor der Frage wie Sie mit den
hässlichen Rändern umgehen, die <code>ggplot2::ggplot</code> standardmäßig an beide Enden
der Achsen hinzufügt.
Wir haben oben zwar bereits gelernt, dass wir diese Ränder mit
<code>expand=c(0, 0)</code> innerhalb der Funktion <code>ggplot2::scale_*_continuous()</code> abschalten
können, aber manchmal wollen wir das nur an einer Seite machen.
In diesem Fall können wir die Hilfsfunktion <code>ggplot2::expansion()</code> verwenden.
Sie akzeptiert zwei Argumente, <code>mult</code> und <code>add</code>, die wie oben beschrieben
funktionieren. Entsprechend sind die folgenden beiden Aufrufe äquivalent:</p>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb506-1"><a href="vis.html#cb506-1" aria-hidden="true"></a>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(<span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>))</span>
<span id="cb506-2"><a href="vis.html#cb506-2" aria-hidden="true"></a>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(<span class="dt">expand =</span> <span class="kw">expansion</span>(<span class="dt">mult =</span> <span class="dv">0</span>, <span class="dt">add =</span> <span class="dv">0</span>))</span></code></pre></div>
<p>Allerdings kann <code>ggplot2::expansion()</code> auch jeweils einen Vektor mit zwei Elementen
verarbeiten, wobei dann die erste Zahl für den unteren und die zweite für den
oberen Rand steht:</p>
<div class="sourceCode" id="cb507"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb507-1"><a href="vis.html#cb507-1" aria-hidden="true"></a>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(<span class="dt">expand =</span> <span class="kw">expansion</span>(<span class="dt">mult =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="dt">add =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">2</span>))</span></code></pre></div>
<p>Letzterer Code verländert die y-Achse nur in der Länge. Das ist nützlich,
wenn wir um den Nullpunkt keinen, aber nach außen einen kleinen Rand haben
wollen und wir häufig bei Histogrammen benutzt:</p>
<div class="sourceCode" id="cb508"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb508-1"><a href="vis.html#cb508-1" aria-hidden="true"></a>dichte_<span class="dv">1</span> &lt;-<span class="st"> </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(</span>
<span id="cb508-2"><a href="vis.html#cb508-2" aria-hidden="true"></a>  <span class="dt">data =</span> exportzusammensetzung, </span>
<span id="cb508-3"><a href="vis.html#cb508-3" aria-hidden="true"></a>  <span class="dt">mapping =</span> <span class="kw">aes</span>(</span>
<span id="cb508-4"><a href="vis.html#cb508-4" aria-hidden="true"></a>    <span class="dt">x=</span>pci, </span>
<span id="cb508-5"><a href="vis.html#cb508-5" aria-hidden="true"></a>    <span class="dt">color=</span>cgroup, </span>
<span id="cb508-6"><a href="vis.html#cb508-6" aria-hidden="true"></a>    <span class="dt">fill=</span>cgroup)</span>
<span id="cb508-7"><a href="vis.html#cb508-7" aria-hidden="true"></a>  ) <span class="op">+</span><span class="st"> </span></span>
<span id="cb508-8"><a href="vis.html#cb508-8" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_density</span>(</span>
<span id="cb508-9"><a href="vis.html#cb508-9" aria-hidden="true"></a>    <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">weight=</span>exp_share), </span>
<span id="cb508-10"><a href="vis.html#cb508-10" aria-hidden="true"></a>    <span class="dt">alpha=</span><span class="fl">0.5</span></span>
<span id="cb508-11"><a href="vis.html#cb508-11" aria-hidden="true"></a>    ) <span class="op">+</span><span class="st"> </span></span>
<span id="cb508-12"><a href="vis.html#cb508-12" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">labs</span>(</span>
<span id="cb508-13"><a href="vis.html#cb508-13" aria-hidden="true"></a>    <span class="dt">title =</span> <span class="st">&quot;Keine Korrektur der Skalen&quot;</span>,</span>
<span id="cb508-14"><a href="vis.html#cb508-14" aria-hidden="true"></a>    <span class="dt">caption =</span> <span class="st">&quot;Quelle: Gräbner et al. (2019, CJE)&quot;</span></span>
<span id="cb508-15"><a href="vis.html#cb508-15" aria-hidden="true"></a>    ) <span class="op">+</span><span class="st"> </span></span>
<span id="cb508-16"><a href="vis.html#cb508-16" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ylab</span>(<span class="st">&quot;Dichte der Produkte im Exportkorb&quot;</span>) <span class="op">+</span></span>
<span id="cb508-17"><a href="vis.html#cb508-17" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">xlab</span>(<span class="st">&quot;Produktkomplexität&quot;</span>) <span class="op">+</span></span>
<span id="cb508-18"><a href="vis.html#cb508-18" aria-hidden="true"></a><span class="st">  </span>icaeDesign<span class="op">::</span><span class="kw">scale_color_icae</span>(<span class="dt">palette =</span> <span class="st">&quot;mixed&quot;</span>, </span>
<span id="cb508-19"><a href="vis.html#cb508-19" aria-hidden="true"></a>                   <span class="dt">aesthetics =</span> <span class="kw">c</span>(<span class="st">&quot;color&quot;</span>, <span class="st">&quot;fill&quot;</span>)) <span class="op">+</span></span>
<span id="cb508-20"><a href="vis.html#cb508-20" aria-hidden="true"></a><span class="st">  </span>icaeDesign<span class="op">::</span><span class="kw">theme_icae</span>() <span class="op">+</span></span>
<span id="cb508-21"><a href="vis.html#cb508-21" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="kw">c</span>(<span class="fl">0.275</span>, <span class="fl">0.8</span>))</span>
<span id="cb508-22"><a href="vis.html#cb508-22" aria-hidden="true"></a></span>
<span id="cb508-23"><a href="vis.html#cb508-23" aria-hidden="true"></a>dichte_<span class="dv">2</span> &lt;-<span class="st"> </span>dichte_<span class="dv">1</span> <span class="op">+</span></span>
<span id="cb508-24"><a href="vis.html#cb508-24" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ggtitle</span>(<span class="st">&quot;Korrektur der Skalen&quot;</span>) <span class="op">+</span></span>
<span id="cb508-25"><a href="vis.html#cb508-25" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.6</span>), </span>
<span id="cb508-26"><a href="vis.html#cb508-26" aria-hidden="true"></a>                     <span class="dt">expand =</span> <span class="kw">expansion</span>(<span class="dt">mult =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), </span>
<span id="cb508-27"><a href="vis.html#cb508-27" aria-hidden="true"></a>                                           <span class="dt">add =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.05</span>))) <span class="op">+</span></span>
<span id="cb508-28"><a href="vis.html#cb508-28" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_x_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">3</span>, <span class="dv">3</span>),</span>
<span id="cb508-29"><a href="vis.html#cb508-29" aria-hidden="true"></a>                     <span class="dt">expand =</span> <span class="kw">expansion</span>(<span class="dt">mult =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), </span>
<span id="cb508-30"><a href="vis.html#cb508-30" aria-hidden="true"></a>                                           <span class="dt">add =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)))</span>
<span id="cb508-31"><a href="vis.html#cb508-31" aria-hidden="true"></a></span>
<span id="cb508-32"><a href="vis.html#cb508-32" aria-hidden="true"></a>ggpubr<span class="op">::</span><span class="kw">ggarrange</span>(dichte_<span class="dv">1</span>, dichte_<span class="dv">2</span>, <span class="dt">ncol =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-56-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Auch werden Sie häufig die Labels auf Ihren Achsen ändern wollen.
Gerade die Transformation hin zu Prozentwerten ist aber nicht immer ganz
trivial.
Am besten verwenden Sie die Funktion <code>percent_format()</code>
aus dem Paket <a href="https://github.com/r-lib/scales">scales</a> <span class="citation">(Wickham <a href="#ref-R-scales" role="doc-biblioref">2018</a>)</span>
um das entsprechende Argument <code>labels</code> in <code>ggplot2::scale_*_continuous()</code> zu spezifizieren.</p>
<p>Die Funktion bedarf zweier Argumente <code>accuracy</code> und <code>scale</code>.
Das Argument <code>accuracy</code> bezeichnet die Dezimalstelle auf die gerundet werden soll.
Dies ist ein Einfallstor für viele Fehler, da die Funktion keine Fehler
ausgibt wenn irreführende Werte angegeben werden. Vergleichen Sie immer
die Skala vor und nach der Transformation um sicher zu gehen, dass sich keine
Fehler eingeschlichen haben!</p>
<p>Das Argument <code>scale</code> bezeichnet die Skala in den Daten, also ob die Daten bereits in Prozent
angegeben sind (in dem Falle wäre <code>scale=100</code>), oder ob der Wert <code>1</code> zu
<code>100%</code> korrespondiert (in diesem Falle wäre <code>scale=1</code>). Auch hier sollten
Sie immer die Ache vor und nach der Transformation vergleichen.</p>
<p>Im Folgenden sehen sie ein Anwendungsbeispiel:</p>
<div class="sourceCode" id="cb509"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb509-1"><a href="vis.html#cb509-1" aria-hidden="true"></a>cum_growth_countries_full_percent &lt;-<span class="st"> </span>cum_growth_countries_full <span class="op">+</span></span>
<span id="cb509-2"><a href="vis.html#cb509-2" aria-hidden="true"></a><span class="st">    </span>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(</span>
<span id="cb509-3"><a href="vis.html#cb509-3" aria-hidden="true"></a>      <span class="dt">labels =</span> scales<span class="op">::</span><span class="kw">percent_format</span>(<span class="dt">accuracy =</span> <span class="dv">1</span>, <span class="dt">scale =</span> <span class="dv">1</span>)</span>
<span id="cb509-4"><a href="vis.html#cb509-4" aria-hidden="true"></a>    )</span></code></pre></div>
<div class="sourceCode" id="cb510"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb510-1"><a href="vis.html#cb510-1" aria-hidden="true"></a>ggpubr<span class="op">::</span><span class="kw">ggarrange</span>(cum_growth_countries_full <span class="op">+</span><span class="st"> </span>ggplot2<span class="op">::</span><span class="kw">ggtitle</span>(<span class="st">&quot;Ohne Prozent-Transformation&quot;</span>),</span>
<span id="cb510-2"><a href="vis.html#cb510-2" aria-hidden="true"></a>          cum_growth_countries_full_percent <span class="op">+</span><span class="st"> </span>ggplot2<span class="op">::</span><span class="kw">ggtitle</span>(<span class="st">&quot;Mit Prozent-Transformation&quot;</span>),</span>
<span id="cb510-3"><a href="vis.html#cb510-3" aria-hidden="true"></a>          <span class="dt">nrow =</span> <span class="dv">2</span></span>
<span id="cb510-4"><a href="vis.html#cb510-4" aria-hidden="true"></a>          )</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-59-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Die weiteren Argumente sind relativ selbsterklärend und werden in der Regel
nicht verwendet. Sie sind ähnlich zu den weiteren Formatierungsfunktionen in
dem Paket. Überhaut bietet das Paket <a href="https://github.com/r-lib/scales">scales</a>
noch viele weitere Hilfsfunktionen an. Wenn Sie Probleme mit Skalierungen haben
lohnt sich ein Blick auf die Paket-Homepage.</p>
</div>
<div id="mehr-zur-farbauswahl" class="section level3" number="5.4.4">
<h3><span class="header-section-number">5.4.4</span> Mehr zur Farbauswahl</h3>
<p>Wie Sie bereits bemerkt haben können Sie in Ihren Abbildungen eine Vielzahl
an Farben verwenden.
Einen Überblick über alle in R definierten Farben finden Sie dabei leicht im
Internet.
Besonders attraktiv ist es jedoch, Farben durch ihren HEX Code anzugeben.
Durch Angabe des HEX Codes können Sie quasi jede beliebige Farbe in R
verwenden.
Am einfachsten ist es, im Internet einen <em>Color Picker</em> zu verwenden und sich
den HEX Code ausgeben zu lassen und diesen dann in R zu verwenden.
Einen empfehlenswerten <em>Color Picker</em> finden Sie z.B. unter
<a href="https://www.w3schools.com/colors/colors_picker.asp">https://www.w3schools.com/colors/colors_picker.asp</a>.</p>
<p>Wenn Sie mehrere Farben verwenden wollen, die gut zueinander passen empfiehlt
sich die Verwendung einer Farbpalette.
Dabei handelt es sich um eine ‘Sammplung’ von zueinander passenden Farben.
Es zahlreiche vordefinierte Paletten im Internet und alle
funktionieren ähnlich.
Eine sehr bekannte und nützliche Palette ist die so gennannte <em>Viridis</em>-Palette
von Stefan van der Walt and Nathaniel Smith.
In der Grundversion schaut sie folgendermaßen aus:</p>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-60-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Wenn Sie die Farben Ihrer Ästhetiken gemäß der Viridis-Palette verwenden wollen
geht dies durch vordefinierte Funktionen.
Für Füllfarben gibt es z.B. die Funktion <code>scale_fill_viridis()</code> und für
Linienfarben <code>scale_color_viridis()</code>.
Das gleiche Schema funktioniert aber auch für die meisten anderen Paletten,
die Sie im Internet finden können.</p>
<p>Sie können sich auch HEX-Farbcodes direkt ausgeben lassen.
Für den Fall von Viridis geht das über die Funktion <code>viridis::viridis()</code>.
Das einzig notwendige Argument ist <code>n</code>. Es spezifiziert die Anzahl der
HEX-Codes.</p>
<div class="sourceCode" id="cb511"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb511-1"><a href="vis.html#cb511-1" aria-hidden="true"></a>viridis<span class="op">::</span><span class="kw">viridis</span>(<span class="dt">n =</span> <span class="dv">3</span>) <span class="co"># Drei Farben aus der Viridis-Palette</span></span></code></pre></div>
<pre><code>#&gt; [1] &quot;#440154FF&quot; &quot;#21908CFF&quot; &quot;#FDE725FF&quot;</code></pre>
<p>Darüber hinaus können Sie noch die Transparenz (<code>alpha</code>), den Ausschnitt der
Palette (<code>begin</code> und <code>end</code>) und die Richtung der Palette (<code>direction</code>)
spezifizieren.
Mit der Richtung ist gemeint, dass normalerweise eine Palette die Farben von
Dunkel nach Hell sortiert, diese Richtung aber natürlich auch umgedreht werden
kann.
Im folgenden Beispiel sind die Farben zu 50 Prozent transparent und es wird
nur die Mitte der Palette verwendet.
Zudem wird die Richtung der Palette umgedreht, also die Farben von Hell nach
Dunkel sortiert:</p>
<div class="sourceCode" id="cb513"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb513-1"><a href="vis.html#cb513-1" aria-hidden="true"></a>viridis<span class="op">::</span><span class="kw">viridis</span>(<span class="dt">n =</span> <span class="dv">3</span>, <span class="dt">begin =</span> <span class="fl">0.25</span>, <span class="dt">end =</span> <span class="fl">0.5</span>, <span class="dt">direction =</span> <span class="dv">-1</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;#21908CFF&quot; &quot;#2C728EFF&quot; &quot;#3B528BFF&quot;</code></pre>
<p>Gerade was die Wahl von Farben angeht empfiehlt sich das weitere
Selbststudium und Ausprobieren anhand von Visualisierungsanleitungen und Blogs
im Internet.</p>
</div>
</div>
<div id="vis-fehler" class="section level2" number="5.5">
<h2><span class="header-section-number">5.5</span> Typische Fehler in der Datenvisualisierung vermeiden</h2>
<p>Hier implementieren wir einige der Beispiele aus <span class="citation">Schwabish (<a href="#ref-schwabischVis" role="doc-biblioref">2014</a>)</span>.
Eine wunderbare Seite mit typischen Visualisierungsfehlern und wie Sie sie
vermeiden können finden Sie <a href="https://www.data-to-viz.com/caveats.html">hier</a>.</p>
<div id="clutterplots-und-ihre-tranformation-zum-beschrifteten-streudiagramm" class="section level3" number="5.5.1">
<h3><span class="header-section-number">5.5.1</span> Clutterplots und ihre Tranformation zum beschrifteten Streudiagramm</h3>
<p>Schauen wir zunächst auf die folgende Abbildung <a href="vis.html#fig:Hanson">5.2</a> aus <span class="citation">Hanson (<a href="#ref-hanson" role="doc-biblioref">2012</a> S. 55)</span>:</p>
<div class="figure" style="text-align: center"><span id="fig:Hanson"></span>
<img src="figures/vis-failes-hanson.png" alt="Abbildung nach Hanson, 2012" width="75%" height="75%" />
<p class="caption">
Figure 5.2: Abbildung nach Hanson, 2012
</p>
</div>
<p>Da sich der Autor zusätzlich nicht erbarmt hat seinen Datensatz zu publizieren,
müssen wir auch noch die der
Abbildung zugrundeliegenden Daten selbst beschaffen - in diesen Momenten merken
Sie wie wichtig es ist, zu jeder Publikation die Daten und den Code für die
Abbildungen mit zu veröffentlichen. Zwar wurden die Datenquellen
einigermaßen dokumentiert,<a href="#fn38" class="footnote-ref" id="fnref38"><sup>38</sup></a>
da es aber leider nicht vollständig nachzuvollziehen ist auf welchen Weltbankdatensatz
er sich mit ‘Average years of schooling of the adult population’ bezieht und die
genaue Quelle für die Exportdaten auch nicht genannt wurde<a href="#fn39" class="footnote-ref" id="fnref39"><sup>39</sup></a> finden sich in der Replikation natürlich kleinere Abweichungen:</p>
<p>Zunächst replizieren wir das originale visuelle Verbrechen:</p>
<div class="sourceCode" id="cb515"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb515-1"><a href="vis.html#cb515-1" aria-hidden="true"></a>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(<span class="dt">data =</span> hanson_data, </span>
<span id="cb515-2"><a href="vis.html#cb515-2" aria-hidden="true"></a>       <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>schooling, <span class="dt">y=</span>rca_purged)) <span class="op">+</span></span>
<span id="cb515-3"><a href="vis.html#cb515-3" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_point</span>(<span class="dt">color=</span><span class="st">&quot;#264062&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb515-4"><a href="vis.html#cb515-4" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label=</span>country), <span class="dt">nudge_x =</span> <span class="fl">0.5</span>, <span class="dt">color=</span><span class="st">&quot;#264062&quot;</span>) <span class="op">+</span></span>
<span id="cb515-5"><a href="vis.html#cb515-5" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="dt">se =</span> <span class="ot">FALSE</span>, <span class="dt">color=</span><span class="st">&quot;black&quot;</span>) <span class="op">+</span></span>
<span id="cb515-6"><a href="vis.html#cb515-6" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ggtitle</span>(<span class="st">&quot;Ausbildungsniveau und Exporte von Büromaschinen&quot;</span>) <span class="op">+</span></span>
<span id="cb515-7"><a href="vis.html#cb515-7" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_x_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;Durchschnittliche Schulbildung in Jahren (2005)&quot;</span>) <span class="op">+</span></span>
<span id="cb515-8"><a href="vis.html#cb515-8" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;RCA in Büromaschinen (Durchschnitt 2006-08)&quot;</span>) <span class="op">+</span></span>
<span id="cb515-9"><a href="vis.html#cb515-9" aria-hidden="true"></a><span class="st">  </span>icaeDesign<span class="op">::</span><span class="kw">theme_icae</span>()</span></code></pre></div>
<pre><code>#&gt; `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-67-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Abgesehen davon, dass es einfach hässlich ist so viele Überlappungen zu haben,
setzt dieser Graph voraus, dass Sie fließend die <code>iso3c</code>-Codes beherrschen und
schnell die fünf Länder finden, um die es im Text geht. Das ist nicht sonderlich
leser*innenfreundlich…</p>
<p>Wie <span class="citation">Schwabish (<a href="#ref-schwabischVis" role="doc-biblioref">2014</a>)</span> bilden wir zunächst einmal die Labels nur für die fünf uns
interessierenden Länder ab. Das machen wir, indem wir die Funktion
<code>ggplot2::geom_text()</code>, welche die Ländernamen abbildet, nicht den Standarddatensatz
verwenden lassen, sondern einen reduzierten Datensatz übergeben.
In diesem reduzierten Datensatz übersetzen wir die Ländernamen bereits ins
Deutsche.
Überhaupt ersetzen wir <code>ggplot2::geom_text()</code> besser mit <code>geom_label_repel()</code> aus dem
Paket <a href="https://github.com/slowkow/ggrepel">ggrepel</a> <span class="citation">(Slowikowski <a href="#ref-r-ggrepel" role="doc-biblioref">2019</a>)</span>, welches quasi
genauso funktioniert, aber den Text so verschiebt, dass es zu keinen
Überschneidungen kommt.</p>
<p>Außerdem wählen wir eine stärkere Farbe für diese Namen aus.
Damit es besser zu den Punkten passt, plotten wir die Punkte dieser Länder in der
gleichen Farbe, und alle anderen Punkte in einem Grauton.
Dazu verwenden wir einfach zwei unterschiedliche Layer, jeweils produziert durch
<code>ggplot2::geom_point()</code>, aber mit unterschiedlichen Datensätzen.</p>
<div class="sourceCode" id="cb517"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb517-1"><a href="vis.html#cb517-1" aria-hidden="true"></a>interessierende_laender &lt;-<span class="st"> </span><span class="kw">countrycode</span>(</span>
<span id="cb517-2"><a href="vis.html#cb517-2" aria-hidden="true"></a>  <span class="kw">c</span>(<span class="st">&quot;China&quot;</span>, <span class="st">&quot;Malaysia&quot;</span>, <span class="st">&quot;Costa Rica&quot;</span>, <span class="st">&quot;Philippines&quot;</span>, <span class="st">&quot;Thailand&quot;</span>), </span>
<span id="cb517-3"><a href="vis.html#cb517-3" aria-hidden="true"></a>  <span class="st">&quot;country.name&quot;</span>, <span class="st">&quot;iso3c&quot;</span>)</span>
<span id="cb517-4"><a href="vis.html#cb517-4" aria-hidden="true"></a></span>
<span id="cb517-5"><a href="vis.html#cb517-5" aria-hidden="true"></a>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(<span class="dt">data =</span> hanson_data, </span>
<span id="cb517-6"><a href="vis.html#cb517-6" aria-hidden="true"></a>       <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>schooling, <span class="dt">y=</span>rca_purged)) <span class="op">+</span></span>
<span id="cb517-7"><a href="vis.html#cb517-7" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_point</span>(</span>
<span id="cb517-8"><a href="vis.html#cb517-8" aria-hidden="true"></a>    <span class="dt">data =</span> <span class="kw">filter</span>(hanson_data, </span>
<span id="cb517-9"><a href="vis.html#cb517-9" aria-hidden="true"></a>                  country <span class="op">%in%</span><span class="st"> </span>interessierende_laender), </span>
<span id="cb517-10"><a href="vis.html#cb517-10" aria-hidden="true"></a>    <span class="dt">color=</span><span class="st">&quot;#264062&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb517-11"><a href="vis.html#cb517-11" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_point</span>(</span>
<span id="cb517-12"><a href="vis.html#cb517-12" aria-hidden="true"></a>    <span class="dt">data =</span> <span class="kw">filter</span>(hanson_data, </span>
<span id="cb517-13"><a href="vis.html#cb517-13" aria-hidden="true"></a>                  <span class="op">!</span>country <span class="op">%in%</span><span class="st"> </span>interessierende_laender), </span>
<span id="cb517-14"><a href="vis.html#cb517-14" aria-hidden="true"></a>    <span class="dt">color=</span><span class="st">&quot;grey&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb517-15"><a href="vis.html#cb517-15" aria-hidden="true"></a><span class="st">  </span>ggrepel<span class="op">::</span><span class="kw">geom_label_repel</span>(</span>
<span id="cb517-16"><a href="vis.html#cb517-16" aria-hidden="true"></a>    <span class="dt">data =</span> <span class="kw">filter</span>(hanson_data, </span>
<span id="cb517-17"><a href="vis.html#cb517-17" aria-hidden="true"></a>                  country <span class="op">%in%</span><span class="st"> </span>interessierende_laender),</span>
<span id="cb517-18"><a href="vis.html#cb517-18" aria-hidden="true"></a>    <span class="kw">aes</span>(<span class="dt">label=</span><span class="kw">countrycode</span>(country, <span class="st">&quot;iso3c&quot;</span>, <span class="st">&quot;country.name.de&quot;</span>)), </span>
<span id="cb517-19"><a href="vis.html#cb517-19" aria-hidden="true"></a>    <span class="dt">color=</span><span class="st">&quot;black&quot;</span>, <span class="dt">label.size =</span> <span class="ot">NA</span></span>
<span id="cb517-20"><a href="vis.html#cb517-20" aria-hidden="true"></a>    ) <span class="op">+</span></span>
<span id="cb517-21"><a href="vis.html#cb517-21" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="dt">se =</span> <span class="ot">FALSE</span>, <span class="dt">color=</span><span class="st">&quot;black&quot;</span>) <span class="op">+</span></span>
<span id="cb517-22"><a href="vis.html#cb517-22" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">ggtitle</span>(<span class="st">&quot;Ausbildungsniveau und Exporte von Büromaschinen&quot;</span>) <span class="op">+</span></span>
<span id="cb517-23"><a href="vis.html#cb517-23" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_x_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;Durchschnittliche Schulbildung in Jahren (2005)&quot;</span>) <span class="op">+</span></span>
<span id="cb517-24"><a href="vis.html#cb517-24" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;RCA in Büromaschinen (Durchschnitt 2006-08)&quot;</span>) <span class="op">+</span></span>
<span id="cb517-25"><a href="vis.html#cb517-25" aria-hidden="true"></a><span class="st">  </span>icaeDesign<span class="op">::</span><span class="kw">theme_icae</span>()</span></code></pre></div>
<pre><code>#&gt; `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-68-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Wie Sie merken werden diese Farben außerhalb von <code>mapping</code> definiert.
Denn die Farben sollen ja für alle Variablen gleich sein, es handelt sich hier
also nicht um ein <em>aesthetic mapping</em>, welches ja die Farbe abhängig vom
Variablenwert vergeben würde.</p>
<p>Dies ist wieder ein schönes Beispiel für eine Grafik, die sehr davon profitiert,
wenn man die abgebildeten Punkte auf das wirklich Wesentliche reduziert.</p>
</div>
<div id="ein-unbalancierter-plot" class="section level3" number="5.5.2">
<h3><span class="header-section-number">5.5.2</span> Ein ‘unbalancierter’ Plot</h3>
<p>An anderes schönes Beispiel ist die folgende Abbildung <a href="vis.html#fig:managers">5.3</a>,
die angeblich von der NY Times und der OECD verwendet wurde.
Zwar funktionieren alle angegeben Links nicht mehr und der genaue Datensatz,
welcher der Abbildung zurundeliegt bleibt ebenfalls unerwähnt (Sie sehen die
Verbesserungsmöglichkeiten), allerdings ist er ein schönes Negativbeispiel:</p>
<div class="figure" style="text-align: center"><span id="fig:managers"></span>
<img src="figures/vis-failes-oecd.png" alt="Beispiel für einen 'unbalancierten' Plot" width="75%" height="75%" />
<p class="caption">
Figure 5.3: Beispiel für einen ‘unbalancierten’ Plot
</p>
</div>
<p>Selbt mit der Beschreibung im Text ist schwer verständlich was uns diese
Abbildung jetzt genau sagen soll.
Wahrscheinlich versucht der Autor oder die Autorin zu zeigen, dass Frauen weniger
in Führungspositionen vertreten sind als Männer.
Warum dann allerdings die Werte für Frauen mit mehr Fläche dargestellt sind als
die der Männer bleibt genauso schleierhaft wie die Begründung für die
abartige Farbkombination und die übertriebenen Gitter.
Zum Glück können wir die eigentlich wichtige Message viel besser darstellen!</p>
<p>Zuallererst geben wir mit <span class="citation">OECD (<a href="#ref-oecd" role="doc-biblioref">2019</a>)</span> einmal die Quellen für unsere Daten korrekt an.
Wie von <span class="citation">Schwabish (<a href="#ref-schwabischVis" role="doc-biblioref">2014</a>)</span> vorgeschlagen würde sich ein Balkendiagramm in dem
die Balken von Männern und Frauen direkt nebeneinander liegen, gut anbieten.
Hier nutzen wir aber die Change eine etwas exquisitere Darstellungsform kennen zu
lernen, den <a href="https://uc-r.github.io/lollipop">Lollipop-Graph</a>.</p>
<p>Zuerst müssen jedoch die Daten in einen nutzbaren Zustand gebracht werden:</p>
<p>Diese Daten sehen im Rohzustand (nach Auswahl der relevanten Spalten) so aus:</p>
<div class="sourceCode" id="cb519"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb519-1"><a href="vis.html#cb519-1" aria-hidden="true"></a><span class="kw">head</span>(oecd_data)</span></code></pre></div>
<pre><code>#&gt;    COU   Sex Value
#&gt; 1: AUT   Men   6.2
#&gt; 2: AUT Women   2.9
#&gt; 3: BEL   Men  10.4
#&gt; 4: BEL Women   5.8
#&gt; 5: CZE   Men   6.8
#&gt; 6: CZE Women   3.6</code></pre>
<p>Wir wissen ja aus letztem Kapitel wie wir hiermit umzugehen haben:</p>
<div class="sourceCode" id="cb521"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb521-1"><a href="vis.html#cb521-1" aria-hidden="true"></a>oecd_data &lt;-<span class="st"> </span>oecd_data <span class="op">%&gt;%</span></span>
<span id="cb521-2"><a href="vis.html#cb521-2" aria-hidden="true"></a><span class="st">  </span>tidyr<span class="op">::</span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> <span class="st">&quot;Sex&quot;</span>, </span>
<span id="cb521-3"><a href="vis.html#cb521-3" aria-hidden="true"></a>              <span class="dt">values_from =</span> <span class="st">&quot;Value&quot;</span>, </span>
<span id="cb521-4"><a href="vis.html#cb521-4" aria-hidden="true"></a>              <span class="dt">id_cols =</span> <span class="st">&quot;COU&quot;</span>)</span>
<span id="cb521-5"><a href="vis.html#cb521-5" aria-hidden="true"></a><span class="kw">head</span>(oecd_data)</span></code></pre></div>
<pre><code>#&gt; # A tibble: 6 x 3
#&gt;   COU     Men Women
#&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1 AUT     6.2   2.9
#&gt; 2 BEL    10.4   5.8
#&gt; 3 CZE     6.8   3.6
#&gt; 4 DNK     3.4   1.4
#&gt; 5 FIN     4.1   2.1
#&gt; 6 FRA     9.3   4.6</code></pre>
<p>Auch möchten wir die Ländernamen noch anpassen.
Hier haben wir aber einen Fall in dem wir nicht einfach blind die Funktion
<code>countrycode::countrycode()</code> verwenden können: zum einen enthält unser Datensatz das
‘Land’ <code>OAVG</code>, was der Durchschnitt aller OECD Länder ist. Diesen müssen wir
separat übersetzen.
Wir erledigen das mit der Funktion <code>ifelse()</code>.
Diese Funktion erlaubt bedingte Befehle: wir formulieren als erstes Argument
einen Test, als zweites Argument den Wert, den die Funktion ausgegen soll,
wenn der Test erfüllt wird und als drittes Argument den Wert wenn der Test
nicht erfüllt ist, so wie in folgendem Beispiel:</p>
<div class="sourceCode" id="cb523"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb523-1"><a href="vis.html#cb523-1" aria-hidden="true"></a>x &lt;-<span class="st"> </span><span class="dv">2</span></span>
<span id="cb523-2"><a href="vis.html#cb523-2" aria-hidden="true"></a><span class="kw">ifelse</span>(x<span class="op">&gt;</span><span class="dv">2</span>, <span class="st">&quot;x ist größer als 2!&quot;</span>, <span class="st">&quot;x ist nicht größer als 2!&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;x ist nicht größer als 2!&quot;</code></pre>
<div class="sourceCode" id="cb525"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb525-1"><a href="vis.html#cb525-1" aria-hidden="true"></a>x &lt;-<span class="st"> </span><span class="dv">4</span></span>
<span id="cb525-2"><a href="vis.html#cb525-2" aria-hidden="true"></a><span class="kw">ifelse</span>(x<span class="op">&gt;</span><span class="dv">2</span>, <span class="st">&quot;x ist größer als 2!&quot;</span>, <span class="st">&quot;x ist nicht größer als 2!&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;x ist größer als 2!&quot;</code></pre>
<p>Zudem ist die offizielle Bezeichnung für Südkorea “Korea, Republik von”.
Das macht sich in einer Abbildung nicht sonderlich gut, daher passen wir auch
das manuell an:</p>
<div class="sourceCode" id="cb527"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb527-1"><a href="vis.html#cb527-1" aria-hidden="true"></a>oecd_data_plot &lt;-<span class="st"> </span>oecd_data <span class="op">%&gt;%</span></span>
<span id="cb527-2"><a href="vis.html#cb527-2" aria-hidden="true"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">COU =</span> <span class="kw">ifelse</span>(COU<span class="op">==</span><span class="st">&quot;OAVG&quot;</span>, <span class="st">&quot;OECD Durchschnitt&quot;</span>, </span>
<span id="cb527-3"><a href="vis.html#cb527-3" aria-hidden="true"></a>                      countrycode<span class="op">::</span><span class="kw">countrycode</span>(COU, <span class="st">&quot;iso3c&quot;</span>, <span class="st">&quot;country.name.de&quot;</span>)),</span>
<span id="cb527-4"><a href="vis.html#cb527-4" aria-hidden="true"></a>         <span class="dt">COU =</span> <span class="kw">ifelse</span>(COU<span class="op">==</span><span class="st">&quot;Korea, Republik von&quot;</span>, <span class="st">&quot;Südkorea&quot;</span>, COU))</span></code></pre></div>
<p>Mit diesen erstellen wir den Lollipop-Graphen folgendermaßen:<a href="#fn40" class="footnote-ref" id="fnref40"><sup>40</sup></a></p>
<div class="sourceCode" id="cb528"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb528-1"><a href="vis.html#cb528-1" aria-hidden="true"></a>farbe_m &lt;-<span class="st"> &quot;#355383&quot;</span></span>
<span id="cb528-2"><a href="vis.html#cb528-2" aria-hidden="true"></a>farbe_w &lt;-<span class="st"> &quot;#d95d2c&quot;</span></span>
<span id="cb528-3"><a href="vis.html#cb528-3" aria-hidden="true"></a></span>
<span id="cb528-4"><a href="vis.html#cb528-4" aria-hidden="true"></a>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(oecd_data_plot) <span class="op">+</span></span>
<span id="cb528-5"><a href="vis.html#cb528-5" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_segment</span>(<span class="kw">aes</span>(<span class="dt">x=</span><span class="kw">reorder</span>(COU, Women), </span>
<span id="cb528-6"><a href="vis.html#cb528-6" aria-hidden="true"></a>                   <span class="dt">xend=</span>COU,</span>
<span id="cb528-7"><a href="vis.html#cb528-7" aria-hidden="true"></a>                   <span class="dt">y=</span>Women, </span>
<span id="cb528-8"><a href="vis.html#cb528-8" aria-hidden="true"></a>                   <span class="dt">yend=</span>Men), </span>
<span id="cb528-9"><a href="vis.html#cb528-9" aria-hidden="true"></a>               <span class="dt">color=</span><span class="st">&quot;grey&quot;</span>) <span class="op">+</span></span>
<span id="cb528-10"><a href="vis.html#cb528-10" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_point</span>(</span>
<span id="cb528-11"><a href="vis.html#cb528-11" aria-hidden="true"></a>    <span class="kw">aes</span>(<span class="dt">x=</span>COU, </span>
<span id="cb528-12"><a href="vis.html#cb528-12" aria-hidden="true"></a>        <span class="dt">y=</span>Women, </span>
<span id="cb528-13"><a href="vis.html#cb528-13" aria-hidden="true"></a>        <span class="dt">color=</span><span class="st">&quot;Frauen&quot;</span>), </span>
<span id="cb528-14"><a href="vis.html#cb528-14" aria-hidden="true"></a>    <span class="dt">size=</span><span class="dv">3</span> ) <span class="op">+</span></span>
<span id="cb528-15"><a href="vis.html#cb528-15" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_point</span>(</span>
<span id="cb528-16"><a href="vis.html#cb528-16" aria-hidden="true"></a>    <span class="kw">aes</span>(<span class="dt">x=</span>COU, </span>
<span id="cb528-17"><a href="vis.html#cb528-17" aria-hidden="true"></a>        <span class="dt">y=</span>Men,</span>
<span id="cb528-18"><a href="vis.html#cb528-18" aria-hidden="true"></a>        <span class="dt">color=</span><span class="st">&quot;Männer&quot;</span>), </span>
<span id="cb528-19"><a href="vis.html#cb528-19" aria-hidden="true"></a>    <span class="dt">size=</span><span class="dv">3</span> ) <span class="op">+</span></span>
<span id="cb528-20"><a href="vis.html#cb528-20" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_color_manual</span>(<span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;Männer&quot;</span>=farbe_m, <span class="st">&quot;Frauen&quot;</span>=farbe_w), <span class="dt">name=</span><span class="st">&quot;Geschlecht&quot;</span>) <span class="op">+</span></span>
<span id="cb528-21"><a href="vis.html#cb528-21" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_text</span>(</span>
<span id="cb528-22"><a href="vis.html#cb528-22" aria-hidden="true"></a>    <span class="kw">aes</span>(<span class="dt">x=</span>COU, <span class="dt">y=</span>Women, <span class="dt">label=</span>COU), </span>
<span id="cb528-23"><a href="vis.html#cb528-23" aria-hidden="true"></a>    <span class="dt">nudge_y =</span> <span class="fl">-0.25</span>, <span class="dt">hjust=</span><span class="dv">1</span>, <span class="dt">color=</span><span class="kw">rgb</span>(<span class="dv">110</span>, <span class="dv">113</span>, <span class="dv">123</span>, <span class="dt">maxColorValue =</span> <span class="dv">255</span>)</span>
<span id="cb528-24"><a href="vis.html#cb528-24" aria-hidden="true"></a>    ) <span class="op">+</span></span>
<span id="cb528-25"><a href="vis.html#cb528-25" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;Prozent&quot;</span>, </span>
<span id="cb528-26"><a href="vis.html#cb528-26" aria-hidden="true"></a>                     <span class="dt">expand =</span> <span class="kw">expansion</span>(<span class="dt">mult =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), </span>
<span id="cb528-27"><a href="vis.html#cb528-27" aria-hidden="true"></a>                                           <span class="dt">add =</span> <span class="kw">c</span>(<span class="fl">3.5</span>, <span class="dv">1</span>))</span>
<span id="cb528-28"><a href="vis.html#cb528-28" aria-hidden="true"></a>                     ) <span class="op">+</span></span>
<span id="cb528-29"><a href="vis.html#cb528-29" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">coord_flip</span>() <span class="op">+</span></span>
<span id="cb528-30"><a href="vis.html#cb528-30" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Anteil der Beschäftigten im Management (2015)&quot;</span>, </span>
<span id="cb528-31"><a href="vis.html#cb528-31" aria-hidden="true"></a>       <span class="dt">caption =</span> <span class="st">&quot;Quelle: OECD, eigene Darstellung.&quot;</span>) <span class="op">+</span></span>
<span id="cb528-32"><a href="vis.html#cb528-32" aria-hidden="true"></a><span class="st">  </span>icaeDesign<span class="op">::</span><span class="kw">theme_icae</span>() <span class="op">+</span></span>
<span id="cb528-33"><a href="vis.html#cb528-33" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme</span>(</span>
<span id="cb528-34"><a href="vis.html#cb528-34" aria-hidden="true"></a>    <span class="dt">panel.grid.major.y =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb528-35"><a href="vis.html#cb528-35" aria-hidden="true"></a>    <span class="dt">panel.grid.minor.y =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb528-36"><a href="vis.html#cb528-36" aria-hidden="true"></a>    <span class="dt">legend.position =</span> <span class="kw">c</span>(<span class="fl">0.8</span>, <span class="fl">0.1</span>),</span>
<span id="cb528-37"><a href="vis.html#cb528-37" aria-hidden="true"></a>    <span class="dt">legend.title =</span> <span class="kw">element_text</span>(), </span>
<span id="cb528-38"><a href="vis.html#cb528-38" aria-hidden="true"></a>    <span class="dt">panel.border =</span> <span class="kw">element_blank</span>(), </span>
<span id="cb528-39"><a href="vis.html#cb528-39" aria-hidden="true"></a>    <span class="dt">axis.title.y =</span> <span class="kw">element_blank</span>(), </span>
<span id="cb528-40"><a href="vis.html#cb528-40" aria-hidden="true"></a>    <span class="dt">axis.line.y =</span> <span class="kw">element_blank</span>(), </span>
<span id="cb528-41"><a href="vis.html#cb528-41" aria-hidden="true"></a>    <span class="dt">axis.text.y =</span> <span class="kw">element_blank</span>(), </span>
<span id="cb528-42"><a href="vis.html#cb528-42" aria-hidden="true"></a>    <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb528-43"><a href="vis.html#cb528-43" aria-hidden="true"></a>  )</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-74-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Wie Sie sehen wird der Graph nicht durch eine eigene Funktion, sondern durch
das sukzessive Hinzufügen von Strichen und Punkten erstellt.
Besonders hervorzuheben am Code sind folgende Features:</p>
<ul>
<li>Wir verwenden die Funktion <code>reorder()</code> um die Werte auf der x-Achse nach
Anteil der Frauen im Management zu ordnern</li>
<li>Da wir mit der Funktion <code>ggplot2::coord_flip()</code> die Achsen umdrehen um eine
horizontale Darstellung zu bekommen müssen wir bei allen Werten, die sich auf
eine Achse beziehen umdenken</li>
<li>Wir verwenden die Funktion <code>ggplot2::expansion()</code> wie oben eingeführt, da die
x-Achse sonst nach links zu wenig Platz für die Länderbezeichnungen lassen würde</li>
<li>Das Argument <code>hjust=1</code> innerhalb von <code>ggplot2::geom_text()</code> sorgt dafür, dass der
Text genau bei dem y-Wert aus <code>ggplot2::aes()</code> aufhört, also linksbündig formatiert wird
(<code>hjust=0</code> korrespondiert entsprechend zu rechsbündigem, <code>hjust=0.5</code> zu
mittig formatierem Text).</li>
<li>Mit <code>ggplot2::scale_color_manual()</code> erstellen wir eine manuelle Tabelle, da wir die
Farben für Männer und Frauen in unterschiedlichen Layer plaziert haben. Wichtig
ist, dass die Farbzuschreibung als <em>aesthetic mapping</em> definiert wird, da wir
sonst keine Legende erstellen können. Die Syntax der Funktion ist dafür
selbsterklärend.</li>
</ul>
</div>
</div>
<div id="vis-lies" class="section level2" number="5.6">
<h2><span class="header-section-number">5.6</span> Lügen mit grafischer Statistik</h2>
<p>Grafiken können sehr leicht zur Manipulation der Betrachter*innen eingesetzt werden.
Im Folgenden wollen wir das an zwei klassischen Beispielen verdeutlichen.
Eine schöne Übersicht finden Sie ansonsten in <span class="citation">Krämer (<a href="#ref-luegen" role="doc-biblioref">2015</a>)</span></p>
<div id="klassiker-1-kontraintuitiver-nullpunkt" class="section level3" number="5.6.1">
<h3><span class="header-section-number">5.6.1</span> Klassiker 1: Kontraintuitiver ‘Nullpunkt’</h3>
<p>Sie möchten einen Unterschied konstruieren, der eigentlich gar nicht da ist?
In diesem Fall könnten Sie sich ein Beispiel an Fox News nehmen
(siehe Abbildung <a href="vis.html#fig:foxnews">5.4</a>).</p>
<div class="figure" style="text-align: center"><span id="fig:foxnews"></span>
<img src="figures/vis-fox-news.jpg" alt="Quelle: https://thenextweb.com/wp-content/blogs.dir/1/files/2015/05/viz3.jpg" width="75%" height="75%" />
<p class="caption">
Figure 5.4: Quelle: <a href="https://thenextweb.com/wp-content/blogs.dir/1/files/2015/05/viz3.jpg" class="uri">https://thenextweb.com/wp-content/blogs.dir/1/files/2015/05/viz3.jpg</a>
</p>
</div>
<p>Die Autor*innen haben ihre Manupulation hier entsprechend clever versteckt indem sie
einfach gar keine Werte auf die y-Achse geschrieben haben. Das geht natürlich
gar nicht, da wir intuitiv die beiden Flächen, bzw. Höhen der Balken ins
Verhältnis setzen und uns weniger durch die abstrakten Zahlen beeinflussen lassen.
Daher ist es gerade bei Histogrammen und Balkendiagrammen immer wichtig bei dem
absoluten Nullpunkt zu starten.<a href="#fn41" class="footnote-ref" id="fnref41"><sup>41</sup></a></p>
<p>Im Folgenden sehen wir die manipulierende und korrekte Grafik nebeneinander:</p>
<div class="sourceCode" id="cb529"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb529-1"><a href="vis.html#cb529-1" aria-hidden="true"></a>data_used &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">Werte=</span><span class="kw">c</span>(<span class="dv">6000000</span>, <span class="dv">7066000</span>), <span class="dt">Art=</span><span class="kw">c</span>(<span class="st">&quot;Zustand&quot;</span>, <span class="st">&quot;Ziel&quot;</span>))</span>
<span id="cb529-2"><a href="vis.html#cb529-2" aria-hidden="true"></a></span>
<span id="cb529-3"><a href="vis.html#cb529-3" aria-hidden="true"></a>normal &lt;-<span class="st"> </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(<span class="dt">data =</span> data_used,</span>
<span id="cb529-4"><a href="vis.html#cb529-4" aria-hidden="true"></a>                      <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span><span class="kw">reorder</span>(Art, Werte), <span class="dt">y=</span>Werte)) <span class="op">+</span></span>
<span id="cb529-5"><a href="vis.html#cb529-5" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="dt">fill=</span><span class="st">&quot;#003366&quot;</span>, <span class="dt">alpha=</span><span class="fl">0.75</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb529-6"><a href="vis.html#cb529-6" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label=</span><span class="kw">as.character</span>(<span class="kw">format</span>(Werte, <span class="dt">scientific =</span> <span class="ot">FALSE</span>))), </span>
<span id="cb529-7"><a href="vis.html#cb529-7" aria-hidden="true"></a>            <span class="dt">size=</span><span class="dv">6</span>, <span class="dt">vjust=</span><span class="fl">1.75</span>, <span class="dt">color=</span><span class="st">&quot;#f2f2f2&quot;</span>) <span class="op">+</span></span>
<span id="cb529-8"><a href="vis.html#cb529-8" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(</span>
<span id="cb529-9"><a href="vis.html#cb529-9" aria-hidden="true"></a>    <span class="dt">name =</span> <span class="st">&quot;Anzahl von Nutzer*innen in Hunderttausend&quot;</span>,</span>
<span id="cb529-10"><a href="vis.html#cb529-10" aria-hidden="true"></a>    <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">8000000</span>, <span class="dv">1000000</span>),</span>
<span id="cb529-11"><a href="vis.html#cb529-11" aria-hidden="true"></a>    <span class="dt">labels =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">80</span>, <span class="dv">10</span>),</span>
<span id="cb529-12"><a href="vis.html#cb529-12" aria-hidden="true"></a>    <span class="dt">expand =</span> <span class="kw">expansion</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), </span>
<span id="cb529-13"><a href="vis.html#cb529-13" aria-hidden="true"></a>                          <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">500000</span>))</span>
<span id="cb529-14"><a href="vis.html#cb529-14" aria-hidden="true"></a>    ) <span class="op">+</span></span>
<span id="cb529-15"><a href="vis.html#cb529-15" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Nutzer*innen von Obamacare&quot;</span>, </span>
<span id="cb529-16"><a href="vis.html#cb529-16" aria-hidden="true"></a>       <span class="dt">caption =</span> <span class="st">&quot;Quelle: Fox News&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb529-17"><a href="vis.html#cb529-17" aria-hidden="true"></a><span class="st">  </span>icaeDesign<span class="op">::</span><span class="kw">theme_icae</span>() <span class="op">+</span></span>
<span id="cb529-18"><a href="vis.html#cb529-18" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme</span>(</span>
<span id="cb529-19"><a href="vis.html#cb529-19" aria-hidden="true"></a>    <span class="dt">axis.title.y =</span> <span class="kw">element_text</span>(),</span>
<span id="cb529-20"><a href="vis.html#cb529-20" aria-hidden="true"></a>    <span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>),</span>
<span id="cb529-21"><a href="vis.html#cb529-21" aria-hidden="true"></a>    <span class="dt">axis.title.x =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb529-22"><a href="vis.html#cb529-22" aria-hidden="true"></a>    <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">14</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>)</span>
<span id="cb529-23"><a href="vis.html#cb529-23" aria-hidden="true"></a>  )</span>
<span id="cb529-24"><a href="vis.html#cb529-24" aria-hidden="true"></a></span>
<span id="cb529-25"><a href="vis.html#cb529-25" aria-hidden="true"></a>manipulativ &lt;-<span class="st"> </span>normal <span class="op">+</span></span>
<span id="cb529-26"><a href="vis.html#cb529-26" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">coord_cartesian</span>(<span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">5750000</span>, <span class="dv">7200000</span>)) <span class="op">+</span></span>
<span id="cb529-27"><a href="vis.html#cb529-27" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme</span>(</span>
<span id="cb529-28"><a href="vis.html#cb529-28" aria-hidden="true"></a>    <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb529-29"><a href="vis.html#cb529-29" aria-hidden="true"></a>    <span class="dt">axis.title =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb529-30"><a href="vis.html#cb529-30" aria-hidden="true"></a>    <span class="dt">axis.line.y =</span> <span class="kw">element_blank</span>(), </span>
<span id="cb529-31"><a href="vis.html#cb529-31" aria-hidden="true"></a>    <span class="dt">axis.text.y =</span> <span class="kw">element_blank</span>()</span>
<span id="cb529-32"><a href="vis.html#cb529-32" aria-hidden="true"></a>    )</span>
<span id="cb529-33"><a href="vis.html#cb529-33" aria-hidden="true"></a></span>
<span id="cb529-34"><a href="vis.html#cb529-34" aria-hidden="true"></a>ggpubr<span class="op">::</span><span class="kw">ggarrange</span>(manipulativ, normal, <span class="dt">ncol =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-75-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Eine beliebte Variante ist es, die y-Achse zwar im Nullpunkt starten zu lassen,
aber einfach die Achse zwischendrin abzuschneiden.
Das Prinzip bleibt aber das gleiche und so etwas ist in keinem Fall eine gute Idee!</p>
</div>
<div id="klassiker-2-geschickt-gewählter-zeitraum-und-clever-gewählte-achsenabschnitte" class="section level3" number="5.6.2">
<h3><span class="header-section-number">5.6.2</span> Klassiker 2: Geschickt gewählter Zeitraum und clever gewählte Achsenabschnitte</h3>
<p>Sie möchten eine Tendenz zum Ausdruck bringen, die es gar nicht gibt?
Grundsätzlich bieten sich hier drei Vorgehen an:</p>
<ol style="list-style-type: decimal">
<li>Sie wählen aus den ganzen Beobachtungen den Zeitraum aus in dem die Tendenz besteht.</li>
<li>Sie machen die Zeitachse möglichst kurz, dann wirken Veränderungen größer.</li>
<li>Sie zoomen in die y-Achse rein, auch das lässt Veränderungen größer werden.</li>
</ol>
<p>Sehr gut funktioniert das bei schwankenden Größen wie der Arbeitslosigkeit.
Gerade der erste Punkt funktioniert bei Arbeitslosenstatistiken immer sehr gut:</p>
<div class="sourceCode" id="cb530"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb530-1"><a href="vis.html#cb530-1" aria-hidden="true"></a>agenda_daten &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">filter</span>(al_daten, year<span class="op">&gt;</span><span class="dv">2000</span>)</span>
<span id="cb530-2"><a href="vis.html#cb530-2" aria-hidden="true"></a></span>
<span id="cb530-3"><a href="vis.html#cb530-3" aria-hidden="true"></a>manipulativ &lt;-<span class="st"> </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(<span class="dt">data =</span> agenda_daten,</span>
<span id="cb530-4"><a href="vis.html#cb530-4" aria-hidden="true"></a>                      <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>year, <span class="dt">y=</span>unemp_rate)</span>
<span id="cb530-5"><a href="vis.html#cb530-5" aria-hidden="true"></a>                      ) <span class="op">+</span></span>
<span id="cb530-6"><a href="vis.html#cb530-6" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb530-7"><a href="vis.html#cb530-7" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_line</span>() <span class="op">+</span></span>
<span id="cb530-8"><a href="vis.html#cb530-8" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="dv">2005</span>) <span class="op">+</span></span>
<span id="cb530-9"><a href="vis.html#cb530-9" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(</span>
<span id="cb530-10"><a href="vis.html#cb530-10" aria-hidden="true"></a>    <span class="dt">name =</span> <span class="st">&quot;Arbeitslosigkeit&quot;</span>, </span>
<span id="cb530-11"><a href="vis.html#cb530-11" aria-hidden="true"></a>    <span class="dt">labels =</span> scales<span class="op">::</span><span class="kw">percent_format</span>(<span class="dt">accuracy =</span> <span class="dv">1</span>, <span class="dt">scale =</span> <span class="dv">1</span>)</span>
<span id="cb530-12"><a href="vis.html#cb530-12" aria-hidden="true"></a>    ) <span class="op">+</span></span>
<span id="cb530-13"><a href="vis.html#cb530-13" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Arbeitslosigkeit seit Einführung der Agenda 2010&quot;</span>,</span>
<span id="cb530-14"><a href="vis.html#cb530-14" aria-hidden="true"></a>       <span class="dt">caption =</span> <span class="st">&quot;Quelle: AMECO&quot;</span>) <span class="op">+</span></span>
<span id="cb530-15"><a href="vis.html#cb530-15" aria-hidden="true"></a><span class="st">  </span>icaeDesign<span class="op">::</span><span class="kw">theme_icae</span>() <span class="op">+</span></span>
<span id="cb530-16"><a href="vis.html#cb530-16" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme</span>(<span class="dt">axis.title.x =</span> <span class="kw">element_blank</span>())</span>
<span id="cb530-17"><a href="vis.html#cb530-17" aria-hidden="true"></a></span>
<span id="cb530-18"><a href="vis.html#cb530-18" aria-hidden="true"></a></span>
<span id="cb530-19"><a href="vis.html#cb530-19" aria-hidden="true"></a>normal &lt;-<span class="st"> </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(<span class="dt">data =</span> al_daten,</span>
<span id="cb530-20"><a href="vis.html#cb530-20" aria-hidden="true"></a>                      <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x=</span>year, <span class="dt">y=</span>unemp_rate)</span>
<span id="cb530-21"><a href="vis.html#cb530-21" aria-hidden="true"></a>                      ) <span class="op">+</span></span>
<span id="cb530-22"><a href="vis.html#cb530-22" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb530-23"><a href="vis.html#cb530-23" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_line</span>() <span class="op">+</span></span>
<span id="cb530-24"><a href="vis.html#cb530-24" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;loess&quot;</span>, <span class="dt">se =</span> F) <span class="op">+</span></span>
<span id="cb530-25"><a href="vis.html#cb530-25" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(</span>
<span id="cb530-26"><a href="vis.html#cb530-26" aria-hidden="true"></a>    <span class="dt">name =</span> <span class="st">&quot;Arbeitslosigkeit&quot;</span>, </span>
<span id="cb530-27"><a href="vis.html#cb530-27" aria-hidden="true"></a>    <span class="dt">labels =</span> scales<span class="op">::</span><span class="kw">percent_format</span>(<span class="dt">accuracy =</span> <span class="dv">1</span>, <span class="dt">scale =</span> <span class="dv">1</span>)</span>
<span id="cb530-28"><a href="vis.html#cb530-28" aria-hidden="true"></a>    ) <span class="op">+</span></span>
<span id="cb530-29"><a href="vis.html#cb530-29" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Arbeitslosigkeit in der langen Frist&quot;</span>,</span>
<span id="cb530-30"><a href="vis.html#cb530-30" aria-hidden="true"></a>       <span class="dt">caption =</span> <span class="st">&quot;Quelle: AMECO&quot;</span>) <span class="op">+</span></span>
<span id="cb530-31"><a href="vis.html#cb530-31" aria-hidden="true"></a><span class="st">  </span>icaeDesign<span class="op">::</span><span class="kw">theme_icae</span>() <span class="op">+</span></span>
<span id="cb530-32"><a href="vis.html#cb530-32" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme</span>(<span class="dt">axis.title.x =</span> <span class="kw">element_blank</span>())</span>
<span id="cb530-33"><a href="vis.html#cb530-33" aria-hidden="true"></a></span>
<span id="cb530-34"><a href="vis.html#cb530-34" aria-hidden="true"></a>ggpubr<span class="op">::</span><span class="kw">ggarrange</span>(normal, manipulativ, <span class="dt">nrow=</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>#&gt; `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-78-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Selbstverständlich ist der obere Graph auch nicht ganz manipulationsfrei.
Aber es wird deutlich, wie viel Spielraum Sie nur über die Darstellung von
bestimmten Grafiken haben.</p>
<p>Die weiteren beiden Punkte lassen sich anhand der Staatsausgaben in Deutschland
auch sehr schön illustrieren.
Die Rohdaten stammen von der
<a href="https://ec.europa.eu/info/business-economy-euro/indicators-statistics/economic-databases/macro-economic-database-ameco/download-annual-data-set-macro-economic-database-ameco_e">AMECO Homepage</a>
und sind dem Kapitel “General Government/excessive deficit procedure” entnommen.
Sie sind ein schönes Beispiel für die weit verbreiteten ‘breiten’ Daten, die
wir erst einmal in ein brauchbares Format bringen müssen:</p>
<div class="sourceCode" id="cb532"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb532-1"><a href="vis.html#cb532-1" aria-hidden="true"></a>ameco_data &lt;-<span class="st"> </span>data.table<span class="op">::</span><span class="kw">fread</span>(here<span class="op">::</span><span class="kw">here</span>(<span class="st">&quot;data/raw/AMECO16.TXT&quot;</span>), <span class="dt">fill =</span> T, <span class="dt">header =</span> T) <span class="op">%&gt;%</span></span>
<span id="cb532-2"><a href="vis.html#cb532-2" aria-hidden="true"></a><span class="st">  </span>dyplr<span class="op">::</span><span class="kw">filter</span>(</span>
<span id="cb532-3"><a href="vis.html#cb532-3" aria-hidden="true"></a>    TITLE<span class="op">==</span><span class="st">&quot;Total current expenditure: general government :- Excessive deficit procedure&quot;</span>,</span>
<span id="cb532-4"><a href="vis.html#cb532-4" aria-hidden="true"></a>    COUNTRY<span class="op">==</span><span class="st">&quot;Germany&quot;</span>,</span>
<span id="cb532-5"><a href="vis.html#cb532-5" aria-hidden="true"></a>    UNIT <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;(Percentage of GDP at current prices (excessive deficit procedure))&quot;</span>, </span>
<span id="cb532-6"><a href="vis.html#cb532-6" aria-hidden="true"></a>                <span class="st">&quot;Mrd ECU/EUR&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb532-7"><a href="vis.html#cb532-7" aria-hidden="true"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="op">-</span><span class="kw">one_of</span>(<span class="st">&quot;CODE&quot;</span>, <span class="st">&quot;COUNTRY&quot;</span>, <span class="st">&quot;SUB-CHAPTER&quot;</span>, <span class="st">&quot;TITLE&quot;</span>, <span class="st">&quot;V68&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb532-8"><a href="vis.html#cb532-8" aria-hidden="true"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">UNIT=</span><span class="kw">ifelse</span>(UNIT<span class="op">==</span><span class="st">&quot;Mrd ECU/EUR&quot;</span>, <span class="st">&quot;Abs&quot;</span>, <span class="st">&quot;PercGDP&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb532-9"><a href="vis.html#cb532-9" aria-hidden="true"></a><span class="st">  </span>tidyr<span class="op">::</span><span class="kw">pivot_longer</span>(<span class="dt">names_to =</span> <span class="st">&quot;Jahr&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;Wert&quot;</span>, <span class="dt">cols =</span> <span class="op">-</span>UNIT) <span class="op">%&gt;%</span></span>
<span id="cb532-10"><a href="vis.html#cb532-10" aria-hidden="true"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">filter</span>(Jahr<span class="op">&gt;</span><span class="dv">1990</span>) <span class="op">%&gt;%</span></span>
<span id="cb532-11"><a href="vis.html#cb532-11" aria-hidden="true"></a><span class="st">  </span>tidyr<span class="op">::</span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> UNIT, <span class="dt">values_from =</span> Wert)</span></code></pre></div>
<p>Jetzt können wir die Daten visualisieren:</p>
<div class="sourceCode" id="cb533"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb533-1"><a href="vis.html#cb533-1" aria-hidden="true"></a>ameco_geier_version &lt;-<span class="st"> </span>ameco_data <span class="op">%&gt;%</span></span>
<span id="cb533-2"><a href="vis.html#cb533-2" aria-hidden="true"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">filter</span>(Jahr <span class="op">%in%</span><span class="st"> </span><span class="kw">seq</span>(<span class="dv">1991</span>, <span class="dv">2021</span>, <span class="dv">5</span>)) </span>
<span id="cb533-3"><a href="vis.html#cb533-3" aria-hidden="true"></a></span>
<span id="cb533-4"><a href="vis.html#cb533-4" aria-hidden="true"></a>manipulativ &lt;-<span class="st"> </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(<span class="dt">data =</span> ameco_geier_version,</span>
<span id="cb533-5"><a href="vis.html#cb533-5" aria-hidden="true"></a>                      <span class="kw">aes</span>(<span class="dt">x=</span>Jahr, <span class="dt">y=</span>Abs)) <span class="op">+</span></span>
<span id="cb533-6"><a href="vis.html#cb533-6" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb533-7"><a href="vis.html#cb533-7" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_line</span>() <span class="op">+</span></span>
<span id="cb533-8"><a href="vis.html#cb533-8" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;Staatsausgaben in Mrd. ECU/EUR&quot;</span>,</span>
<span id="cb533-9"><a href="vis.html#cb533-9" aria-hidden="true"></a>                     <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">600</span>, <span class="dv">1600</span>)) <span class="op">+</span></span>
<span id="cb533-10"><a href="vis.html#cb533-10" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Geier Staat und die Gießkanne&quot;</span>, </span>
<span id="cb533-11"><a href="vis.html#cb533-11" aria-hidden="true"></a>       <span class="dt">subtitle =</span> <span class="st">&quot;Steigende Staatsausgaben seit 1991&quot;</span>,</span>
<span id="cb533-12"><a href="vis.html#cb533-12" aria-hidden="true"></a>       <span class="dt">caption =</span> <span class="st">&quot;Quelle: AMECO.&quot;</span>) <span class="op">+</span></span>
<span id="cb533-13"><a href="vis.html#cb533-13" aria-hidden="true"></a><span class="st">  </span>icaeDesign<span class="op">::</span><span class="kw">theme_icae</span>() <span class="op">+</span></span>
<span id="cb533-14"><a href="vis.html#cb533-14" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme</span>(<span class="dt">axis.title.x =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb533-15"><a href="vis.html#cb533-15" aria-hidden="true"></a>        <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="dv">0</span>, <span class="dt">size =</span> <span class="dv">14</span>))</span>
<span id="cb533-16"><a href="vis.html#cb533-16" aria-hidden="true"></a></span>
<span id="cb533-17"><a href="vis.html#cb533-17" aria-hidden="true"></a>normal &lt;-<span class="st"> </span>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(<span class="dt">data =</span> ameco_data,</span>
<span id="cb533-18"><a href="vis.html#cb533-18" aria-hidden="true"></a>                      <span class="kw">aes</span>(<span class="dt">x=</span>Jahr, <span class="dt">y=</span>PercGDP)) <span class="op">+</span></span>
<span id="cb533-19"><a href="vis.html#cb533-19" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb533-20"><a href="vis.html#cb533-20" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">geom_line</span>() <span class="op">+</span></span>
<span id="cb533-21"><a href="vis.html#cb533-21" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;Staatsausgaben in % des BIP&quot;</span>,</span>
<span id="cb533-22"><a href="vis.html#cb533-22" aria-hidden="true"></a>                     <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">60</span>)) <span class="op">+</span></span>
<span id="cb533-23"><a href="vis.html#cb533-23" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Staatsausgaben seit 1991&quot;</span>,</span>
<span id="cb533-24"><a href="vis.html#cb533-24" aria-hidden="true"></a>       <span class="dt">caption =</span> <span class="st">&quot;Quelle: AMECO.&quot;</span>) <span class="op">+</span></span>
<span id="cb533-25"><a href="vis.html#cb533-25" aria-hidden="true"></a><span class="st">  </span>icaeDesign<span class="op">::</span><span class="kw">theme_icae</span>() <span class="op">+</span></span>
<span id="cb533-26"><a href="vis.html#cb533-26" aria-hidden="true"></a><span class="st">  </span>ggplot2<span class="op">::</span><span class="kw">theme</span>(<span class="dt">axis.title.x =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb533-27"><a href="vis.html#cb533-27" aria-hidden="true"></a>        <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="dv">0</span>, <span class="dt">size =</span> <span class="dv">14</span>))</span>
<span id="cb533-28"><a href="vis.html#cb533-28" aria-hidden="true"></a></span>
<span id="cb533-29"><a href="vis.html#cb533-29" aria-hidden="true"></a></span>
<span id="cb533-30"><a href="vis.html#cb533-30" aria-hidden="true"></a>ggpubr<span class="op">::</span><span class="kw">ggarrange</span>(manipulativ, normal, <span class="dt">ncol =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="Chap-visualization_files/figure-html/unnamed-chunk-82-1.png" width="75%" height="75%" style="display: block; margin: auto;" /></p>
<p>Falls Sie jetzt meinen: das ist ja eigentlich zu einfach um wirklich vorzukommen,
dann schauen Sie mal in Abbildung <a href="vis.html#fig:fazbetrug">5.5</a> (bei der noch die Dummheit
hinzukommt eine nominale Größe über die Zeit abzubilden),<a href="#fn42" class="footnote-ref" id="fnref42"><sup>42</sup></a> in Ihre Tageszeitung
oder in den sozialen Medien. Sie werden (leider) feststellen, dass solche
visuellen Tricksereien sowohl in Schund- als auch Qualitätsmedien, aber auch
in der Wissenschaft sehr weit verbreitet sind. Aber Sie wissen das ja jetzt und
brauchen sich nicht mehr aufs Glatteis führen zu lassen.</p>
<div class="figure" style="text-align: center"><span id="fig:fazbetrug"></span>
<img src="figures/vis-hb-faz.pdf" alt="Quelle: FAZ vom 11. Juli 2020 (linkes Bild) und Bundesministerium für Arbeit und Soziales (mittleres Bild) und Handelsblatt vom 13. Juli 2020 (rechtes Bild)." width="75%" height="75%" />
<p class="caption">
Figure 5.5: Quelle: FAZ vom 11. Juli 2020 (linkes Bild) und Bundesministerium für Arbeit und Soziales (mittleres Bild) und Handelsblatt vom 13. Juli 2020 (rechtes Bild).
</p>
</div>
</div>
</div>
<div id="vis-links" class="section level2" number="5.7">
<h2><span class="header-section-number">5.7</span> Links und weiterführende Literatur</h2>
<p>Einen guten Überblick über viele häufig verwendeten Befehle bietet
<a href="https://rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf">dieser Schummelzettel</a>.</p>
<p>Die Debatte ob nun <code>base</code> oder <code>ggplot2</code> ‘besser’ ist kennt natürlich
unzählbar viele Beiträge - die meisten davon geschrieben von Menschen mit
starker Meinung und schwachen Argumenten.
Ein recht häufig zitierter
<a href="https://simplystatistics.org/2016/02/11/why-i-dont-use-ggplot2/">pro-base Blog</a>
von Jeff Leek findet hier eine
<a href="http://varianceexplained.org/r/why-I-use-ggplot2/">pro-ggplot Antwort</a>.
Nathan Yau bezieht sich auf beide Beiträge und vollzieht hier einen
<a href="https://flowingdata.com/2016/03/22/comparing-ggplot2-and-r-base-graphics/">sehr pragmatisch geschriebenen Vergleich</a>
Auch wenn er das Potenzial von <code>ggplot2</code> nicht auch nur im Ansatz ausnutzt
ist es doch ein netter Vergleich mit in meinen Augen sinnvoller Conclusio:
“There’s also no problem with using everything available to you.
At the end of the day, it’s all R.”</p>
<p>Für alle die sich mit den theoretischen Grundlagen von <code>ggplot2</code> genauer
befassen wollen:
Die <code>ggplot2</code> zugrundeliegende Idee einer <em>grammar of graphics</em> geht,
wie anfangs des Kapitels schon beschrieben, auf
<span class="citation">Wilkinson (<a href="#ref-GrammarGraphics" role="doc-biblioref">1999</a>)</span> zurück und wird in <span class="citation">Wickham (<a href="#ref-wickhamggplot" role="doc-biblioref">2010</a>)</span> theoretisch ausgeführt.</p>
<p><span class="citation">Schwabish (<a href="#ref-schwabischVis" role="doc-biblioref">2014</a>)</span> wurde bereits erwähnt und ist eine konstruktive Auseinandersetzung
mit typischen Visualisierungsfehlern, die auch tatsächlich in Top-Journalen
gemacht wurden. Besonders wichtig: konstruktive Verbesserungsvorschläge sind
gleich mit dabei.</p>
<p><span class="citation">Krämer (<a href="#ref-luegen" role="doc-biblioref">2015</a>)</span> ist eine klassische Sammlung manipulativer Grafiken und sicherlich
empfehlenswert. Eine allgemeinere Diskussion von bestenfalls irreführenden
Visualisierungen und ihre Implementierung in R findet sich
<a href="https://www.data-to-viz.com/caveats.html">hier</a>.</p>
<p>Falls Sie einen neuen Typ Grafik erstellen wollen ist es immer sinnvoll, sich
Beispiele aus dem Internet anzuschauen, oder sogar bestehenden Code zu
kopieren und für die eigenen Bedürfnisse anzupassen.
Die <a href="https://www.r-graph-gallery.com/">R Graph Gallery</a> ist dafür ein
hervorragender Ausgangspunkt.
Ansonsten bietet auch das <a href="http://www.cookbook-r.com/Graphs/">R Graphics Cookbook</a>
zahlreiche sehr nützliche Ausgangsbeispiele.</p>
<p>Falls Sie geografische Daten visualisieren wollen finden Sie hier ein
<a href="https://timogrossenbacher.ch/2016/12/beautiful-thematic-maps-with-ggplot2-only/">wunderbares Eingangsbeispiel</a>.
Zur Visualisierung von Stromgrößen auf Karten finden Sie
<a href="https://www.r-graph-gallery.com/connection-map.html">hier</a> eine schöne Anleitung.</p>


</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-R-icae">
<p>Gräbner, Claudius. 2019. <em>IcaeDesign: Corporate Design-Like Functions for the Icae</em>. <a href="https://github.com/graebnerc/icaeDesign">https://github.com/graebnerc/icaeDesign</a>.</p>
</div>
<div id="ref-CJE">
<p>Gräbner, Claudius, Philipp Heimberger, Jakob Kapeller, and Bernhard Schütz. 2020. “Is Europe disintegrating? Macroeconomic divergence, structural polarization, trade and fragility.” <em>Cambridge Journal of Economics</em> 44 (3): 647–69. <a href="https://doi.org/10.1093/cje/bez059">https://doi.org/10.1093/cje/bez059</a>.</p>
</div>
<div id="ref-hanson">
<p>Hanson, Gordon H. 2012. “The Rise of Middle Kingdoms: Emerging Economies in Global Trade.” <em>Journal of Economic Perspectives</em> 26 (2): 41–64. <a href="https://doi.org/10.1257/jep.26.2.41">https://doi.org/10.1257/jep.26.2.41</a>.</p>
</div>
<div id="ref-dataviz">
<p>Holtz, Yan, and Conor Healy. 2020. “From Data to Viz.” <a href="https://www.data-to-viz.com/">https://www.data-to-viz.com/</a>.</p>
</div>
<div id="ref-fes">
<p>Kapeller, Jakob, Claudius Gräbner, and Philipp Heimberger. 2019. <em>Wirtschaftliche Polarisierung in Europa: Ursachen und Handlungsoptionen</em>. Bonn: Friedrich-Ebert Stiftung. <a href="https://www.fes.de/wirtschaftliche-polarisierung-in-europa">https://www.fes.de/wirtschaftliche-polarisierung-in-europa</a>.</p>
</div>
<div id="ref-R-ggpubr">
<p>Kassambara, Alboukadel. 2019. <em>Ggpubr: ’Ggplot2’ Based Publication Ready Plots</em>. <a href="https://CRAN.R-project.org/package=ggpubr">https://CRAN.R-project.org/package=ggpubr</a>.</p>
</div>
<div id="ref-luegen">
<p>Krämer, Walter. 2015. <em>So Lügt Man Mit Statistik</em>. Frankfurt und New York: Campus Verlag.</p>
</div>
<div id="ref-R-latex">
<p>Meschiari, Stefano. 2015. <em>Latex2exp: Use Latex Expressions in Plots</em>. <a href="https://CRAN.R-project.org/package=latex2exp">https://CRAN.R-project.org/package=latex2exp</a>.</p>
</div>
<div id="ref-oecd">
<p>OECD. 2019. “Share of employed who are managers, by sex.” OECD.stat. <a href="https://doi.org/10.7910/DVN/H8SFD2">https://doi.org/10.7910/DVN/H8SFD2</a>.</p>
</div>
<div id="ref-schwabischVis">
<p>Schwabish, Jonathan A. 2014. “An Economist’s Guide to Visualizing Data.” <em>Journal of Economic Perspectives</em> 28 (1): 209–34. <a href="https://doi.org/10.1257/jep.28.1.209">https://doi.org/10.1257/jep.28.1.209</a>.</p>
</div>
<div id="ref-r-ggrepel">
<p>Slowikowski, Kamil. 2019. <em>Ggrepel: Automatically Position Non-Overlapping Text Labels with ’Ggplot2’</em>. <a href="https://CRAN.R-project.org/package=ggrepel">https://CRAN.R-project.org/package=ggrepel</a>.</p>
</div>
<div id="ref-wickhamggplot">
<p>Wickham, Hadley. 2010. “A Layered Grammar of Graphics.” <em>Journal of Computational and Graphical Statistics</em> 19 (1): 3–28. <a href="https://doi.org/10.1198/jcgs.2009.07098">https://doi.org/10.1198/jcgs.2009.07098</a>.</p>
</div>
<div id="ref-R-ggplot2">
<p>Wickham, Hadley. 2016. <em>Ggplot2: Elegant Graphics for Data Analysis</em>. Springer-Verlag New York. <a href="https://ggplot2.tidyverse.org">https://ggplot2.tidyverse.org</a>.</p>
</div>
<div id="ref-R-scales">
<p>Wickham, Hadley. 2018. <em>Scales: Scale Functions for Visualization</em>. <a href="https://CRAN.R-project.org/package=scales">https://CRAN.R-project.org/package=scales</a>.</p>
</div>
<div id="ref-GrammarGraphics">
<p>Wilkinson, Leland. 1999. <em>The Grammar of Graphics</em>. New York: Springer. <a href="https://www.springer.com/de/book/9781475731002">https://www.springer.com/de/book/9781475731002</a>.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="27">
<li id="fn27"><p>Normalerweise
geben wir bei jeder Funktion die Paketzugehörigkeit über die <code>::</code>-Schreibweise
explizit an. Wir werden darauf verzichten, wenn es sich um Hilfsfunktionen
innerhalb anderer Funktionen handelt. So wird die Funktion <code>ggplot2::aes()</code>
nur innherhalt der Funktion <code>ggplot2:ggplot()</code> aufgerufen. Daher werden wir
bei <code>aes()</code> und vergleichbaren Funktionen auf den Zusatz <code>ggplot2::</code> im Sinne
der besseren Lesbarkeit verzichten.<a href="vis.html#fnref27" class="footnote-back">↩︎</a></p></li>
<li id="fn28"><p>Eine Liste aller möglichen <code>geoms</code> finden Sie
<a href="https://ggplot2.tidyverse.org/reference/">hier</a>.<a href="vis.html#fnref28" class="footnote-back">↩︎</a></p></li>
<li id="fn29"><p>Alternativ zu <code>ggplot2::geom_*(stat="...")</code> können Sie auch
immer schreiben <code>ggplot2::stat_*(geom="...")</code>. Entsprechend sind folgende Aufrufe äquivalent:
<code>ggplot2::stat_identity(geom="line")</code> oder <code>ggplot2::geom_line(stat="identity")</code>.
Was Sie verwenden ist komplett Ihnen überlassen, allerdings ist die Verwendung
der <code>ggplot2::geom_*()</code>-Funktionen üblicher.<a href="vis.html#fnref29" class="footnote-back">↩︎</a></p></li>
<li id="fn30"><p>
Die möglichen Werte für <code>position</code> sind: <code>identitiy</code> (der Standard, keine
Anpassung der Positionen), <code>jitter</code> (Geoms werden über Zufallsfehler so
verschoben, dass sie sich nicht überlappen), <code>dodge</code> (sich überlappende Geoms
werden nebeneinander angeordnet), <code>fill</code> (die Geoms werden übereinander abgebildet
und zu einer gleichmäßigen Summe normalisiert) und <code>stack</code> (die Geoms werden
übereinender geplottet, aber nicht normalisiert).
Die letzten drei Argumente werden vor allem bei Balkendiagrammen häufig verwendet.<a href="vis.html#fnref30" class="footnote-back">↩︎</a></p></li>
<li id="fn31"><p>
Andere Skalen beziehen sich z.B. auf Farben, wenn wir Variablen zu einer farblichen
Ästetik gemapt hätten, oder die Formen der <code>geoms</code>. Beispiele für so
fortgeschrittene Anpassungen finden Sie <a href="vis.html#vis-adv">weiter unten</a> in diesem Kapitel.<a href="vis.html#fnref31" class="footnote-back">↩︎</a></p></li>
<li id="fn32"><p>Wenn wir nichts weiter an der
Skala verändern wollen außer diesem so genannten Label, dann brauchen wir auch
nicht die Funktion <code>ggplot2::scale_y_continuous()</code> aufrufen, sondern können einfach
schreiben <code>ggplot2::ylab("Handel / BIP")</code>.<a href="vis.html#fnref32" class="footnote-back">↩︎</a></p></li>
<li id="fn33"><p>
Insgesamt gibt es die folgenden Hilfsfunktionen im <code>ggplot2</code>-Paket:
<code>element_rect()</code> für Flächen und Kanten, <code>element_line()</code> für Linien und
<code>element_text()</code> für Text. Wenn Sie einen Teil eliminieren wollen verwenden
Sie <code>element_blank()</code>.
Alle diese Funktionen bieten unzählbar viele
<a href="https://ggplot2.tidyverse.org/reference/element.html">Gestaltungsmöglichkeiten</a>.<a href="vis.html#fnref33" class="footnote-back">↩︎</a></p></li>
<li id="fn34"><p>Wenn Sie den horizontalen und vertikalen Grid
separat ändern wollen verwenden Sie jeweils das Suffix <code>.x</code>, also
<code>ggplot2::panel.grid.minor.x</code> bzw. <code>ggplot2::panel.grid.minor.y</code>.<a href="vis.html#fnref34" class="footnote-back">↩︎</a></p></li>
<li id="fn35"><p>Auch im folgenden code wird die
Zugehörigkeit der <code>element_*</code>-Funktionen zu <code>ggplot2</code> der einfachen Lesbarkeit
halber nicht explizit deutlich gemacht.<a href="vis.html#fnref35" class="footnote-back">↩︎</a></p></li>
<li id="fn36"><p>Eine gute Anleitung zu Erstellen eigener Themen
finden Sie <a href="https://www.statworx.com/at/blog/custom-themes-in-ggplot2/">hier</a>.<a href="vis.html#fnref36" class="footnote-back">↩︎</a></p></li>
<li id="fn37"><p>
Standardmäßig werden Breite und Höhe in Zoll angegeben.
Mit der Funktion <code>unit()</code> aus dem Paket <a href="https://github.com/r-quantities/units">units</a> <span class="citation">(Pebesma, Mailund, and Hiebert <a href="#ref-R-units" role="doc-biblioref">2016</a>)</span>
können Sie aber ganz einfach beliebige Einheiten
verwenden, z.B. <code>width = unit(2, "cm")</code>. In der Praxis probieren Sie einfach
herum bis Sie die richtige Kombination von Höhe und Breite gefunden haben.
Für Abbildungen, die aus nur einem Plot bestehen ist <code>6:4</code> häufig ein guter
Ausgangspunkt.<a href="vis.html#fnref37" class="footnote-back">↩︎</a></p></li>
<li id="fn38"><p>Wie die Daten nacherhoben wurden können Sie bei
Interesse über die
<a href="https://github.com/graebnerc/RforSocioEcon">Github Repo</a> des Skripts selbst
nachlesen.<a href="vis.html#fnref38" class="footnote-back">↩︎</a></p></li>
<li id="fn39"><p>Hier verwende ich
Daten von <span class="citation">The Growth Lab at Harvard University (<a href="#ref-atlas-hanson" role="doc-biblioref">2019</a>)</span>, die <a href="https://dataverse.harvard.edu/dataverse/atlas">hier</a>
abzurufen sind.<a href="vis.html#fnref39" class="footnote-back">↩︎</a></p></li>
<li id="fn40"><p>Die Farben
haben wir wieder vorher auf
<a href="https://www.w3schools.com/colors/colors_picker.asp">https://www.w3schools.com/colors/colors_picker.asp</a>
herausgesucht.<a href="vis.html#fnref40" class="footnote-back">↩︎</a></p></li>
<li id="fn41"><p>Wir wissen schließlich aus
<a href="data.html#data-arten">dem letzten Kapitel</a>, dass solche
Verhältnisvergleiche nur für verhältnis-skalierte Daten Sinn machen und diese
durch die Existenz eines absoluten Nullpunkts definiert sind!<a href="vis.html#fnref41" class="footnote-back">↩︎</a></p></li>
<li id="fn42"><p>Gefunden habe ich die Bilder
über <a href="https://twitter.com/PeterBofinger/status/1281894448717344768?s=20">diesen Tweet</a>.<a href="vis.html#fnref42" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="formalia.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R-SocioEcon-dt.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
